"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[3729],{73729:(e,n,i)=>{i.r(n),i.d(n,{EventTypesManagement:()=>he,default:()=>xe});var o,s,r,t,l,c=i(89379),a=i(57528),d=i(65043),u=i(73216),h=i(31881),x=i(10585),p=i(70459),j=i(96870),m=i(88787),g=i(85871),y=i(87139),f=i(22107),b=i(98662),v=i(42703),A=i(83169),C=i(24330),M=i(44093),k=i(98939),E=i(82459),T=i(73225),q=i(76668),w=i(73212),S=i(35699),B=i(67516),z=i(35929),D=i(56529),P=i(15071),J=i(11054),O=i(78460),L=i(25722),$=i(44860),U=i(61724),H=i(76659),I=i(96148),_=i(29904),F=i(10202),N=i(98481),R=i(19077),Q=i(30502),W=i(28846),K=i(39081),V=i(12730),X=i(58584),Z=i(99973),G=i(37809),Y=i(52003),ee=i(63295),ne=i(95214),ie=i(60319),oe=i(66037),se=i(39985),re=i(70579);const te=(0,p.J1)(o||(o=(0,a.A)(["\n  query BookableEventTypes($calendarId: String!) {\n    bookableEventTypes(calendarId: $calendarId) {\n      id\n      calendarId\n      name\n      description\n      color\n      icon\n      durationMinutes\n      isPaid\n      price\n      currency\n      stripePriceId\n      isActive\n      maxBookingsPerDay\n      minNoticeHours\n      maxFutureDays\n      bufferBeforeMinutes\n      bufferAfterMinutes\n      locationType\n      location\n      meetingLink\n      autoGenerateMeetingLink\n      questions {\n        id\n        question\n        required\n        type\n        options\n      }\n      confirmationMessage\n      reminderHoursBefore\n      displayOrder\n      totalBookings\n      lastBookedAt\n      createdAt\n    }\n  }\n"]))),le=(0,p.J1)(s||(s=(0,a.A)(["\n  mutation CreateBookableEventType($input: CreateBusinessCalendarBookableEventTypeInput!) {\n    createBookableEventType(input: $input) {\n      id\n      name\n      durationMinutes\n      isPaid\n      price\n      isActive\n    }\n  }\n"]))),ce=(0,p.J1)(r||(r=(0,a.A)(["\n  mutation UpdateBookableEventType($id: String!, $input: UpdateBusinessCalendarBookableEventTypeInput!) {\n    updateBookableEventType(id: $id, input: $input) {\n      id\n      name\n      durationMinutes\n      isPaid\n      price\n      isActive\n    }\n  }\n"]))),ae=(0,p.J1)(t||(t=(0,a.A)(["\n  mutation DeleteBookableEventType($id: String!) {\n    deleteBookableEventType(id: $id)\n  }\n"]))),de=(0,p.J1)(l||(l=(0,a.A)(["\n  mutation ToggleBookableEventTypeStatus($id: String!) {\n    toggleBookableEventTypeStatus(id: $id) {\n      id\n      isActive\n    }\n  }\n"]))),ue={name:"",description:"",durationMinutes:30,isPaid:!1,price:0,currency:"USD",color:"#4A90E2",minNoticeHours:24,maxFutureDays:60,bufferBeforeMinutes:0,bufferAfterMinutes:0,locationType:"Virtual",location:"",meetingLink:"",confirmationMessage:"",questions:[]},he=()=>{const{id:e}=(0,u.g)(),n=(0,u.Zp)(),i=(0,Q.d)(),{colorMode:o}=(0,M.G6)(),{isOpen:s,onOpen:r,onClose:t}=(0,j.j)(),l=(0,se.oU)("background.main",o),a=(0,se.oU)("background.cardGradient",o),p=(0,se.oU)("border.darkCard",o),he=(0,se.oU)("light"===o?"text.primary":"text.primaryDark",o),xe=(0,se.oU)("light"===o?"text.secondary":"text.secondaryDark",o),pe=(0,se.oU)("primary",o),je=(0,se.oU)("primaryHover",o);(0,oe.H)("Event Types Management");const[me,ge]=(0,d.useState)(ue),[ye,fe]=(0,d.useState)(null),{data:be,loading:ve,error:Ae,refetch:Ce}=(0,x.IT)(te,{variables:{calendarId:e},skip:!e}),[Me,{loading:ke}]=(0,h.n)(le,{onCompleted:()=>{i({title:"Event type created",status:"success",duration:3e3}),Ce(),Be()},onError:e=>{i({title:"Error creating event type",description:e.message,status:"error",duration:5e3})}}),[Ee,{loading:Te}]=(0,h.n)(ce,{onCompleted:()=>{i({title:"Event type updated",status:"success",duration:3e3}),Ce(),Be()},onError:e=>{i({title:"Error updating event type",description:e.message,status:"error",duration:5e3})}}),[qe]=(0,h.n)(ae,{onCompleted:()=>{i({title:"Event type deleted",status:"success",duration:3e3}),Ce()},onError:e=>{i({title:"Error deleting event type",description:e.message,status:"error",duration:5e3})}}),[we]=(0,h.n)(de,{onCompleted:()=>{i({title:"Status updated",status:"success",duration:2e3}),Ce()}}),Se=()=>{ge(ue),fe(null),r()},Be=()=>{ge(ue),fe(null),t()},ze=(e,n)=>{const i=e/100;return"".concat("USD"===n?"$":"AUD"===n?"A$":n).concat(i.toFixed(2))};if(ve)return(0,re.jsxs)(f.a,{bg:l,minH:"100vh",children:[(0,re.jsx)(Y.m,{}),(0,re.jsx)(k.m,{maxW:"container.xl",py:8,children:(0,re.jsxs)(F.T,{spacing:4,children:[(0,re.jsx)(H.y,{size:"xl",color:pe}),(0,re.jsx)(K.E,{color:he,children:"Loading event types..."})]})}),(0,re.jsx)(ee.n,{})]});if(Ae)return(0,re.jsxs)(f.a,{bg:l,minH:"100vh",children:[(0,re.jsx)(Y.m,{}),(0,re.jsx)(k.m,{maxW:"container.xl",py:8,children:(0,re.jsxs)(m.F,{status:"error",children:[(0,re.jsx)(g._,{}),(0,re.jsxs)(K.E,{color:he,children:["Error loading event types: ",Ae.message]})]})}),(0,re.jsx)(ee.n,{})]});const De=(null===be||void 0===be?void 0:be.bookableEventTypes)||[];return(0,re.jsxs)(f.a,{bg:l,minH:"100vh",children:[(0,re.jsx)(Y.m,{}),(0,re.jsx)(ne.y,{moduleConfig:ie.calendarsModuleConfig}),(0,re.jsxs)(k.m,{maxW:"container.xl",py:8,children:[(0,re.jsxs)(F.T,{spacing:6,align:"stretch",children:[(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsxs)(I.z,{spacing:4,children:[(0,re.jsx)(v.K,{"aria-label":"Back to my calendars",icon:(0,re.jsx)(G.g,{}),onClick:()=>n("/calendars/my"),bg:a,borderColor:p,color:he,_hover:{bg:je}}),(0,re.jsxs)(f.a,{children:[(0,re.jsx)(W.D,{size:"lg",color:he,children:"Event Types"}),(0,re.jsx)(K.E,{color:xe,children:"Manage bookable event types for your calendar"})]})]}),(0,re.jsxs)(I.z,{children:[(0,re.jsx)(b.$,{variant:"outline",borderColor:pe,color:pe,onClick:()=>n("/calendars/".concat(e,"/availability")),_hover:{bg:je,color:"white"},children:"\u23f0 Set Availability"}),(0,re.jsx)(b.$,{leftIcon:(0,re.jsx)(V.R,{}),bg:pe,color:"white",onClick:Se,_hover:{bg:je},children:"Create Event Type"})]})]}),0===De.length&&(0,re.jsx)(A.Z,{bg:a,borderColor:p,children:(0,re.jsx)(C.b,{children:(0,re.jsxs)(F.T,{spacing:4,py:8,children:[(0,re.jsx)(K.E,{fontSize:"lg",color:he,children:"No event types yet"}),(0,re.jsx)(K.E,{color:xe,children:"Create your first bookable event type to allow visitors to book time with you"}),(0,re.jsx)(b.$,{leftIcon:(0,re.jsx)(V.R,{}),bg:pe,color:"white",onClick:Se,_hover:{bg:je},children:"Create Event Type"})]})})}),De.length>0&&(0,re.jsx)(w.r,{columns:{base:1,md:2,lg:3},spacing:6,children:De.map(e=>(0,re.jsx)(A.Z,{opacity:e.isActive?1:.6,borderLeft:"4px solid",borderLeftColor:e.color||"blue.500",bg:a,borderColor:p,children:(0,re.jsx)(C.b,{children:(0,re.jsxs)(F.T,{align:"stretch",spacing:3,children:[(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsx)(W.D,{size:"md",color:he,children:e.name}),(0,re.jsxs)(I.z,{children:[(0,re.jsx)(v.K,{"aria-label":"Edit",icon:(0,re.jsx)(Z.q,{}),size:"sm",onClick:()=>(e=>{ge({name:e.name,description:e.description||"",durationMinutes:e.durationMinutes,isPaid:e.isPaid,price:e.price?e.price/100:0,currency:e.currency||"USD",color:e.color||"#4A90E2",minNoticeHours:e.minNoticeHours,maxFutureDays:e.maxFutureDays,bufferBeforeMinutes:e.bufferBeforeMinutes,bufferAfterMinutes:e.bufferAfterMinutes,locationType:e.locationType||"Virtual",location:e.location||"",meetingLink:e.meetingLink||"",confirmationMessage:e.confirmationMessage||"",questions:e.questions||[]}),fe(e.id),r()})(e),bg:a,color:he,_hover:{bg:je}}),(0,re.jsx)(v.K,{"aria-label":"Delete",icon:(0,re.jsx)(X.d,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this event type?")&&await qe({variables:{id:e}})})(e.id)})]})]}),e.description&&(0,re.jsx)(K.E,{fontSize:"sm",color:xe,noOfLines:2,children:e.description}),(0,re.jsx)(E.c,{}),(0,re.jsxs)(F.T,{align:"stretch",spacing:2,fontSize:"sm",children:[(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsx)(K.E,{color:xe,children:"Duration:"}),(0,re.jsxs)(K.E,{fontWeight:"medium",color:he,children:[e.durationMinutes," min"]})]}),e.isPaid&&(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsx)(K.E,{color:xe,children:"Price:"}),(0,re.jsx)(y.E,{colorScheme:"green",children:ze(e.price,e.currency)})]}),(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsx)(K.E,{color:xe,children:"Location:"}),(0,re.jsx)(K.E,{fontWeight:"medium",color:he,children:e.locationType})]}),(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsx)(K.E,{color:xe,children:"Bookings:"}),(0,re.jsx)(K.E,{fontWeight:"medium",color:he,children:e.totalBookings||0})]})]}),(0,re.jsx)(E.c,{}),(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsx)(K.E,{fontSize:"sm",color:xe,children:"Active"}),(0,re.jsx)(N.d,{isChecked:e.isActive,onChange:()=>(async e=>{await we({variables:{id:e}})})(e.id),colorScheme:"green"})]})]})})},e.id))})]}),(0,re.jsxs)(O.aF,{isOpen:s,onClose:Be,size:"xl",scrollBehavior:"inside",children:[(0,re.jsx)(J.m,{}),(0,re.jsxs)(L.$,{bg:a,borderColor:p,maxH:"90vh",children:[(0,re.jsx)(P.r,{color:he,children:ye?"Edit Event Type":"Create Event Type"}),(0,re.jsx)(z.s,{color:he}),(0,re.jsx)(B.c,{children:(0,re.jsxs)(F.T,{spacing:4,children:[(0,re.jsxs)(T.MJ,{isRequired:!0,children:[(0,re.jsx)(q.l,{color:he,children:"Name"}),(0,re.jsx)(S.p,{placeholder:"30min Consultation",value:me.name,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{name:e.target.value})),color:he})]}),(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Description"}),(0,re.jsx)(R.T,{placeholder:"A quick consultation to discuss your needs",value:me.description,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{description:e.target.value})),color:he})]}),(0,re.jsxs)(T.MJ,{isRequired:!0,children:[(0,re.jsx)(q.l,{color:he,children:"Duration (minutes)"}),(0,re.jsx)($.Q7,{value:me.durationMinutes,onChange:(e,n)=>ge((0,c.A)((0,c.A)({},me),{},{durationMinutes:n})),min:5,step:5,children:(0,re.jsx)($.OO,{color:he})})]}),(0,re.jsxs)(T.MJ,{display:"flex",alignItems:"center",children:[(0,re.jsx)(q.l,{mb:"0",color:he,children:"Paid Event"}),(0,re.jsx)(N.d,{isChecked:me.isPaid,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{isPaid:e.target.checked}))})]}),me.isPaid&&(0,re.jsxs)(I.z,{w:"full",children:[(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Price"}),(0,re.jsx)($.Q7,{value:me.price,onChange:(e,n)=>ge((0,c.A)((0,c.A)({},me),{},{price:n})),min:0,step:1,children:(0,re.jsx)($.OO,{color:he})})]}),(0,re.jsxs)(T.MJ,{w:"200px",children:[(0,re.jsx)(q.l,{color:he,children:"Currency"}),(0,re.jsxs)(U.l,{value:me.currency,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{currency:e.target.value})),color:he,children:[(0,re.jsx)("option",{value:"USD",children:"USD"}),(0,re.jsx)("option",{value:"AUD",children:"AUD"})]})]})]}),(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Location Type"}),(0,re.jsxs)(U.l,{value:me.locationType,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{locationType:e.target.value})),color:he,children:[(0,re.jsx)("option",{value:"Virtual",children:"Virtual"}),(0,re.jsx)("option",{value:"Physical",children:"Physical"}),(0,re.jsx)("option",{value:"Phone",children:"Phone"})]})]}),"Virtual"===me.locationType&&(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Meeting Link (optional)"}),(0,re.jsx)(S.p,{placeholder:"https://zoom.us/j/123456789",value:me.meetingLink,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{meetingLink:e.target.value})),color:he})]}),"Physical"===me.locationType&&(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Location Address"}),(0,re.jsx)(S.p,{placeholder:"123 Main St, City, State",value:me.location,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{location:e.target.value})),color:he})]}),(0,re.jsxs)(_.B,{direction:{base:"column",md:"row"},w:"full",children:[(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Min Notice (hours)"}),(0,re.jsx)($.Q7,{value:me.minNoticeHours,onChange:(e,n)=>ge((0,c.A)((0,c.A)({},me),{},{minNoticeHours:n})),min:0,children:(0,re.jsx)($.OO,{color:he})})]}),(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Max Future Days"}),(0,re.jsx)($.Q7,{value:me.maxFutureDays,onChange:(e,n)=>ge((0,c.A)((0,c.A)({},me),{},{maxFutureDays:n})),min:1,children:(0,re.jsx)($.OO,{color:he})})]})]}),(0,re.jsxs)(_.B,{direction:{base:"column",md:"row"},w:"full",children:[(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Buffer Before (min)"}),(0,re.jsx)($.Q7,{value:me.bufferBeforeMinutes,onChange:(e,n)=>ge((0,c.A)((0,c.A)({},me),{},{bufferBeforeMinutes:n})),min:0,children:(0,re.jsx)($.OO,{color:he})})]}),(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Buffer After (min)"}),(0,re.jsx)($.Q7,{value:me.bufferAfterMinutes,onChange:(e,n)=>ge((0,c.A)((0,c.A)({},me),{},{bufferAfterMinutes:n})),min:0,children:(0,re.jsx)($.OO,{color:he})})]})]}),(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{color:he,children:"Color"}),(0,re.jsx)(S.p,{type:"color",value:me.color,onChange:e=>ge((0,c.A)((0,c.A)({},me),{},{color:e.target.value}))})]}),(0,re.jsx)(E.c,{my:4}),(0,re.jsxs)(f.a,{w:"full",children:[(0,re.jsxs)(I.z,{justify:"space-between",mb:3,children:[(0,re.jsxs)(f.a,{children:[(0,re.jsx)(q.l,{color:he,mb:0,children:"Custom Questions"}),(0,re.jsx)(K.E,{fontSize:"sm",color:xe,children:"Ask visitors custom questions when they book"})]}),(0,re.jsx)(b.$,{size:"sm",leftIcon:(0,re.jsx)(V.R,{}),onClick:()=>{ge((0,c.A)((0,c.A)({},me),{},{questions:[...me.questions,{id:"q_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,11)),question:"",required:!1,type:"TEXT",options:[]}]}))},colorScheme:"blue",variant:"outline",children:"Add Question"})]}),0===me.questions.length&&(0,re.jsx)(f.a,{p:4,bg:"rgba(255,255,255,0.05)",borderRadius:"md",textAlign:"center",children:(0,re.jsx)(K.E,{fontSize:"sm",color:xe,children:'No custom questions yet. Click "Add Question" to create one.'})}),(0,re.jsx)(F.T,{spacing:4,align:"stretch",children:me.questions.map((e,n)=>{var i;return(0,re.jsx)(A.Z,{bg:"rgba(255,255,255,0.05)",borderColor:p,children:(0,re.jsx)(C.b,{children:(0,re.jsxs)(F.T,{spacing:3,align:"stretch",children:[(0,re.jsxs)(I.z,{justify:"space-between",children:[(0,re.jsxs)(K.E,{fontWeight:"bold",color:he,children:["Question ",n+1]}),(0,re.jsx)(v.K,{"aria-label":"Delete question",icon:(0,re.jsx)(X.d,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>{const e=[...me.questions];e.splice(n,1),ge((0,c.A)((0,c.A)({},me),{},{questions:e}))}})]}),(0,re.jsxs)(T.MJ,{isRequired:!0,children:[(0,re.jsx)(q.l,{fontSize:"sm",color:he,children:"Question Text"}),(0,re.jsx)(S.p,{placeholder:"e.g., What would you like to discuss?",value:e.question,onChange:e=>{const i=[...me.questions];i[n].question=e.target.value,ge((0,c.A)((0,c.A)({},me),{},{questions:i}))},color:he,size:"sm"})]}),(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{fontSize:"sm",color:he,children:"Answer Type"}),(0,re.jsxs)(U.l,{value:e.type,onChange:e=>{const i=[...me.questions];i[n].type=e.target.value,ge((0,c.A)((0,c.A)({},me),{},{questions:i}))},color:he,size:"sm",children:[(0,re.jsx)("option",{value:"TEXT",children:"Short Text"}),(0,re.jsx)("option",{value:"TEXTAREA",children:"Long Text (Textarea)"}),(0,re.jsx)("option",{value:"SELECT",children:"Dropdown (Select)"}),(0,re.jsx)("option",{value:"RADIO",children:"Radio Buttons"}),(0,re.jsx)("option",{value:"CHECKBOX",children:"Checkboxes"})]})]}),["SELECT","RADIO","CHECKBOX"].includes(e.type)&&(0,re.jsxs)(T.MJ,{children:[(0,re.jsx)(q.l,{fontSize:"sm",color:he,children:"Options (comma-separated)"}),(0,re.jsx)(S.p,{placeholder:"e.g., 1-10, 11-50, 51-100, 100+",value:(null===(i=e.options)||void 0===i?void 0:i.join(", "))||"",onChange:e=>{const i=[...me.questions];i[n].options=e.target.value.split(",").map(e=>e.trim()).filter(e=>e.length>0),ge((0,c.A)((0,c.A)({},me),{},{questions:i}))},color:he,size:"sm"})]}),(0,re.jsxs)(T.MJ,{display:"flex",alignItems:"center",children:[(0,re.jsx)(N.d,{isChecked:e.required,onChange:e=>{const i=[...me.questions];i[n].required=e.target.checked,ge((0,c.A)((0,c.A)({},me),{},{questions:i}))},size:"sm"}),(0,re.jsx)(q.l,{mb:"0",ml:2,fontSize:"sm",color:he,children:"Required"})]})]})})},n)})})]})]})}),(0,re.jsxs)(D.j,{children:[(0,re.jsx)(b.$,{variant:"ghost",mr:3,onClick:Be,color:he,children:"Cancel"}),(0,re.jsx)(b.$,{bg:pe,color:"white",onClick:async()=>{if(!me.name||!me.durationMinutes)return void i({title:"Please fill in required fields",status:"warning",duration:3e3});const n={name:me.name,description:me.description,color:me.color,durationMinutes:me.durationMinutes,isPaid:me.isPaid,currency:me.currency,minNoticeHours:me.minNoticeHours,maxFutureDays:me.maxFutureDays,bufferBeforeMinutes:me.bufferBeforeMinutes,bufferAfterMinutes:me.bufferAfterMinutes,locationType:me.locationType,location:me.location,meetingLink:me.meetingLink,confirmationMessage:me.confirmationMessage,questions:me.questions.map(e=>({id:e.id||"q_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,11)),question:e.question,required:e.required,type:e.type,options:e.options||[]}))};me.isPaid&&(n.price=100*me.price),ye?await Ee({variables:{id:ye,input:n}}):await Me({variables:{input:(0,c.A)((0,c.A)({},n),{},{calendarId:e})}})},isLoading:ke||Te,_hover:{bg:je},children:ye?"Update":"Create"})]})]})]})]}),(0,re.jsx)(ee.n,{})]})},xe=he}}]);
//# sourceMappingURL=3729.12f47897.chunk.js.map