"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[5959],{45959:(s,e,r)=>{r.r(e),r.d(e,{default:()=>bs});var i=r(57528),n=r(65043),o=r(10585),l=r(31881),d=r(70459),c=r(30502),t=r(44093),a=r(96870),h=r(87139),x=r(22107),j=r(98939),u=r(10202),m=r(96148),p=r(28846),g=r(25011),b=r(39081),S=r(98662),v=r(73212),f=r(83169),w=r(24330),C=r(94217),P=r(53332),A=r(78149),z=r(94085),I=r(3109),U=r(31411),E=r(14566),k=r(51794),y=r(10227),D=r(45973),T=r(29244),W=r(35699),N=r(61724),R=r(80511),_=r(3313),M=r(55395),O=r(83201),$=r(82595),X=r(67813),Z=r(34946),V=r(27024),F=r(98481),G=r(78460),L=r(11054),B=r(25722),H=r(15071),K=r(35929),J=r(67516),Y=r(88787),q=r(85871),Q=r(82459),ss=r(56529),es=r(12733),rs=r(57712);const is=(0,r(14010).w)({d:"M19.5,9.5h-.75V6.75A6.751,6.751,0,0,0,5.533,4.811a1.25,1.25,0,1,0,2.395.717A4.251,4.251,0,0,1,16.25,6.75V9a.5.5,0,0,1-.5.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5Z",displayName:"UnlockIcon"});var ns,os,ls=r(85369),ds=r(39985),cs=r(52003),ts=r(63295),as=r(95214),hs=r(73892),xs=r(80454),js=r(66037),us=r(66801),ms=r(70579);const ps=(0,d.J1)(ns||(ns=(0,i.A)(["\n    query GetClientsWithPermissions {\n        clients {\n            id\n            fName\n            lName\n            email\n            phoneNumber\n            permissions\n            createdAt\n            updatedAt\n        }\n    }\n"]))),gs=(0,d.J1)(os||(os=(0,i.A)(["\n    mutation UpdateClient($id: ID!, $input: ClientInput!) {\n        updateClient(id: $id, input: $input) {\n            id\n            permissions\n        }\n    }\n"]))),bs=()=>{(0,js.H)("Password Permissions");const s=(0,c.d)(),{colorMode:e}=(0,t.G6)(),[r,i]=(0,n.useState)(""),[d,ns]=(0,n.useState)("all"),[os,bs]=(0,n.useState)([]),{isOpen:Ss,onOpen:vs,onClose:fs}=(0,a.j)(),ws=(0,ds.oU)("background.main",e),Cs=(0,ds.oU)("background.cardGradient",e),Ps=(0,ds.oU)("border.darkCard",e),As=(0,ds.oU)("primary",e),zs=((0,ds.oU)("primaryHover",e),(0,ds.oU)("light"===e?"text.primary":"text.primaryDark",e)),Is=(0,ds.oU)("light"===e?"text.secondary":"text.secondaryDark",e),Us=(0,ds.oU)("light"===e?"text.muted":"text.mutedDark",e),Es=(0,ds.oU)("successGreen",e),ks=(0,ds.oU)("status.error",e),ys=(0,ds.oU)("status.warning",e),Ds=(0,ds.oU)("status.info",e),{data:Ts,loading:Ws,refetch:Ns}=(0,o.IT)(ps),[Rs]=(0,l.n)(gs,{onCompleted:()=>{s({title:"Permissions updated",description:"Client permissions have been successfully updated.",status:"success",duration:3e3,isClosable:!0}),Ns()},onError:e=>{s({title:"Error updating permissions",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),_s=n.useMemo(()=>{if(null===Ts||void 0===Ts||!Ts.clients)return{total:0,admins:0,users:0};const s=Ts.clients;return{total:s.length,admins:s.filter(s=>{var e;return null===(e=s.permissions)||void 0===e?void 0:e.includes(us.Pp.PasswordAdmin)}).length,users:s.filter(s=>{var e;return null===(e=s.permissions)||void 0===e?void 0:e.includes(us.Pp.PasswordUser)}).length}},[Ts]),Ms=n.useMemo(()=>{if(null===Ts||void 0===Ts||!Ts.clients)return[];let s=[...Ts.clients];if("admin"===d?s=s.filter(s=>{var e;return null===(e=s.permissions)||void 0===e?void 0:e.includes("PASSWORD_ADMIN")}):"user"===d?s=s.filter(s=>{var e,r;return(null===(e=s.permissions)||void 0===e?void 0:e.includes("PASSWORD_USER"))&&!(null!==(r=s.permissions)&&void 0!==r&&r.includes("PASSWORD_ADMIN"))}):"none"===d&&(s=s.filter(s=>{var e,r;return!(null!==(e=s.permissions)&&void 0!==e&&e.includes("PASSWORD_ADMIN"))&&!(null!==(r=s.permissions)&&void 0!==r&&r.includes("PASSWORD_USER"))})),r){const e=r.toLowerCase();s=s.filter(s=>{var r,i,n,o;return(null===(r=s.fName)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(i=s.lName)||void 0===i?void 0:i.toLowerCase().includes(e))||(null===(n=s.email)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(o=s.phoneNumber)||void 0===o?void 0:o.includes(e))})}return s},[Ts,d,r]),Os=async(s,e,r)=>{const i=null===Ts||void 0===Ts?void 0:Ts.clients.find(e=>e.id===s);if(!i)return;let n=[...i.permissions||[]];r?n=n.filter(s=>s!==e):n.includes(e)||n.push(e),await Rs({variables:{id:s,input:{permissions:n}}})},$s=async(e,r)=>{if(0!==os.length){for(const s of os){const i=null===Ts||void 0===Ts?void 0:Ts.clients.find(e=>e.id===s);if(!i)continue;let n=[...i.permissions||[]];r?n.includes(e)||n.push(e):n=n.filter(s=>s!==e),await Rs({variables:{id:s,input:{permissions:n}}})}s({title:"Bulk update completed",description:"Updated ".concat(os.length," users"),status:"success",duration:3e3,isClosable:!0}),bs([]),fs()}else s({title:"No clients selected",description:"Please select at least one client to update.",status:"warning",duration:3e3,isClosable:!0})};return(0,ms.jsxs)(x.a,{bg:ws,minH:"100vh",children:[(0,ms.jsx)(cs.m,{}),(0,ms.jsx)(as.y,{moduleConfig:hs.default}),(0,ms.jsx)(j.m,{maxW:"container.xl",py:8,children:(0,ms.jsxs)(u.T,{spacing:8,align:"stretch",children:[(0,ms.jsx)(x.a,{children:(0,ms.jsxs)(m.z,{justify:"space-between",mb:4,children:[(0,ms.jsxs)(u.T,{align:"start",spacing:1,children:[(0,ms.jsxs)(p.D,{size:"xl",color:zs,fontFamily:ds.Kk.fonts.heading,children:[(0,ms.jsx)(g.I,{as:ls.e7y,mr:3}),"Password Permissions"]}),(0,ms.jsx)(b.E,{color:Is,children:"Manage who can issue and view passwords"})]}),os.length>0&&(0,ms.jsxs)(S.$,{colorScheme:"blue",size:"lg",onClick:vs,leftIcon:(0,ms.jsx)(g.I,{as:ls.aBc}),children:["Bulk Update (",os.length,")"]})]})}),(0,ms.jsxs)(v.r,{columns:{base:1,md:4},spacing:6,children:[(0,ms.jsx)(f.Z,{bg:Cs,borderColor:Ps,borderWidth:"1px",children:(0,ms.jsx)(w.b,{children:(0,ms.jsxs)(C.r,{children:[(0,ms.jsx)(P.v,{color:Us,children:"Total Users"}),(0,ms.jsx)(A.k,{color:zs,children:_s.total}),(0,ms.jsxs)(z.h,{color:Is,children:[(0,ms.jsx)(g.I,{as:ls.x$1,mr:1}),"All registered users"]})]})})}),(0,ms.jsx)(f.Z,{bg:Cs,borderColor:Ps,borderWidth:"1px",children:(0,ms.jsx)(w.b,{children:(0,ms.jsxs)(C.r,{children:[(0,ms.jsx)(P.v,{color:Us,children:"Password Admins"}),(0,ms.jsx)(A.k,{color:As,children:_s.admins}),(0,ms.jsxs)(z.h,{color:Is,children:[(0,ms.jsx)(g.I,{as:ls.SMR,mr:1}),"Can issue passwords"]})]})})}),(0,ms.jsx)(f.Z,{bg:Cs,borderColor:Ps,borderWidth:"1px",children:(0,ms.jsx)(w.b,{children:(0,ms.jsxs)(C.r,{children:[(0,ms.jsx)(P.v,{color:Us,children:"Password Users"}),(0,ms.jsx)(A.k,{color:Ds,children:_s.users}),(0,ms.jsxs)(z.h,{color:Is,children:[(0,ms.jsx)(g.I,{as:ls.pXu,mr:1}),"Can view passwords"]})]})})}),(0,ms.jsx)(f.Z,{bg:Cs,borderColor:Ps,borderWidth:"1px",children:(0,ms.jsx)(w.b,{children:(0,ms.jsxs)(C.r,{children:[(0,ms.jsx)(P.v,{color:Us,children:"No Access"}),(0,ms.jsx)(A.k,{color:ys,children:_s.total-_s.admins-_s.users}),(0,ms.jsxs)(z.h,{color:Is,children:[(0,ms.jsx)(g.I,{as:ls.YXz,mr:1}),"Need permissions"]})]})})})]}),(0,ms.jsx)(f.Z,{bg:Cs,borderColor:Ps,borderWidth:"1px",children:(0,ms.jsx)(w.b,{children:(0,ms.jsxs)(I.t,{colorScheme:"blue",children:[(0,ms.jsxs)(U.w,{children:[(0,ms.jsx)(E.o,{color:zs,children:"User Permissions"}),(0,ms.jsx)(E.o,{color:zs,children:"Role Definitions"})]}),(0,ms.jsxs)(k.T,{children:[(0,ms.jsxs)(y.K,{children:[(0,ms.jsxs)(m.z,{spacing:4,mb:6,children:[(0,ms.jsxs)(D.M,{flex:1,children:[(0,ms.jsx)(T.W,{children:(0,ms.jsx)(es.W,{color:Us})}),(0,ms.jsx)(W.p,{placeholder:"Search users by name or email...",value:r,onChange:s=>i(s.target.value),bg:"light"===e?"white":"rgba(0, 0, 0, 0.2)",border:"1px solid",borderColor:Ps,color:zs,_placeholder:{color:Us}})]}),(0,ms.jsxs)(N.l,{w:"200px",value:d,onChange:s=>ns(s.target.value),bg:"light"===e?"white":"rgba(0, 0, 0, 0.2)",border:"1px solid",borderColor:Ps,color:zs,children:[(0,ms.jsx)("option",{value:"all",children:"All Users"}),(0,ms.jsx)("option",{value:"admin",children:"Password Admins"}),(0,ms.jsx)("option",{value:"user",children:"Password Users Only"}),(0,ms.jsx)("option",{value:"none",children:"No Permissions"})]}),Ms.length>0&&(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(S.$,{size:"sm",variant:"outline",onClick:()=>{bs(Ms.map(s=>s.id))},children:"Select All"}),(0,ms.jsx)(S.$,{size:"sm",variant:"outline",onClick:()=>{bs([])},children:"Deselect All"})]})]}),(0,ms.jsxs)(x.a,{overflowX:"auto",children:[(0,ms.jsxs)(R.X,{variant:"simple",children:[(0,ms.jsx)(_.d,{children:(0,ms.jsxs)(M.Tr,{children:[(0,ms.jsx)(O.Th,{color:Us,children:"Select"}),(0,ms.jsx)(O.Th,{color:Us,children:"User"}),(0,ms.jsx)(O.Th,{color:Us,children:"Contact"}),(0,ms.jsx)(O.Th,{color:Us,children:"Current Role"}),(0,ms.jsx)(O.Th,{color:Us,children:"Password Admin"}),(0,ms.jsx)(O.Th,{color:Us,children:"Password User"}),(0,ms.jsx)(O.Th,{color:Us,children:"Last Updated"})]})}),(0,ms.jsx)($.N,{children:Ms.map(s=>{var e,r,i;return(0,ms.jsxs)(M.Tr,{children:[(0,ms.jsx)(X.Td,{children:(0,ms.jsx)(Z.S,{isChecked:os.includes(s.id),onChange:e=>{e.target.checked?bs([...os,s.id]):bs(os.filter(e=>e!==s.id))}})}),(0,ms.jsx)(X.Td,{children:(0,ms.jsxs)(m.z,{spacing:3,children:[(0,ms.jsx)(V.e,{size:"sm",name:"".concat(s.fName," ").concat(s.lName),bg:As}),(0,ms.jsxs)(u.T,{align:"start",spacing:0,children:[(0,ms.jsxs)(b.E,{color:zs,fontWeight:"medium",children:[s.fName," ",s.lName]}),(0,ms.jsxs)(b.E,{color:Us,fontSize:"xs",children:["ID: ",s.id.slice(-6)]})]})]})}),(0,ms.jsx)(X.Td,{children:(0,ms.jsxs)(u.T,{align:"start",spacing:0,children:[(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:s.email}),(0,ms.jsx)(b.E,{color:Us,fontSize:"xs",children:s.phoneNumber})]})}),(0,ms.jsx)(X.Td,{children:(i=s.permissions||[],i?i.includes("PASSWORD_ADMIN")?(0,ms.jsx)(h.E,{colorScheme:"purple",fontSize:"xs",children:"Admin"}):i.includes("PASSWORD_USER")?(0,ms.jsx)(h.E,{colorScheme:"blue",fontSize:"xs",children:"User"}):(0,ms.jsx)(h.E,{colorScheme:"gray",fontSize:"xs",children:"None"}):(0,ms.jsx)(h.E,{colorScheme:"gray",fontSize:"xs",children:"None"}))}),(0,ms.jsx)(X.Td,{children:(0,ms.jsx)(F.d,{isChecked:(null===(e=s.permissions)||void 0===e?void 0:e.includes(us.Pp.PasswordAdmin))||!1,onChange:()=>{var e;return Os(s.id,"PASSWORD_ADMIN",(null===(e=s.permissions)||void 0===e?void 0:e.includes(us.Pp.PasswordAdmin))||!1)},colorScheme:"purple"})}),(0,ms.jsx)(X.Td,{children:(0,ms.jsx)(F.d,{isChecked:(null===(r=s.permissions)||void 0===r?void 0:r.includes(us.Pp.PasswordUser))||!1,onChange:()=>{var e;return Os(s.id,"PASSWORD_USER",(null===(e=s.permissions)||void 0===e?void 0:e.includes(us.Pp.PasswordUser))||!1)},colorScheme:"blue"})}),(0,ms.jsx)(X.Td,{children:(0,ms.jsx)(b.E,{color:Us,fontSize:"xs",children:(0,xs.GP)(new Date(s.updatedAt),"MMM dd, yyyy")})})]},s.id)})})]}),0===Ms.length&&(0,ms.jsx)(x.a,{py:8,textAlign:"center",children:(0,ms.jsx)(b.E,{color:Us,children:"No users found matching your criteria"})})]})]}),(0,ms.jsx)(y.K,{children:(0,ms.jsxs)(u.T,{spacing:6,align:"stretch",children:[(0,ms.jsx)(f.Z,{bg:"rgba(0, 0, 0, 0.2)",borderColor:Ps,borderWidth:"1px",children:(0,ms.jsxs)(w.b,{children:[(0,ms.jsxs)(m.z,{spacing:4,mb:4,children:[(0,ms.jsx)(g.I,{as:ls.e7y,boxSize:8,color:As}),(0,ms.jsxs)(u.T,{align:"start",spacing:1,flex:1,children:[(0,ms.jsx)(p.D,{size:"md",color:zs,children:"Password Admin"}),(0,ms.jsx)(h.E,{colorScheme:"purple",children:"PASSWORD_ADMIN"})]})]}),(0,ms.jsx)(b.E,{color:Is,mb:4,children:"Full access to password management system with the ability to create, edit, and share passwords."}),(0,ms.jsxs)(u.T,{align:"start",spacing:2,children:[(0,ms.jsx)(b.E,{color:zs,fontWeight:"semibold",children:"Permissions:"}),(0,ms.jsxs)(u.T,{align:"start",spacing:1,pl:4,children:[(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Create new passwords"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Edit all passwords"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Share passwords with clients"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"View access logs"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Manage permissions"})]})]})]})]})}),(0,ms.jsx)(f.Z,{bg:"rgba(0, 0, 0, 0.2)",borderColor:Ps,borderWidth:"1px",children:(0,ms.jsxs)(w.b,{children:[(0,ms.jsxs)(m.z,{spacing:4,mb:4,children:[(0,ms.jsx)(g.I,{as:ls.myF,boxSize:8,color:Ds}),(0,ms.jsxs)(u.T,{align:"start",spacing:1,flex:1,children:[(0,ms.jsx)(p.D,{size:"md",color:zs,children:"Password User"}),(0,ms.jsx)(h.E,{colorScheme:"blue",children:"PASSWORD_USER"})]})]}),(0,ms.jsx)(b.E,{color:Is,mb:4,children:"Limited access to view passwords that have been shared with them or issued to them."}),(0,ms.jsxs)(u.T,{align:"start",spacing:2,children:[(0,ms.jsx)(b.E,{color:zs,fontWeight:"semibold",children:"Permissions:"}),(0,ms.jsxs)(u.T,{align:"start",spacing:1,pl:4,children:[(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:is,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"View passwords issued to them"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:is,color:Es}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Access shared passwords via link"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:ks}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Cannot create passwords"})]}),(0,ms.jsxs)(m.z,{children:[(0,ms.jsx)(g.I,{as:rs.X,color:ks}),(0,ms.jsx)(b.E,{color:Is,fontSize:"sm",children:"Cannot edit passwords"})]})]})]})]})})]})})]})]})})})]})}),(0,ms.jsxs)(G.aF,{isOpen:Ss,onClose:fs,size:"lg",children:[(0,ms.jsx)(L.m,{}),(0,ms.jsxs)(B.$,{bg:Cs,borderColor:Ps,borderWidth:"1px",children:[(0,ms.jsx)(H.r,{color:zs,children:"Bulk Update Permissions"}),(0,ms.jsx)(K.s,{color:Us}),(0,ms.jsx)(J.c,{children:(0,ms.jsxs)(u.T,{spacing:4,align:"stretch",children:[(0,ms.jsxs)(Y.F,{status:"info",children:[(0,ms.jsx)(q._,{}),(0,ms.jsxs)(b.E,{fontSize:"sm",children:["You have selected ",os.length," user(s) to update."]})]}),(0,ms.jsx)(b.E,{color:Is,children:"Choose the permissions you want to grant or revoke for the selected users:"}),(0,ms.jsxs)(u.T,{spacing:3,align:"stretch",children:[(0,ms.jsx)(S.$,{leftIcon:(0,ms.jsx)(g.I,{as:ls.e7y}),colorScheme:"purple",variant:"outline",onClick:()=>$s("PASSWORD_ADMIN",!0),children:"Grant Password Admin"}),(0,ms.jsx)(S.$,{leftIcon:(0,ms.jsx)(g.I,{as:ls.e7y}),colorScheme:"red",variant:"outline",onClick:()=>$s("PASSWORD_ADMIN",!1),children:"Revoke Password Admin"}),(0,ms.jsx)(Q.c,{}),(0,ms.jsx)(S.$,{leftIcon:(0,ms.jsx)(g.I,{as:ls.myF}),colorScheme:"blue",variant:"outline",onClick:()=>$s("PASSWORD_USER",!0),children:"Grant Password User"}),(0,ms.jsx)(S.$,{leftIcon:(0,ms.jsx)(g.I,{as:ls.myF}),colorScheme:"red",variant:"outline",onClick:()=>$s("PASSWORD_USER",!1),children:"Revoke Password User"})]})]})}),(0,ms.jsx)(ss.j,{children:(0,ms.jsx)(S.$,{variant:"ghost",mr:3,onClick:fs,color:Is,children:"Cancel"})})]})]}),(0,ms.jsx)(ts.n,{})]})}}}]);
//# sourceMappingURL=5959.69cbc077.chunk.js.map