"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[1215],{71215:(e,s,r)=>{r.r(s),r.d(s,{default:()=>T});var a,t=r(89379),o=r(57528),n=r(65043),l=r(87139),i=r(22107),c=r(98662),d=r(42703),h=r(44093),p=r(98939),u=r(82459),g=r(73225),m=r(76668),x=r(35699),j=r(96148),f=r(10202),v=r(19077),y=r(30502),b=r(28846),C=r(39081),S=r(1009),P=r(73216),z=r(31881),M=r(70459),k=r(39985),w=r(63295),I=r(52003),D=r(95214),E=r(76879),A=r(70579);const J=(0,M.J1)(a||(a=(0,o.A)(["\n  mutation CreateProposal($input: CreateProposalInput!) {\n    createProposal(input: $input) {\n      id\n      companyName\n      slug\n      title\n      status\n    }\n  }\n"]))),T=()=>{const e=(0,P.Zp)(),s=(0,y.d)(),{colorMode:r}=(0,h.G6)(),[a,o]=(0,n.useState)(""),[M,T]=(0,n.useState)(""),[N,R]=(0,n.useState)(""),[G,O]=(0,n.useState)(""),[_,L]=(0,n.useState)(""),[U,$]=(0,n.useState)(""),[q,B]=(0,n.useState)(""),[W,F]=(0,n.useState)([]),[H,K]=(0,n.useState)(""),[Q,{loading:Z}]=(0,z.n)(J),V=(0,k.oU)("background.main",r),X="light"===r?"white":"gray.800",Y=(0,k.oU)("light"===r?"text.primary":"text.primaryDark",r),ee=(0,k.oU)("light"===r?"text.secondary":"text.secondaryDark",r),se=(e,s,r)=>{const a=[...W];a[e]=(0,t.A)((0,t.A)({},a[e]),{},{[s]:r}),F(a)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(I.m,{}),(0,A.jsx)(i.a,{bg:V,minH:"100vh",py:10,children:(0,A.jsxs)(p.m,{maxW:"container.lg",children:[(0,A.jsx)(D.y,{moduleConfig:E.default}),(0,A.jsxs)(f.T,{spacing:8,align:"stretch",children:[(0,A.jsxs)(f.T,{align:"start",spacing:1,children:[(0,A.jsx)(b.D,{size:"xl",color:Y,children:"Create New Proposal"}),(0,A.jsx)(C.E,{color:ee,children:"Create a proposal with agreement and signature tracking"})]}),(0,A.jsx)(i.a,{bg:X,p:8,borderRadius:"lg",shadow:"md",children:(0,A.jsxs)(f.T,{spacing:6,align:"stretch",children:[(0,A.jsxs)(g.MJ,{isRequired:!0,children:[(0,A.jsx)(m.l,{color:Y,children:"Company Name"}),(0,A.jsx)(x.p,{value:a,onChange:e=>(e=>{o(e);const s=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");T(s)})(e.target.value),placeholder:"e.g., One Group Australasia"})]}),(0,A.jsxs)(g.MJ,{isRequired:!0,children:[(0,A.jsx)(m.l,{color:Y,children:"URL Slug"}),(0,A.jsx)(x.p,{value:M,onChange:e=>T(e.target.value),placeholder:"e.g., onegroup"}),(0,A.jsxs)(C.E,{fontSize:"sm",color:ee,mt:1,children:["Proposal will be accessible at: /proposals/",M]})]}),(0,A.jsxs)(g.MJ,{isRequired:!0,children:[(0,A.jsx)(m.l,{color:Y,children:"Proposal Title"}),(0,A.jsx)(x.p,{value:N,onChange:e=>R(e.target.value),placeholder:"e.g., Website Development & Managed IT Agreement"})]}),(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{color:Y,children:"Custom Offer Page Path (Optional)"}),(0,A.jsx)(x.p,{value:_,onChange:e=>L(e.target.value),placeholder:"e.g., /offers/onegroup"}),(0,A.jsx)(C.E,{fontSize:"sm",color:ee,mt:1,children:"If you have a custom branded offer page, enter its path here (e.g., /offers/onegroup)"})]}),(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{color:Y,children:"Project ID (Optional)"}),(0,A.jsx)(x.p,{value:U,onChange:e=>$(e.target.value),placeholder:"e.g., 6234f234a234b234c234d234"}),(0,A.jsx)(C.E,{fontSize:"sm",color:ee,mt:1,children:"Link this proposal to an existing project"})]}),(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{color:Y,children:"Draft Bill ID (Optional)"}),(0,A.jsx)(x.p,{value:q,onChange:e=>B(e.target.value),placeholder:"e.g., 6234f234a234b234c234d234"}),(0,A.jsx)(C.E,{fontSize:"sm",color:ee,mt:1,children:"Draft bill to be paid upon signing"})]}),(0,A.jsx)(u.c,{}),(0,A.jsxs)(i.a,{children:[(0,A.jsxs)(j.z,{justify:"space-between",mb:4,children:[(0,A.jsxs)(i.a,{children:[(0,A.jsx)(b.D,{size:"md",color:Y,children:"Scheduled Payments"}),(0,A.jsx)(C.E,{fontSize:"sm",color:ee,mt:1,children:"Create a payment schedule with milestones"})]}),(0,A.jsx)(c.$,{leftIcon:(0,A.jsx)(S.GGD,{}),size:"sm",onClick:()=>{F([...W,{billId:"",daysAfterPrevious:void 0,description:""}])},colorScheme:"blue",children:"Add Payment"})]}),0===W.length?(0,A.jsx)(i.a,{p:6,textAlign:"center",borderWidth:1,borderRadius:"md",borderStyle:"dashed",color:ee,children:(0,A.jsx)(C.E,{children:'No scheduled payments yet. Click "Add Payment" to create a milestone.'})}):(0,A.jsx)(f.T,{spacing:4,align:"stretch",children:W.map((e,s)=>(0,A.jsxs)(i.a,{p:4,borderWidth:1,borderRadius:"md",bg:"light"===r?"gray.50":"gray.700",children:[(0,A.jsxs)(j.z,{justify:"space-between",mb:3,children:[(0,A.jsxs)(l.E,{colorScheme:"blue",children:["Payment ",s+1]}),(0,A.jsx)(d.K,{"aria-label":"Remove payment",icon:(0,A.jsx)(S.yGN,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>(e=>{F(W.filter((s,r)=>r!==e))})(s)})]}),(0,A.jsxs)(f.T,{spacing:3,align:"stretch",children:[(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{fontSize:"sm",color:Y,children:"Bill ID"}),(0,A.jsx)(x.p,{size:"sm",value:e.billId||"",onChange:e=>se(s,"billId",e.target.value),placeholder:"e.g., 6234f234a234b234c234d234"})]}),(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{fontSize:"sm",color:Y,children:"Days After Previous Payment"}),(0,A.jsx)(x.p,{size:"sm",type:"number",value:e.daysAfterPrevious||"",onChange:e=>se(s,"daysAfterPrevious",e.target.value?parseInt(e.target.value):void 0),placeholder:0===s?"Days after signing (e.g., 0, 7, 14)":"Days after previous payment"}),(0,A.jsx)(C.E,{fontSize:"xs",color:ee,mt:1,children:0===s?"Days after proposal is signed":"Days after the previous payment is completed"})]}),(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{fontSize:"sm",color:Y,children:"Description"}),(0,A.jsx)(x.p,{size:"sm",value:e.description||"",onChange:e=>se(s,"description",e.target.value),placeholder:"e.g., Milestone 1: Core Pages & Infrastructure"})]})]})]},s))})]}),(0,A.jsx)(u.c,{}),(0,A.jsxs)(g.MJ,{isRequired:!0,children:[(0,A.jsx)(m.l,{color:Y,children:"Agreement (Markdown)"}),(0,A.jsx)(v.T,{value:G,onChange:e=>O(e.target.value),placeholder:"# AGREEMENT ## Terms and Conditions\n...",rows:10,fontFamily:"monospace"}),(0,A.jsx)(C.E,{fontSize:"sm",color:ee,mt:1,children:"Write your agreement in Markdown format"})]}),(0,A.jsx)(u.c,{}),(0,A.jsxs)(g.MJ,{children:[(0,A.jsx)(m.l,{color:Y,children:"Internal Notes (Optional)"}),(0,A.jsx)(v.T,{value:H,onChange:e=>K(e.target.value),placeholder:"Internal notes about this proposal...",rows:3})]}),(0,A.jsxs)(j.z,{justify:"flex-end",spacing:4,children:[(0,A.jsx)(c.$,{variant:"outline",onClick:()=>e("/proposals"),children:"Cancel"}),(0,A.jsx)(c.$,{leftIcon:(0,A.jsx)(S.Bc_,{}),colorScheme:"blue",onClick:async()=>{if(console.log("\ud83d\udd35 SUBMIT - Starting validation"),console.log("\ud83d\udcdd Form data:",{companyName:a,slug:M,title:N,agreementMarkdownLength:G.length,customPagePath:_,notes:H}),!a||!M||!N||!G)return void s({title:"Missing fields",description:"Please fill in all required fields",status:"error",duration:3e3});const r={companyName:a,slug:M,title:N,agreementMarkdown:G,customPagePath:_||void 0,projectId:U||void 0,draftBillId:q||void 0,scheduledPayments:W.length>0?W:void 0,notes:H||void 0};console.log("\ud83d\ude80 Sending to GraphQL:",JSON.stringify(r,null,2));try{const{data:a}=await Q({variables:{input:r}});s({title:"Proposal created!",description:'Proposal "'.concat(a.createProposal.companyName,'" has been created'),status:"success",duration:5e3}),e("/proposals")}catch(t){s({title:"Error creating proposal",description:t instanceof Error?t.message:"Unknown error occurred",status:"error",duration:5e3})}},isLoading:Z,children:"Create Proposal"})]})]})})]})]})}),(0,A.jsx)(w.n,{})]})}}}]);
//# sourceMappingURL=1215.b81f0f55.chunk.js.map