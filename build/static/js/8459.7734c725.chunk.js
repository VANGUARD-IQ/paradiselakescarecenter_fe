"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[8459],{78459:(e,n,t)=>{t.r(n),t.d(n,{default:()=>te});var s,i,r=t(57528),a=t(65043),d=t(96870),l=t(87139),o=t(22107),c=t(98662),h=t(42703),p=t(83169),x=t(24330),u=t(26201),g=t(44093),j=t(82459),m=t(25011),E=t(7189),T=t(67516),b=t(35929),S=t(56529),f=t(15071),C=t(11054),y=t(78460),I=t(25722),D=t(57371),k=t(61724),v=t(96148),U=t(10202),N=t(80511),P=t(82595),R=t(67813),z=t(83201),w=t(3313),A=t(55395),O=t(19077),F=t(30502),M=t(28846),G=t(39081),_=t(31881),B=t(10585),L=t(70459),W=t(73216),$=t(1009),H=t(64379),Y=t(39985),Z=t(63295),K=t(52003),X=t(70579);const J=(0,L.J1)(s||(s=(0,r.A)(["\n  query GetFrontendUpgrade($id: ID!) {\n    frontendUpgrade(id: $id) {\n      id\n      title\n      description\n      gitCommitUrls\n      category\n      originTenantName\n      markdownDocumentation\n      createdDate\n      lastModified\n      createdBy\n      completedCount\n      totalTenantCount\n      isPendingForMaster\n      appliedToTenants {\n        tenantId\n        tenantName\n        status\n        appliedDate\n        appliedBy\n        notes\n      }\n    }\n  }\n"]))),q=(0,L.J1)(i||(i=(0,r.A)(["\n  mutation MarkUpgradeApplied($input: MarkUpgradeAppliedInput!) {\n    markUpgradeApplied(input: $input) {\n      id\n      appliedToTenants {\n        tenantId\n        tenantName\n        status\n        appliedDate\n        appliedBy\n        notes\n      }\n    }\n  }\n"]))),V={UI_ENHANCEMENT:"purple",BUG_FIX:"red",PERFORMANCE:"green",SECURITY:"orange",FEATURE:"blue",REFACTOR:"teal",ACCESSIBILITY:"pink",OTHER:"gray"},Q={UI_ENHANCEMENT:"UI Enhancement",BUG_FIX:"Bug Fix",PERFORMANCE:"Performance",SECURITY:"Security",FEATURE:"Feature",REFACTOR:"Refactor",ACCESSIBILITY:"Accessibility",OTHER:"Other"},ee={PENDING:"gray",IN_PROGRESS:"blue",COMPLETED:"green",SKIPPED:"orange"},ne={PENDING:$.Ohp,IN_PROGRESS:$.SG1,COMPLETED:$.YrT,SKIPPED:$.yGN},te=()=>{var e;const{colorMode:n}=(0,g.G6)(),{id:t}=(0,W.g)(),s=(0,W.Zp)(),i=(0,F.d)(),{isOpen:r,onOpen:L,onClose:te}=(0,d.j)(),[se,ie]=(0,a.useState)(""),[re,ae]=(0,a.useState)(""),[de,le]=(0,a.useState)(""),{data:oe,loading:ce,refetch:he}=(0,B.IT)(J,{variables:{id:t},skip:!t}),[pe,{loading:xe}]=(0,_.n)(q,{onCompleted:()=>{i({title:"Status Updated",description:"Successfully updated upgrade status for tenant",status:"success",duration:3e3,isClosable:!0}),he(),te(),ie(""),ae(""),le("")},onError:e=>{i({title:"Error",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),ue=null===oe||void 0===oe?void 0:oe.frontendUpgrade;if(ce)return(0,X.jsx)(o.a,{p:6,children:(0,X.jsx)(G.E,{children:"Loading upgrade details..."})});if(!ue)return(0,X.jsx)(o.a,{p:6,children:(0,X.jsx)(G.E,{children:"Upgrade not found"})});const ge=ue.completedCount/ue.totalTenantCount*100;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(K.m,{}),(0,X.jsxs)(o.a,{p:6,children:[(0,X.jsxs)(U.T,{spacing:6,align:"stretch",maxW:"1200px",mx:"auto",children:[(0,X.jsxs)(v.z,{justify:"space-between",children:[(0,X.jsxs)(v.z,{children:[(0,X.jsx)(h.K,{"aria-label":"Go back",icon:(0,X.jsx)($.kRp,{}),onClick:()=>s("/frontend-upgrades"),variant:"ghost"}),(0,X.jsx)(M.D,{size:"lg",children:ue.title})]}),(0,X.jsx)(c.$,{size:"sm",variant:"ghost",onClick:()=>s("/frontend-upgrades/".concat(t,"/edit")),children:"Edit"})]}),(0,X.jsx)(p.Z,{bg:"light"===n?"white":(0,Y.oU)("background.darkSurface",n),children:(0,X.jsx)(x.b,{children:(0,X.jsxs)(U.T,{spacing:4,align:"stretch",children:[(0,X.jsxs)(v.z,{spacing:2,children:[(0,X.jsx)(l.E,{colorScheme:V[ue.category],children:Q[ue.category]}),ue.isPendingForMaster&&(0,X.jsx)(l.E,{colorScheme:"orange",children:"Master Pending"})]}),(0,X.jsx)(G.E,{children:ue.description}),(0,X.jsx)(j.c,{}),(0,X.jsxs)(v.z,{spacing:8,children:[(0,X.jsxs)(o.a,{children:[(0,X.jsx)(G.E,{fontSize:"sm",color:"light"===n?"gray.600":"gray.400",children:"Origin"}),(0,X.jsx)(G.E,{fontWeight:"semibold",children:ue.originTenantName})]}),(0,X.jsxs)(o.a,{children:[(0,X.jsx)(G.E,{fontSize:"sm",color:"light"===n?"gray.600":"gray.400",children:"Created"}),(0,X.jsx)(G.E,{fontWeight:"semibold",children:new Date(ue.createdDate).toLocaleDateString()})]}),ue.createdBy&&(0,X.jsxs)(o.a,{children:[(0,X.jsx)(G.E,{fontSize:"sm",color:"light"===n?"gray.600":"gray.400",children:"Created By"}),(0,X.jsx)(G.E,{fontWeight:"semibold",children:ue.createdBy})]})]}),(0,X.jsxs)(o.a,{children:[(0,X.jsxs)(v.z,{justify:"space-between",mb:2,children:[(0,X.jsxs)(G.E,{fontSize:"sm",fontWeight:"semibold",children:["Progress: ",ue.completedCount," of ",ue.totalTenantCount," sites"]}),(0,X.jsxs)(G.E,{fontSize:"sm",color:"light"===n?"gray.600":"gray.400",children:[Math.round(ge),"%"]})]}),(0,X.jsx)(D.k,{value:ge,colorScheme:100===ge?"green":"blue",size:"sm",borderRadius:"full"})]})]})})}),(0,X.jsxs)(p.Z,{bg:"light"===n?"white":(0,Y.oU)("background.darkSurface",n),children:[(0,X.jsx)(u.a,{children:(0,X.jsx)(M.D,{size:"md",children:"Git Commits"})}),(0,X.jsx)(x.b,{pt:0,children:(0,X.jsx)(U.T,{align:"stretch",spacing:2,children:ue.gitCommitUrls.map((e,n)=>(0,X.jsxs)(v.z,{children:[(0,X.jsxs)(G.E,{fontSize:"sm",fontWeight:"semibold",children:["#",n+1]}),(0,X.jsxs)(E.N,{href:e,isExternal:!0,color:"blue.500",fontSize:"sm",children:[e," ",(0,X.jsx)(m.I,{as:$.HaR,ml:1})]})]},n))})})]}),ue.markdownDocumentation&&(0,X.jsxs)(p.Z,{bg:"light"===n?"white":(0,Y.oU)("background.darkSurface",n),children:[(0,X.jsx)(u.a,{children:(0,X.jsx)(M.D,{size:"md",children:"Documentation"})}),(0,X.jsx)(x.b,{pt:0,children:(0,X.jsx)(o.a,{p:4,border:"1px solid",borderColor:"light"===n?"gray.200":"gray.600",borderRadius:"md",children:(0,X.jsx)(H.oz,{children:ue.markdownDocumentation})})})]}),(0,X.jsxs)(p.Z,{bg:"light"===n?"white":(0,Y.oU)("background.darkSurface",n),children:[(0,X.jsx)(u.a,{children:(0,X.jsx)(M.D,{size:"md",children:"Deployment Status by Tenant"})}),(0,X.jsx)(x.b,{pt:0,children:(0,X.jsx)(o.a,{overflowX:"auto",children:(0,X.jsxs)(N.X,{variant:"simple",children:[(0,X.jsx)(w.d,{children:(0,X.jsxs)(A.Tr,{children:[(0,X.jsx)(z.Th,{children:"Tenant"}),(0,X.jsx)(z.Th,{children:"Status"}),(0,X.jsx)(z.Th,{children:"Applied Date"}),(0,X.jsx)(z.Th,{children:"Applied By"}),(0,X.jsx)(z.Th,{children:"Notes"}),(0,X.jsx)(z.Th,{children:"Actions"})]})}),(0,X.jsx)(P.N,{children:ue.appliedToTenants.map(e=>(0,X.jsxs)(A.Tr,{children:[(0,X.jsx)(R.Td,{fontWeight:"semibold",children:e.tenantName}),(0,X.jsx)(R.Td,{children:(0,X.jsxs)(l.E,{colorScheme:ee[e.status],display:"flex",alignItems:"center",gap:1,w:"fit-content",children:[(0,X.jsx)(m.I,{as:ne[e.status]}),e.status]})}),(0,X.jsx)(R.Td,{children:e.appliedDate?new Date(e.appliedDate).toLocaleDateString():"-"}),(0,X.jsx)(R.Td,{children:e.appliedBy||"-"}),(0,X.jsx)(R.Td,{maxW:"200px",isTruncated:!0,children:e.notes||"-"}),(0,X.jsx)(R.Td,{children:(0,X.jsx)(c.$,{size:"sm",onClick:()=>{return n=e.tenantId,t=e.status,s=e.notes,ie(n),ae(t),le(s||""),void L();var n,t,s},children:"Update"})})]},e.tenantId))})]})})})]})]}),(0,X.jsxs)(y.aF,{isOpen:r,onClose:te,children:[(0,X.jsx)(C.m,{}),(0,X.jsxs)(I.$,{children:[(0,X.jsx)(f.r,{children:"Update Status"}),(0,X.jsx)(b.s,{}),(0,X.jsx)(T.c,{children:(0,X.jsxs)(U.T,{spacing:4,align:"stretch",children:[(0,X.jsx)(G.E,{fontWeight:"semibold",children:null===(e=ue.appliedToTenants.find(e=>e.tenantId===se))||void 0===e?void 0:e.tenantName}),(0,X.jsxs)(k.l,{value:re,onChange:e=>ae(e.target.value),children:[(0,X.jsx)("option",{value:"",children:"Select Status"}),(0,X.jsx)("option",{value:"PENDING",children:"Pending"}),(0,X.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,X.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,X.jsx)("option",{value:"SKIPPED",children:"Skipped"})]}),(0,X.jsx)(O.T,{value:de,onChange:e=>le(e.target.value),placeholder:"Optional notes about this status update...",rows:3})]})}),(0,X.jsxs)(S.j,{children:[(0,X.jsx)(c.$,{variant:"ghost",mr:3,onClick:te,children:"Cancel"}),(0,X.jsx)(c.$,{bg:(0,Y.oU)("secondary",n),color:"white",onClick:async()=>{re?await pe({variables:{input:{upgradeId:t,tenantId:se,status:re,notes:de||void 0}}}):i({title:"Validation Error",description:"Please select a status",status:"warning",duration:3e3,isClosable:!0})},isLoading:xe,_hover:{bg:(0,Y.oU)("secondaryHover",n)},children:"Update Status"})]})]})]})]}),(0,X.jsx)(Z.n,{})]})}}}]);
//# sourceMappingURL=8459.7734c725.chunk.js.map