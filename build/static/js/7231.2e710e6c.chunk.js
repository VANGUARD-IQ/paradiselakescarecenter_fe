"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[7231],{97231:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Ee});var s,r,i,t=o(89379),c=o(57528),a=o(65043),l=o(96870),d=o(27024),x=o(87139),h=o(22107),p=o(98662),j=o(42703),b=o(83169),m=o(24330),u=o(26201),g=o(44093),f=o(98939),w=o(5371),E=o(73225),v=o(76668),y=o(73212),C=o(33572),A=o(35699),D=o(7189),S=o(67516),z=o(35929),N=o(56529),k=o(15071),T=o(11054),R=o(78460),I=o(25722),M=o(44860),L=o(61724),O=o(76659),_=o(96148),F=o(10202),B=o(94217),W=o(94085),$=o(53332),P=o(78149),U=o(14566),q=o(31411),G=o(10227),J=o(51794),Z=o(3109),K=o(48239),Q=o(19077),H=o(30502),X=o(39081),V=o(58861),Y=o(12730),ee=o(58584),ne=o(99973),oe=o(37809),se=o(42128),re=o(98971),ie=o(85369),te=o(73216),ce=o(31881),ae=o(10585),le=o(70459),de=o(29066),xe=o(39985),he=o(52003),pe=o(63295),je=o(95214),be=o(66037),me=o(41737),ue=o(70579);const ge=(0,le.J1)(s||(s=(0,c.A)(["\n  query GetAssetDetails($id: ID!) {\n    asset(id: $id) {\n      id\n      assetId\n      name\n      assetType {\n        id\n        name\n        category\n        icon\n        maintenanceIntervalDays\n      }\n      company {\n        id\n        name\n        address\n        phone\n      }\n      assignedTo {\n        id\n        fName\n        lName\n        email\n        phone\n        profilePhoto\n      }\n      manufacturer\n      model\n      serialNumber\n      purchaseDate\n      purchasePrice\n      supplier\n      warrantyExpiry\n      status\n      condition\n      location {\n        building\n        floor\n        room\n        section\n        coordinates\n      }\n      description\n      photos\n      qrCode\n      publicUrl\n      barcode\n      lastMaintenanceDate\n      nextMaintenanceDate\n      maintenanceNotes\n      tags\n      customFields\n      createdAt\n      updatedAt\n      logCount\n    }\n    assetLogs(assetId: $id) {\n      id\n      assetId\n      createdBy {\n        id\n        fName\n        lName\n        profilePhoto\n      }\n      action\n      description\n      photos\n      conditionBefore\n      conditionAfter\n      cost\n      notes\n      timestamp\n      nextActionDate\n    }\n  }\n"]))),fe=(0,le.J1)(r||(r=(0,c.A)(["\n  mutation AddAssetLog($input: AssetLogInput!) {\n    addAssetLog(input: $input) {\n      id\n      action\n      description\n      timestamp\n    }\n  }\n"]))),we=(0,le.J1)(i||(i=(0,c.A)(["\n  mutation DeleteAsset($id: ID!) {\n    deleteAsset(id: $id)\n  }\n"]))),Ee=()=>{var e,n;(0,be.H)("Asset Details");const o=(0,te.Zp)(),{id:s}=(0,te.g)(),r=(0,H.d)(),{user:i}=(0,de.A)(),{colorMode:c}=(0,g.G6)(),le=e=>!(null===i||void 0===i||!i.permissions)&&e.some(e=>{var n;return null===(n=i.permissions)||void 0===n?void 0:n.includes(e)}),Ee=(0,a.useRef)(null),ve=(0,xe.oU)("background.main",c),ye=(0,xe.oU)("background.cardGradient",c),Ce=(0,xe.oU)("border.darkCard",c),Ae=(0,xe.oU)("light"===c?"text.primary":"text.primaryDark",c),De=(0,xe.oU)("light"===c?"text.secondary":"text.secondaryDark",c),Se=(0,xe.oU)("light"===c?"text.muted":"text.mutedDark",c),ze=(0,xe.oU)("primary",c),Ne=(0,xe.oU)("primaryHover",c),ke=(0,xe.oU)("successGreen",c),Te=(0,xe.oU)("status.error",c),{isOpen:Re,onOpen:Ie,onClose:Me}=(0,l.j)(),{isOpen:Le,onOpen:Oe,onClose:_e}=(0,l.j)(),[Fe,Be]=(0,a.useState)({action:"Comment",description:"",conditionBefore:"",conditionAfter:"",cost:0,notes:"",nextActionDate:"",photos:[]}),{loading:We,error:$e,data:Pe,refetch:Ue}=(0,ae.IT)(ge,{variables:{id:s}}),[qe,{loading:Ge}]=(0,ce.n)(fe,{onCompleted:()=>{r({title:"Log entry added",description:"The log entry has been added successfully.",status:"success",duration:3e3,isClosable:!0}),Me(),Ue(),Be({action:"Comment",description:"",conditionBefore:"",conditionAfter:"",cost:0,notes:"",nextActionDate:"",photos:[]})},onError:e=>{r({title:"Error adding log entry",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),[Je]=(0,ce.n)(we,{onCompleted:()=>{r({title:"Asset deleted",description:"The asset has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),o("/assets")},onError:e=>{r({title:"Error deleting asset",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),Ze=async()=>{window.confirm("Are you sure you want to delete this asset? This action cannot be undone.")&&await Je({variables:{id:s}})},Ke=e=>{switch(e){case"NEW":return"teal";case"EXCELLENT":return"green";case"GOOD":return"blue";case"FAIR":return"yellow";case"POOR":return"orange";case"BROKEN":return"red";default:return"gray"}},Qe=e=>{switch(e){case"Created":return"\ud83c\udd95";case"Maintenance":return"\ud83d\udd27";case"Repair":return"\ud83d\udd28";case"Inspection":return"\ud83d\udd0d";case"Comment":return"\ud83d\udcac";case"Status Changed":return"\ud83d\udd04";case"Condition Changed":return"\ud83d\udcca";default:return"\ud83d\udcdd"}},He=()=>{if(!Ee.current)return;const e=window.open("","_blank");if(!e)return;const n=null===Pe||void 0===Pe?void 0:Pe.asset;e.document.write("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Asset QR Code - ".concat(null===n||void 0===n?void 0:n.name,'</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              min-height: 100vh;\n              margin: 0;\n            }\n            .qr-container {\n              text-align: center;\n              padding: 20px;\n              border: 2px solid #000;\n              border-radius: 10px;\n            }\n            .qr-code {\n              margin: 20px 0;\n            }\n            .asset-info {\n              margin: 10px 0;\n            }\n            .asset-id {\n              font-size: 24px;\n              font-weight: bold;\n            }\n            .asset-name {\n              font-size: 18px;\n              margin: 10px 0;\n            }\n            .company {\n              font-size: 14px;\n              color: #666;\n            }\n            @media print {\n              body {\n                margin: 0;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="qr-container">\n            <div class="asset-id">Asset ID: ').concat(null===n||void 0===n?void 0:n.assetId,'</div>\n            <div class="asset-name">').concat(null===n||void 0===n?void 0:n.name,'</div>\n            <div class="qr-code">\n              <img src="').concat(null===n||void 0===n?void 0:n.qrCode,'" alt="QR Code" style="width: 200px; height: 200px;" />\n            </div>\n            ').concat(null!==n&&void 0!==n&&n.company?'<div class="company">'.concat(n.company.name,"</div>"):"",'\n            <div class="asset-info">Scan for details</div>\n          </div>\n          <script>\n            window.onload = function() {\n              window.print();\n              window.onafterprint = function() {\n                window.close();\n              };\n            };\n          <\/script>\n        </body>\n      </html>\n    ')),e.document.close()};if(We)return(0,ue.jsxs)(h.a,{bg:ve,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,ue.jsx)(he.m,{}),(0,ue.jsx)(je.y,{moduleConfig:me.default}),(0,ue.jsx)(f.m,{maxW:"container.xl",px:{base:4,md:8},py:{base:6,md:8},flex:"1",children:(0,ue.jsxs)(F.T,{spacing:6,children:[(0,ue.jsx)(O.y,{size:"xl",color:ze}),(0,ue.jsx)(X.E,{color:Ae,children:"Loading asset details..."})]})}),(0,ue.jsx)(pe.n,{})]});if($e||null===Pe||void 0===Pe||!Pe.asset)return(0,ue.jsxs)(h.a,{bg:ve,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,ue.jsx)(he.m,{}),(0,ue.jsx)(je.y,{moduleConfig:me.default}),(0,ue.jsx)(f.m,{maxW:"container.xl",px:{base:4,md:8},py:{base:6,md:8},flex:"1",children:(0,ue.jsxs)(X.E,{color:Te,children:["Error loading asset: ",(null===$e||void 0===$e?void 0:$e.message)||"Asset not found"]})}),(0,ue.jsx)(pe.n,{})]});const Xe=Pe.asset,Ve=Pe.assetLogs||[];return(0,ue.jsxs)(h.a,{bg:ve,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,ue.jsx)(he.m,{}),(0,ue.jsx)(je.y,{moduleConfig:me.default}),(0,ue.jsx)(f.m,{maxW:"container.xl",px:{base:4,md:8},py:{base:6,md:8},flex:"1",children:(0,ue.jsxs)(F.T,{spacing:6,align:"stretch",children:[(0,ue.jsxs)(w.s,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[(0,ue.jsxs)(_.z,{spacing:4,children:[(0,ue.jsx)(j.K,{icon:(0,ue.jsx)(oe.g,{}),"aria-label":"Back",variant:"ghost",color:Ae,_hover:{bg:ye},onClick:()=>o("/assets")}),(0,ue.jsxs)(h.a,{children:[(0,ue.jsxs)(_.z,{spacing:2,children:[(0,ue.jsxs)(X.E,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:Ae,children:[null===(e=Xe.assetType)||void 0===e?void 0:e.icon," ",Xe.name]}),Xe.qrCode&&(0,ue.jsx)(ie.Acq,{size:20,color:ze})]}),(0,ue.jsxs)(X.E,{color:Se,children:["Asset ID: ",Xe.assetId]})]})]}),(0,ue.jsxs)(F.T,{spacing:2,align:"stretch",display:{base:"flex",md:"none"},children:[(0,ue.jsxs)(_.z,{spacing:2,wrap:"wrap",children:[(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(ie.Acq,{}),onClick:Oe,variant:"outline",borderColor:Ce,color:Ae,_hover:{bg:ye},size:{base:"sm",md:"md"},width:{base:"auto",md:"auto"},children:"View QR"}),(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(ie.n4o,{}),onClick:He,variant:"outline",borderColor:Ce,color:Ae,_hover:{bg:ye},size:{base:"sm",md:"md"},width:{base:"auto",md:"auto"},children:"Print QR"})]}),(0,ue.jsxs)(_.z,{spacing:2,wrap:"wrap",children:[(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(Y.R,{}),onClick:Ie,bg:ze,color:"white",_hover:{bg:Ne},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Add Log"}),(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(ne.q,{}),onClick:()=>o("/assets/edit/".concat(Xe.id)),bg:ke,color:"white",_hover:{bg:"green.600"},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Edit"}),le(["ADMIN","ASSET_MANAGER"])&&(0,ue.jsx)(j.K,{icon:(0,ue.jsx)(ee.d,{}),"aria-label":"Delete",bg:Te,color:"white",_hover:{bg:"red.600"},variant:"solid",onClick:Ze,size:{base:"sm",md:"md"}})]})]}),(0,ue.jsxs)(_.z,{spacing:2,display:{base:"none",md:"flex"},children:[(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(ie.Acq,{}),onClick:Oe,variant:"outline",borderColor:Ce,color:Ae,_hover:{bg:ye},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"View QR"}),(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(ie.n4o,{}),onClick:He,variant:"outline",borderColor:Ce,color:Ae,_hover:{bg:ye},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Print QR"}),(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(Y.R,{}),onClick:Ie,bg:ze,color:"white",_hover:{bg:Ne},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Add Log"}),(0,ue.jsx)(p.$,{leftIcon:(0,ue.jsx)(ne.q,{}),onClick:()=>o("/assets/edit/".concat(Xe.id)),bg:ke,color:"white",_hover:{bg:"green.600"},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Edit"}),le(["ADMIN","ASSET_MANAGER"])&&(0,ue.jsx)(j.K,{icon:(0,ue.jsx)(ee.d,{}),"aria-label":"Delete",bg:Te,color:"white",_hover:{bg:"red.600"},variant:"solid",onClick:Ze,size:{base:"sm",md:"md"}})]})]}),(0,ue.jsxs)(_.z,{spacing:4,children:[(0,ue.jsxs)(x.E,{colorScheme:(e=>{switch(e){case"ACTIVE":return"green";case"IN_MAINTENANCE":return"orange";case"RETIRED":default:return"gray";case"DISPOSED":return"red";case"LOST":return"purple";case"DAMAGED":return"yellow"}})(Xe.status),fontSize:"md",px:3,py:1,children:["Status: ",Xe.status]}),(0,ue.jsxs)(x.E,{colorScheme:Ke(Xe.condition),fontSize:"md",px:3,py:1,children:["Condition: ",Xe.condition]}),Xe.nextMaintenanceDate&&new Date(Xe.nextMaintenanceDate)<=new Date&&(0,ue.jsx)(x.E,{colorScheme:"red",fontSize:"md",px:3,py:1,children:"\u26a0\ufe0f Maintenance Overdue"})]}),(0,ue.jsxs)(Z.t,{children:[(0,ue.jsxs)(q.w,{children:[(0,ue.jsx)(U.o,{children:"Overview"}),(0,ue.jsx)(U.o,{children:"Details"}),(0,ue.jsxs)(U.o,{children:["History (",Ve.length,")"]}),(0,ue.jsx)(U.o,{children:"Maintenance"})]}),(0,ue.jsxs)(J.T,{children:[(0,ue.jsxs)(G.K,{children:[(0,ue.jsxs)(y.r,{columns:{base:1,md:2},spacing:6,children:[(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Basic Information"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(F.T,{align:"stretch",spacing:3,children:[Xe.assetType&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Type:"}),(0,ue.jsx)(X.E,{color:Ae,children:Xe.assetType.name})]}),Xe.manufacturer&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Manufacturer:"}),(0,ue.jsx)(X.E,{color:Ae,children:Xe.manufacturer})]}),Xe.model&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Model:"}),(0,ue.jsx)(X.E,{color:Ae,children:Xe.model})]}),Xe.serialNumber&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Serial Number:"}),(0,ue.jsx)(X.E,{color:Ae,children:Xe.serialNumber})]}),Xe.barcode&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Barcode:"}),(0,ue.jsx)(X.E,{color:Ae,children:Xe.barcode})]})]})})]}),(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Assignment & Location"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(F.T,{align:"stretch",spacing:3,children:[Xe.company&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Company:"}),(0,ue.jsx)(X.E,{fontWeight:"medium",color:Ae,children:Xe.company.name})]}),Xe.assignedTo&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Assigned To:"}),(0,ue.jsxs)(_.z,{spacing:2,mt:1,children:[(0,ue.jsx)(d.e,{size:"sm",name:"".concat(Xe.assignedTo.fName," ").concat(Xe.assignedTo.lName),src:Xe.assignedTo.profilePhoto}),(0,ue.jsxs)(h.a,{children:[(0,ue.jsxs)(X.E,{fontWeight:"medium",color:Ae,children:[Xe.assignedTo.fName," ",Xe.assignedTo.lName]}),(0,ue.jsx)(X.E,{fontSize:"xs",color:De,children:Xe.assignedTo.email})]})]})]}),Xe.location&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Location:"}),(0,ue.jsx)(X.E,{color:Ae,children:[Xe.location.building,Xe.location.floor,Xe.location.room,Xe.location.section].filter(Boolean).join(", ")||"Not specified"})]})]})})]}),(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Purchase Information"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(F.T,{align:"stretch",spacing:3,children:[Xe.purchaseDate&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Purchase Date:"}),(0,ue.jsx)(X.E,{color:Ae,children:new Date(Xe.purchaseDate).toLocaleDateString()})]}),Xe.purchasePrice&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Purchase Price:"}),(0,ue.jsxs)(X.E,{color:Ae,children:["$",Xe.purchasePrice.toFixed(2)]})]}),Xe.supplier&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Supplier:"}),(0,ue.jsx)(X.E,{color:Ae,children:Xe.supplier})]}),Xe.warrantyExpiry&&(0,ue.jsxs)(_.z,{justify:"space-between",direction:{base:"column",md:"row"},align:{base:"start",md:"center"},children:[(0,ue.jsx)(X.E,{color:De,children:"Warranty Expiry:"}),(0,ue.jsx)(X.E,{color:new Date(Xe.warrantyExpiry)<new Date?Te:Ae,children:new Date(Xe.warrantyExpiry).toLocaleDateString()})]})]})})]}),(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Statistics"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(y.r,{columns:2,spacing:4,children:[(0,ue.jsxs)(B.r,{children:[(0,ue.jsx)($.v,{color:De,children:"Log Entries"}),(0,ue.jsx)(P.k,{color:Ae,children:Ve.length})]}),(0,ue.jsxs)(B.r,{children:[(0,ue.jsx)($.v,{color:De,children:"Age"}),(0,ue.jsx)(P.k,{color:Ae,children:Xe.purchaseDate?Math.floor(((new Date).getTime()-new Date(Xe.purchaseDate).getTime())/31536e6):"-"}),(0,ue.jsx)(W.h,{color:De,children:"years"})]})]})})]})]}),Xe.description&&(0,ue.jsxs)(b.Z,{mt:6,bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Description"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsx)(X.E,{color:Ae,children:Xe.description})})]}),Xe.tags&&Xe.tags.length>0&&(0,ue.jsxs)(b.Z,{mt:6,bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Tags"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsx)(V.B,{children:Xe.tags.map(e=>(0,ue.jsx)(V.Q,{children:(0,ue.jsx)(K.vw,{size:"md",variant:"solid",bg:ze,color:"white",children:e})},e))})})]})]}),(0,ue.jsx)(G.K,{children:(0,ue.jsx)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(F.T,{align:"stretch",spacing:4,children:[(0,ue.jsxs)(y.r,{columns:{base:1,md:2},spacing:4,children:[(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Created:"}),(0,ue.jsx)(X.E,{color:Ae,children:new Date(Xe.createdAt).toLocaleString()})]}),(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Last Updated:"}),(0,ue.jsx)(X.E,{color:Ae,children:new Date(Xe.updatedAt).toLocaleString()})]}),Xe.publicUrl&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Public URL:"}),(0,ue.jsxs)(D.N,{href:Xe.publicUrl,isExternal:!0,color:ze,children:[Xe.publicUrl," ",(0,ue.jsx)(se.p,{mx:"2px"})]})]})]}),Xe.customFields&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{fontWeight:"bold",mb:2,color:Ae,children:"Custom Fields"}),(0,ue.jsx)(h.a,{p:3,bg:ye,borderRadius:"md",border:"1px",borderColor:Ce,children:(0,ue.jsx)("pre",{style:{color:Ae,fontSize:"12px",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(JSON.parse(Xe.customFields),null,2)})})]}),Xe.photos&&Xe.photos.length>0&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{fontWeight:"bold",mb:2,color:Ae,children:"Photos"}),(0,ue.jsx)(y.r,{columns:{base:2,md:4},spacing:4,children:Xe.photos.map((e,n)=>(0,ue.jsx)(C._,{src:e,alt:"Asset photo ".concat(n+1),borderRadius:"md",cursor:"pointer",onClick:()=>window.open(e,"_blank")},n))})]})]})})})}),(0,ue.jsx)(G.K,{children:(0,ue.jsx)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:(0,ue.jsx)(m.b,{children:(0,ue.jsx)(F.T,{align:"stretch",spacing:4,children:0===Ve.length?(0,ue.jsxs)(F.T,{py:8,children:[(0,ue.jsx)(ie.OKX,{size:48,color:"gray"}),(0,ue.jsx)(X.E,{color:De,children:"No history entries yet"}),(0,ue.jsx)(p.$,{onClick:Ie,bg:ze,color:"white",_hover:{bg:Ne},size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Add First Entry"})]}):Ve.map(e=>(0,ue.jsx)(h.a,{p:4,borderWidth:1,borderRadius:"md",borderColor:Ce,bg:ye,children:(0,ue.jsx)(w.s,{justify:"space-between",align:"start",children:(0,ue.jsxs)(_.z,{align:"start",spacing:3,children:[(0,ue.jsx)(X.E,{fontSize:"xl",children:Qe(e.action)}),(0,ue.jsxs)(h.a,{flex:1,children:[(0,ue.jsxs)(_.z,{spacing:2,children:[(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:e.action}),(0,ue.jsx)(X.E,{fontSize:"sm",color:De,children:new Date(e.timestamp).toLocaleString()})]}),e.description&&(0,ue.jsx)(X.E,{mt:1,children:e.description}),e.notes&&(0,ue.jsxs)(X.E,{mt:1,fontSize:"sm",color:"gray.600",children:["Notes: ",e.notes]}),(e.conditionBefore||e.conditionAfter)&&(0,ue.jsxs)(_.z,{mt:2,spacing:2,children:[e.conditionBefore&&(0,ue.jsx)(x.E,{colorScheme:Ke(e.conditionBefore),children:e.conditionBefore}),e.conditionBefore&&e.conditionAfter&&(0,ue.jsx)(X.E,{fontSize:"sm",children:"\u2192"}),e.conditionAfter&&(0,ue.jsx)(x.E,{colorScheme:Ke(e.conditionAfter),children:e.conditionAfter})]}),e.cost&&(0,ue.jsxs)(X.E,{mt:1,fontSize:"sm",color:"orange.500",children:["Cost: $",e.cost.toFixed(2)]}),e.nextActionDate&&(0,ue.jsxs)(_.z,{mt:1,spacing:1,children:[(0,ue.jsx)(re.C,{boxSize:3}),(0,ue.jsxs)(X.E,{fontSize:"sm",children:["Next action: ",new Date(e.nextActionDate).toLocaleDateString()]})]}),e.photos&&e.photos.length>0&&(0,ue.jsx)(_.z,{mt:2,spacing:2,children:e.photos.map((e,n)=>(0,ue.jsx)(C._,{src:e,alt:"Log photo ".concat(n+1),boxSize:"50px",objectFit:"cover",borderRadius:"md",cursor:"pointer",onClick:()=>window.open(e,"_blank")},n))}),(0,ue.jsxs)(_.z,{mt:2,spacing:2,children:[(0,ue.jsx)(d.e,{size:"xs",name:"".concat(e.createdBy.fName," ").concat(e.createdBy.lName),src:e.createdBy.profilePhoto}),(0,ue.jsxs)(X.E,{fontSize:"xs",color:"gray.500",children:[e.createdBy.fName," ",e.createdBy.lName]})]})]})]})})},e.id))})})})}),(0,ue.jsx)(G.K,{children:(0,ue.jsxs)(y.r,{columns:{base:1,md:2},spacing:6,children:[(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Maintenance Schedule"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(F.T,{align:"stretch",spacing:3,children:[Xe.lastMaintenanceDate&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Last Maintenance:"}),(0,ue.jsx)(X.E,{color:Ae,children:new Date(Xe.lastMaintenanceDate).toLocaleDateString()})]}),Xe.nextMaintenanceDate&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Next Maintenance:"}),(0,ue.jsx)(X.E,{color:new Date(Xe.nextMaintenanceDate)<=new Date?Te:ke,fontWeight:"bold",children:new Date(Xe.nextMaintenanceDate).toLocaleDateString()})]}),(null===(n=Xe.assetType)||void 0===n?void 0:n.maintenanceIntervalDays)&&(0,ue.jsxs)(h.a,{children:[(0,ue.jsx)(X.E,{color:De,fontSize:"sm",children:"Maintenance Interval:"}),(0,ue.jsxs)(X.E,{color:Ae,children:["Every ",Xe.assetType.maintenanceIntervalDays," days"]})]})]})})]}),(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Maintenance Notes"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsx)(X.E,{color:Ae,children:Xe.maintenanceNotes||"No maintenance notes available"})})]}),(0,ue.jsxs)(b.Z,{bg:ye,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:Ce,borderRadius:"lg",children:[(0,ue.jsx)(u.a,{children:(0,ue.jsx)(X.E,{fontWeight:"bold",color:Ae,children:"Maintenance History"})}),(0,ue.jsx)(m.b,{children:(0,ue.jsxs)(F.T,{align:"stretch",spacing:2,children:[Ve.filter(e=>"Maintenance"===e.action||"Repair"===e.action).map(e=>(0,ue.jsxs)(h.a,{p:2,borderWidth:1,borderRadius:"md",borderColor:Ce,bg:ye,children:[(0,ue.jsxs)(_.z,{justify:"space-between",children:[(0,ue.jsx)(X.E,{fontWeight:"medium",color:Ae,children:e.action}),(0,ue.jsx)(X.E,{fontSize:"sm",color:De,children:new Date(e.timestamp).toLocaleDateString()})]}),e.description&&(0,ue.jsx)(X.E,{fontSize:"sm",mt:1,color:Ae,children:e.description}),e.cost&&(0,ue.jsxs)(X.E,{fontSize:"sm",color:ze,children:["Cost: $",e.cost.toFixed(2)]})]},e.id)),0===Ve.filter(e=>"Maintenance"===e.action||"Repair"===e.action).length&&(0,ue.jsx)(X.E,{color:De,textAlign:"center",py:4,children:"No maintenance history"})]})})]})]})})]})]})]})}),(0,ue.jsx)(pe.n,{}),(0,ue.jsxs)(R.aF,{isOpen:Re,onClose:Me,size:"xl",children:[(0,ue.jsx)(T.m,{}),(0,ue.jsxs)(I.$,{bg:ye,backdropFilter:"blur(10px)",border:"1px",borderColor:Ce,children:[(0,ue.jsx)(k.r,{color:Ae,children:"Add Log Entry"}),(0,ue.jsx)(z.s,{}),(0,ue.jsx)(S.c,{children:(0,ue.jsxs)(F.T,{spacing:4,children:[(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Action Type"}),(0,ue.jsxs)(L.l,{value:Fe.action,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{action:e.target.value})),children:[(0,ue.jsx)("option",{value:"Comment",children:"Comment"}),(0,ue.jsx)("option",{value:"Maintenance",children:"Maintenance"}),(0,ue.jsx)("option",{value:"Repair",children:"Repair"}),(0,ue.jsx)("option",{value:"Inspection",children:"Inspection"}),(0,ue.jsx)("option",{value:"Condition Changed",children:"Condition Changed"}),(0,ue.jsx)("option",{value:"Status Changed",children:"Status Changed"})]})]}),(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Description"}),(0,ue.jsx)(Q.T,{value:Fe.description,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{description:e.target.value})),placeholder:"Describe what was done...",rows:3})]}),("Condition Changed"===Fe.action||"Inspection"===Fe.action)&&(0,ue.jsxs)(y.r,{columns:2,spacing:4,w:"full",children:[(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Condition Before"}),(0,ue.jsxs)(L.l,{value:Fe.conditionBefore,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{conditionBefore:e.target.value})),children:[(0,ue.jsx)("option",{value:"",children:"Select..."}),(0,ue.jsx)("option",{value:"NEW",children:"New"}),(0,ue.jsx)("option",{value:"EXCELLENT",children:"Excellent"}),(0,ue.jsx)("option",{value:"GOOD",children:"Good"}),(0,ue.jsx)("option",{value:"FAIR",children:"Fair"}),(0,ue.jsx)("option",{value:"POOR",children:"Poor"}),(0,ue.jsx)("option",{value:"BROKEN",children:"Broken"})]})]}),(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Condition After"}),(0,ue.jsxs)(L.l,{value:Fe.conditionAfter,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{conditionAfter:e.target.value})),children:[(0,ue.jsx)("option",{value:"",children:"Select..."}),(0,ue.jsx)("option",{value:"NEW",children:"New"}),(0,ue.jsx)("option",{value:"EXCELLENT",children:"Excellent"}),(0,ue.jsx)("option",{value:"GOOD",children:"Good"}),(0,ue.jsx)("option",{value:"FAIR",children:"Fair"}),(0,ue.jsx)("option",{value:"POOR",children:"Poor"}),(0,ue.jsx)("option",{value:"BROKEN",children:"Broken"})]})]})]}),("Maintenance"===Fe.action||"Repair"===Fe.action)&&(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Cost"}),(0,ue.jsx)(M.Q7,{value:Fe.cost,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{cost:Number(e)})),precision:2,min:0,children:(0,ue.jsx)(M.OO,{})})]}),(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Next Action Date"}),(0,ue.jsx)(A.p,{type:"date",value:Fe.nextActionDate,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{nextActionDate:e.target.value}))})]})]}),(0,ue.jsxs)(E.MJ,{children:[(0,ue.jsx)(v.l,{children:"Notes"}),(0,ue.jsx)(Q.T,{value:Fe.notes,onChange:e=>Be((0,t.A)((0,t.A)({},Fe),{},{notes:e.target.value})),placeholder:"Additional notes...",rows:2})]})]})}),(0,ue.jsxs)(N.j,{children:[(0,ue.jsx)(p.$,{variant:"outline",mr:3,onClick:Me,borderColor:Ce,color:Ae,_hover:{bg:ye},children:"Cancel"}),(0,ue.jsx)(p.$,{bg:ze,color:"white",_hover:{bg:Ne},onClick:async()=>{const e=(0,t.A)((0,t.A)({assetId:s},Fe),{},{cost:Fe.cost||void 0,nextActionDate:Fe.nextActionDate||void 0,conditionBefore:Fe.conditionBefore||void 0,conditionAfter:Fe.conditionAfter||void 0,photos:Fe.photos.length>0?Fe.photos:void 0});await qe({variables:{input:e}})},isLoading:Ge,children:"Add Entry"})]})]})]}),(0,ue.jsxs)(R.aF,{isOpen:Le,onClose:_e,size:"md",children:[(0,ue.jsx)(T.m,{}),(0,ue.jsxs)(I.$,{bg:ye,backdropFilter:"blur(10px)",border:"1px",borderColor:Ce,children:[(0,ue.jsx)(k.r,{color:Ae,children:"Asset QR Code"}),(0,ue.jsx)(z.s,{}),(0,ue.jsx)(S.c,{children:(0,ue.jsxs)(F.T,{spacing:4,ref:Ee,children:[(0,ue.jsx)(X.E,{fontWeight:"bold",fontSize:"lg",color:Ae,children:Xe.name}),(0,ue.jsxs)(X.E,{color:De,children:["ID: ",Xe.assetId]}),Xe.qrCode&&(0,ue.jsx)(C._,{src:Xe.qrCode,alt:"Asset QR Code",boxSize:"250px",mx:"auto"}),(0,ue.jsx)(X.E,{fontSize:"sm",color:De,textAlign:"center",children:"Scan this code to view asset details"}),Xe.publicUrl&&(0,ue.jsxs)(D.N,{href:Xe.publicUrl,isExternal:!0,color:ze,fontSize:"sm",children:[Xe.publicUrl," ",(0,ue.jsx)(se.p,{mx:"2px"})]})]})}),(0,ue.jsxs)(N.j,{children:[(0,ue.jsx)(p.$,{onClick:He,leftIcon:(0,ue.jsx)(ie.n4o,{}),bg:ze,color:"white",_hover:{bg:Ne},mr:3,children:"Print"}),(0,ue.jsx)(p.$,{onClick:_e,variant:"outline",borderColor:Ce,color:Ae,_hover:{bg:ye},children:"Close"})]})]})]})]})}}}]);
//# sourceMappingURL=7231.2e710e6c.chunk.js.map