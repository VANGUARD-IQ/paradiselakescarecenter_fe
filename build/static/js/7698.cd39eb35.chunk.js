"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[7698],{17698:(e,s,n)=>{n.r(s),n.d(s,{default:()=>ce});var o,r,i=n(57528),a=n(65043),l=n(27024),d=n(87139),t=n(22107),c=n(98662),x=n(42703),h=n(83169),j=n(24330),u=n(44093),g=n(98939),b=n(5371),m=n(73212),p=n(35699),f=n(45973),v=n(29244),C=n(18876),T=n(59883),y=n(86236),w=n(53560),S=n(91872),D=n(61724),E=n(76659),A=n(96148),z=n(10202),N=n(94217),k=n(53332),I=n(78149),L=n(80511),F=n(82595),M=n(67813),R=n(83201),_=n(3313),W=n(55395),O=n(30502),q=n(28846),U=n(39081),G=n(12733),B=n(12730),Z=n(55206),P=n(58584),V=n(99973),H=n(5874),K=n(98971),X=n(85369),$=n(39985),J=n(52003),Q=n(63295),Y=n(95214),ee=n(73216),se=n(31881),ne=n(10585),oe=n(70459),re=n(29066),ie=n(66037),ae=n(41737),le=n(70579);const de=(0,oe.J1)(o||(o=(0,i.A)(["\n  query GetAssets {\n    assets {\n      id\n      assetId\n      name\n      assetType {\n        id\n        name\n        category\n        icon\n      }\n      company {\n        id\n        name\n      }\n      assignedTo {\n        id\n        fName\n        lName\n        profilePhoto\n      }\n      manufacturer\n      model\n      serialNumber\n      status\n      condition\n      location {\n        building\n        floor\n        room\n      }\n      purchaseDate\n      nextMaintenanceDate\n      tags\n      qrCode\n      photos\n    }\n    assetStats\n    assetTypes {\n      id\n      name\n      category\n      icon\n    }\n  }\n"]))),te=(0,oe.J1)(r||(r=(0,i.A)(["\n  mutation DeleteAsset($id: ID!) {\n    deleteAsset(id: $id)\n  }\n"]))),ce=()=>{var e,s;(0,ie.H)("Assets");const n=(0,ee.Zp)(),o=(0,O.d)(),{user:r}=(0,re.A)(),{colorMode:i}=(0,u.G6)(),oe=e=>!(null===r||void 0===r||!r.permissions)&&e.some(e=>{var s;return null===(s=r.permissions)||void 0===s?void 0:s.includes(e)}),[ce,xe]=(0,a.useState)(""),[he,je]=(0,a.useState)("all"),[ue,ge]=(0,a.useState)("all"),[be,me]=(0,a.useState)("all"),pe=(0,$.oU)("background.main",i),fe=(0,$.oU)("background.cardGradient",i),ve=(0,$.oU)("border.darkCard",i),Ce=(0,$.oU)("light"===i?"text.primary":"text.primaryDark",i),Te=(0,$.oU)("light"===i?"text.secondary":"text.secondaryDark",i),ye=(0,$.oU)("light"===i?"text.muted":"text.mutedDark",i),we=(0,$.oU)("primary",i),Se=(0,$.oU)("primaryHover",i),De=(0,$.oU)("successGreen",i),Ee=(0,$.oU)("status.error",i),Ae=(0,$.oU)("status.warning",i),ze=((0,$.oU)("status.info",i),(0,C.A)({base:!0,md:!1})),{loading:Ne,error:ke,data:Ie,refetch:Le}=((0,C.A)({base:"sm",md:"md"}),(0,ne.IT)(de)),[Fe]=(0,se.n)(te,{onCompleted:()=>{o({title:"Asset deleted",description:"The asset has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),Le()},onError:e=>{o({title:"Error deleting asset",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),Me=(null===Ie||void 0===Ie||null===(e=Ie.assets)||void 0===e?void 0:e.filter(e=>{var s,n,o,r,i;const a=""===ce||e.assetId.toLowerCase().includes(ce.toLowerCase())||e.name.toLowerCase().includes(ce.toLowerCase())||(null===(s=e.manufacturer)||void 0===s?void 0:s.toLowerCase().includes(ce.toLowerCase()))||(null===(n=e.model)||void 0===n?void 0:n.toLowerCase().includes(ce.toLowerCase()))||(null===(o=e.serialNumber)||void 0===o?void 0:o.toLowerCase().includes(ce.toLowerCase()))||(null===(r=e.tags)||void 0===r?void 0:r.some(e=>e.toLowerCase().includes(ce.toLowerCase()))),l="all"===he||e.status===he,d="all"===ue||(null===(i=e.assetType)||void 0===i?void 0:i.id)===ue,t="all"===be||e.condition===be;return a&&l&&d&&t}))||[],Re=async e=>{window.confirm("Are you sure you want to delete this asset?")&&await Fe({variables:{id:e}})},_e=e=>{switch(e){case"ACTIVE":return"green";case"IN_MAINTENANCE":return"orange";case"RETIRED":default:return"gray";case"DISPOSED":return"red";case"LOST":return"purple";case"DAMAGED":return"yellow"}},We=e=>{switch(e){case"NEW":return"teal";case"EXCELLENT":return"green";case"GOOD":return"blue";case"FAIR":return"yellow";case"POOR":return"orange";case"BROKEN":return"red";default:return"gray"}},Oe=(null===Ie||void 0===Ie?void 0:Ie.assetStats)||[0,0,0,0];return Ne?(0,le.jsxs)(t.a,{bg:pe,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,le.jsx)(J.m,{}),(0,le.jsx)(Y.y,{moduleConfig:ae.default}),(0,le.jsx)(g.m,{maxW:"container.xl",py:8,flex:"1",children:(0,le.jsx)(z.T,{spacing:6,children:(0,le.jsx)(E.y,{size:"xl",color:we})})}),(0,le.jsx)(Q.n,{})]}):ke?(0,le.jsxs)(t.a,{bg:pe,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,le.jsx)(J.m,{}),(0,le.jsx)(Y.y,{moduleConfig:ae.default}),(0,le.jsx)(g.m,{maxW:"container.xl",py:8,flex:"1",children:(0,le.jsxs)(U.E,{color:Ee,children:["Error loading assets: ",ke.message]})}),(0,le.jsx)(Q.n,{})]}):(0,le.jsxs)(t.a,{bg:pe,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,le.jsx)(J.m,{}),(0,le.jsx)(Y.y,{moduleConfig:ae.default}),(0,le.jsx)(g.m,{maxW:"container.xl",px:{base:4,md:8},py:{base:6,md:8},flex:"1",children:(0,le.jsxs)(z.T,{spacing:{base:4,md:6},align:"stretch",children:[(0,le.jsxs)(b.s,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[(0,le.jsxs)(t.a,{children:[(0,le.jsx)(q.D,{color:Ce,fontFamily:$.Kk.fonts.heading,size:{base:"md",md:"lg"},children:"Assets"}),(0,le.jsx)(U.E,{color:Te,children:"Manage and track company assets"})]}),(0,le.jsx)(c.$,{bg:we,color:"white",_hover:{bg:Se},leftIcon:(0,le.jsx)(B.R,{}),onClick:()=>n("/assets/new"),size:{base:"sm",md:"md"},width:{base:"100%",md:"auto"},children:"Add Asset"})]}),(0,le.jsxs)(m.r,{columns:{base:2,md:4},spacing:{base:3,md:4},children:[(0,le.jsx)(h.Z,{bg:fe,backdropFilter:"blur(10px)",boxShadow:"0 4px 6px 0 rgba(0, 0, 0, 0.2)",border:"1px",borderColor:ve,borderRadius:"lg",children:(0,le.jsx)(j.b,{py:{base:3,md:4},px:{base:3,md:5},children:(0,le.jsxs)(N.r,{children:[(0,le.jsx)(k.v,{color:ye,fontSize:{base:"xs",md:"sm"},children:"Total Assets"}),(0,le.jsx)(I.k,{color:Ce,fontSize:{base:"xl",md:"2xl"},children:Oe[0]})]})})}),(0,le.jsx)(h.Z,{bg:fe,backdropFilter:"blur(10px)",boxShadow:"0 4px 6px 0 rgba(0, 0, 0, 0.2)",border:"1px",borderColor:ve,borderRadius:"lg",children:(0,le.jsx)(j.b,{py:{base:3,md:4},px:{base:3,md:5},children:(0,le.jsxs)(N.r,{children:[(0,le.jsx)(k.v,{color:ye,fontSize:{base:"xs",md:"sm"},children:"Active"}),(0,le.jsx)(I.k,{color:De,fontSize:{base:"xl",md:"2xl"},children:Oe[1]})]})})}),(0,le.jsx)(h.Z,{bg:fe,backdropFilter:"blur(10px)",boxShadow:"0 4px 6px 0 rgba(0, 0, 0, 0.2)",border:"1px",borderColor:ve,borderRadius:"lg",children:(0,le.jsx)(j.b,{py:{base:3,md:4},px:{base:3,md:5},children:(0,le.jsxs)(N.r,{children:[(0,le.jsx)(k.v,{color:ye,fontSize:{base:"xs",md:"sm"},children:"In Maintenance"}),(0,le.jsx)(I.k,{color:Ae,fontSize:{base:"xl",md:"2xl"},children:Oe[2]})]})})}),(0,le.jsx)(h.Z,{bg:fe,backdropFilter:"blur(10px)",boxShadow:"0 4px 6px 0 rgba(0, 0, 0, 0.2)",border:"1px",borderColor:ve,borderRadius:"lg",children:(0,le.jsx)(j.b,{py:{base:3,md:4},px:{base:3,md:5},children:(0,le.jsxs)(N.r,{children:[(0,le.jsx)(k.v,{color:ye,fontSize:{base:"xs",md:"sm"},children:"Need Maintenance"}),(0,le.jsx)(I.k,{color:Ee,fontSize:{base:"xl",md:"2xl"},children:Oe[3]})]})})})]}),(0,le.jsx)(h.Z,{bg:fe,backdropFilter:"blur(10px)",boxShadow:"0 4px 6px 0 rgba(0, 0, 0, 0.2)",border:"1px",borderColor:ve,borderRadius:"lg",children:(0,le.jsx)(j.b,{children:(0,le.jsxs)(b.s,{gap:{base:3,md:4},wrap:"wrap",direction:{base:"column",md:"row"},children:[(0,le.jsxs)(f.M,{maxW:{base:"100%",md:"300px"},children:[(0,le.jsx)(v.W,{children:(0,le.jsx)(G.W,{color:"gray.400"})}),(0,le.jsx)(p.p,{placeholder:"Search assets...",value:ce,onChange:e=>xe(e.target.value),bg:"light"===i?"white":"rgba(255, 255, 255, 0.05)",borderColor:"light"===i?"gray.200":ve,color:Ce,_placeholder:{color:ye},_focus:{borderColor:"light"===i?"#007AFF":"#3B82F6",boxShadow:"light"===i?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(59, 130, 246, 0.2)"}})]}),(0,le.jsxs)(D.l,{maxW:{base:"100%",md:"150px"},value:he,onChange:e=>je(e.target.value),bg:"light"===i?"white":"rgba(255, 255, 255, 0.05)",borderColor:"light"===i?"gray.200":ve,color:Ce,_focus:{borderColor:"light"===i?"#007AFF":"#3B82F6",boxShadow:"light"===i?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(59, 130, 246, 0.2)"},children:[(0,le.jsx)("option",{value:"all",children:"All Status"}),(0,le.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,le.jsx)("option",{value:"IN_MAINTENANCE",children:"In Maintenance"}),(0,le.jsx)("option",{value:"RETIRED",children:"Retired"}),(0,le.jsx)("option",{value:"DISPOSED",children:"Disposed"}),(0,le.jsx)("option",{value:"LOST",children:"Lost"}),(0,le.jsx)("option",{value:"DAMAGED",children:"Damaged"})]}),(0,le.jsxs)(D.l,{maxW:{base:"100%",md:"150px"},value:ue,onChange:e=>ge(e.target.value),bg:"light"===i?"white":"rgba(255, 255, 255, 0.05)",borderColor:"light"===i?"gray.200":ve,color:Ce,_focus:{borderColor:"light"===i?"#007AFF":"#3B82F6",boxShadow:"light"===i?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(59, 130, 246, 0.2)"},children:[(0,le.jsx)("option",{value:"all",children:"All Types"}),null===Ie||void 0===Ie||null===(s=Ie.assetTypes)||void 0===s?void 0:s.map(e=>(0,le.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]}),(0,le.jsxs)(D.l,{maxW:{base:"100%",md:"150px"},value:be,onChange:e=>me(e.target.value),bg:"light"===i?"white":"rgba(255, 255, 255, 0.05)",borderColor:"light"===i?"gray.200":ve,color:Ce,_focus:{borderColor:"light"===i?"#007AFF":"#3B82F6",boxShadow:"light"===i?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(59, 130, 246, 0.2)"},children:[(0,le.jsx)("option",{value:"all",children:"All Conditions"}),(0,le.jsx)("option",{value:"NEW",children:"New"}),(0,le.jsx)("option",{value:"EXCELLENT",children:"Excellent"}),(0,le.jsx)("option",{value:"GOOD",children:"Good"}),(0,le.jsx)("option",{value:"FAIR",children:"Fair"}),(0,le.jsx)("option",{value:"POOR",children:"Poor"}),(0,le.jsx)("option",{value:"BROKEN",children:"Broken"})]})]})})}),ze?(0,le.jsx)(z.T,{spacing:4,children:Me.map(e=>{var s;return(0,le.jsx)(h.Z,{w:"full",bg:fe,backdropFilter:"blur(10px)",boxShadow:"0 4px 6px 0 rgba(0, 0, 0, 0.2)",border:"1px",borderColor:ve,borderRadius:"lg",_hover:{transform:"translateY(-2px)",boxShadow:"0 8px 16px 0 rgba(0, 0, 0, 0.3)"},children:(0,le.jsx)(j.b,{children:(0,le.jsxs)(b.s,{justify:"space-between",align:"start",children:[(0,le.jsxs)(z.T,{align:"start",spacing:2,flex:1,children:[(0,le.jsxs)(A.z,{children:[(0,le.jsxs)(U.E,{fontSize:"lg",fontWeight:"bold",children:[null===(s=e.assetType)||void 0===s?void 0:s.icon," ",e.name]}),e.qrCode&&(0,le.jsx)(X.Acq,{color:"gray"})]}),(0,le.jsxs)(U.E,{fontSize:"sm",color:"gray.500",children:["ID: ",e.assetId]}),e.manufacturer&&e.model&&(0,le.jsxs)(U.E,{fontSize:"sm",children:[e.manufacturer," ",e.model]}),(0,le.jsxs)(A.z,{spacing:2,children:[(0,le.jsx)(d.E,{colorScheme:_e(e.status),children:e.status}),(0,le.jsx)(d.E,{colorScheme:We(e.condition),children:e.condition})]}),e.company&&(0,le.jsxs)(U.E,{fontSize:"sm",children:["Company: ",e.company.name]}),e.assignedTo&&(0,le.jsxs)(A.z,{spacing:2,children:[(0,le.jsx)(l.e,{size:"xs",name:"".concat(e.assignedTo.fName," ").concat(e.assignedTo.lName),src:e.assignedTo.profilePhoto}),(0,le.jsxs)(U.E,{fontSize:"sm",children:[e.assignedTo.fName," ",e.assignedTo.lName]})]}),e.location&&(0,le.jsxs)(U.E,{fontSize:"xs",color:"gray.500",children:["\ud83d\udccd ",[e.location.building,e.location.floor,e.location.room].filter(Boolean).join(", ")]}),e.nextMaintenanceDate&&(0,le.jsxs)(A.z,{spacing:1,children:[(0,le.jsx)(K.C,{boxSize:3,color:"orange.500"}),(0,le.jsxs)(U.E,{fontSize:"xs",color:"orange.500",children:["Next maintenance: ",new Date(e.nextMaintenanceDate).toLocaleDateString()]})]})]}),(0,le.jsxs)(T.W,{children:[(0,le.jsx)(y.I,{as:x.K,icon:(0,le.jsx)(H.D,{}),variant:"ghost",size:"sm"}),(0,le.jsxs)(S.c,{children:[(0,le.jsx)(w.D,{icon:(0,le.jsx)(Z.t,{}),onClick:()=>n("/assets/".concat(e.id)),children:"View Details"}),(0,le.jsx)(w.D,{icon:(0,le.jsx)(V.q,{}),onClick:()=>n("/assets/edit/".concat(e.id)),children:"Edit"}),(0,le.jsx)(w.D,{icon:(0,le.jsx)(X.Acq,{}),onClick:()=>n("/assets/".concat(e.id,"/qr")),children:"View QR Code"}),(0,le.jsx)(w.D,{icon:(0,le.jsx)(X.xdT,{}),onClick:()=>n("/assets/".concat(e.id,"/maintenance")),children:"Log Maintenance"}),oe(["ADMIN","ASSET_MANAGER"])&&(0,le.jsx)(w.D,{icon:(0,le.jsx)(P.d,{}),color:"red.500",onClick:()=>Re(e.id),children:"Delete"})]})]})]})})},e.id)})}):(0,le.jsx)(h.Z,{children:(0,le.jsx)(j.b,{overflowX:"auto",children:(0,le.jsxs)(L.X,{variant:"simple",children:[(0,le.jsx)(_.d,{children:(0,le.jsxs)(W.Tr,{children:[(0,le.jsx)(R.Th,{children:"Asset"}),(0,le.jsx)(R.Th,{children:"Type"}),(0,le.jsx)(R.Th,{children:"Company"}),(0,le.jsx)(R.Th,{children:"Assigned To"}),(0,le.jsx)(R.Th,{children:"Status"}),(0,le.jsx)(R.Th,{children:"Condition"}),(0,le.jsx)(R.Th,{children:"Location"}),(0,le.jsx)(R.Th,{children:"Next Maintenance"}),(0,le.jsx)(R.Th,{children:"Actions"})]})}),(0,le.jsx)(F.N,{children:Me.map(e=>{var s,o,r;return(0,le.jsxs)(W.Tr,{_hover:{bg:"light"===i?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},children:[(0,le.jsx)(M.Td,{children:(0,le.jsxs)(z.T,{align:"start",spacing:0,children:[(0,le.jsxs)(A.z,{children:[(0,le.jsx)(U.E,{fontWeight:"bold",children:e.name}),e.qrCode&&(0,le.jsx)(X.Acq,{size:12,color:"gray"})]}),(0,le.jsxs)(U.E,{fontSize:"xs",color:"gray.500",children:["ID: ",e.assetId]}),e.manufacturer&&(0,le.jsxs)(U.E,{fontSize:"xs",color:"gray.500",children:[e.manufacturer," ",e.model]})]})}),(0,le.jsx)(M.Td,{children:(0,le.jsxs)(U.E,{children:[null===(s=e.assetType)||void 0===s?void 0:s.icon," ",null===(o=e.assetType)||void 0===o?void 0:o.name]})}),(0,le.jsx)(M.Td,{children:(null===(r=e.company)||void 0===r?void 0:r.name)||"-"}),(0,le.jsx)(M.Td,{children:e.assignedTo?(0,le.jsxs)(A.z,{spacing:2,children:[(0,le.jsx)(l.e,{size:"xs",name:"".concat(e.assignedTo.fName," ").concat(e.assignedTo.lName),src:e.assignedTo.profilePhoto}),(0,le.jsxs)(U.E,{fontSize:"sm",children:[e.assignedTo.fName," ",e.assignedTo.lName]})]}):"-"}),(0,le.jsx)(M.Td,{children:(0,le.jsx)(d.E,{colorScheme:_e(e.status),children:e.status})}),(0,le.jsx)(M.Td,{children:(0,le.jsx)(d.E,{colorScheme:We(e.condition),children:e.condition})}),(0,le.jsx)(M.Td,{children:e.location?(0,le.jsx)(U.E,{fontSize:"sm",children:[e.location.building,e.location.floor,e.location.room].filter(Boolean).join(", ")}):"-"}),(0,le.jsx)(M.Td,{children:e.nextMaintenanceDate?(0,le.jsx)(U.E,{fontSize:"sm",color:new Date(e.nextMaintenanceDate)<=new Date?"red.500":"inherit",children:new Date(e.nextMaintenanceDate).toLocaleDateString()}):"-"}),(0,le.jsx)(M.Td,{children:(0,le.jsxs)(T.W,{children:[(0,le.jsx)(y.I,{as:x.K,icon:(0,le.jsx)(H.D,{}),variant:"ghost",size:"sm"}),(0,le.jsxs)(S.c,{children:[(0,le.jsx)(w.D,{icon:(0,le.jsx)(Z.t,{}),onClick:()=>n("/assets/".concat(e.id)),children:"View Details"}),(0,le.jsx)(w.D,{icon:(0,le.jsx)(V.q,{}),onClick:()=>n("/assets/edit/".concat(e.id)),children:"Edit"}),(0,le.jsx)(w.D,{icon:(0,le.jsx)(X.Acq,{}),onClick:()=>n("/assets/".concat(e.id,"/qr")),children:"View QR Code"}),(0,le.jsx)(w.D,{icon:(0,le.jsx)(X.xdT,{}),onClick:()=>n("/assets/".concat(e.id,"/maintenance")),children:"Log Maintenance"}),oe(["ADMIN","ASSET_MANAGER"])&&(0,le.jsx)(w.D,{icon:(0,le.jsx)(P.d,{}),color:"red.500",onClick:()=>Re(e.id),children:"Delete"})]})]})})]},e.id)})})]})})}),0===Me.length&&(0,le.jsx)(h.Z,{children:(0,le.jsx)(j.b,{children:(0,le.jsxs)(z.T,{spacing:4,py:8,children:[(0,le.jsx)(X.rrY,{size:48,color:ye}),(0,le.jsx)(U.E,{color:ye,children:"No assets found"}),(0,le.jsx)(c.$,{bg:we,color:"white",_hover:{bg:Se},leftIcon:(0,le.jsx)(B.R,{}),onClick:()=>n("/assets/new"),children:"Add First Asset"})]})})})]})}),(0,le.jsx)(Q.n,{})]})}}}]);
//# sourceMappingURL=7698.cd39eb35.chunk.js.map