{"version":3,"file":"static/js/9345.1213ae8b.chunk.js","mappings":"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","sources":["pages/bills/markdownTemplates.ts","pages/bills/NewBill.tsx"],"sourcesContent":["/**\n * Centralized markdown templates for import/export functionality\n * Single source of truth for FORMAT_SPEC.md and bill/project templates\n */\n\nexport const FORMAT_SPEC_CONTENT = `# Unified Markdown Format Specification\n\n**Version:** 1.0\n**Last Updated:** January 2025\n\nThis document defines the unified markdown format for importing/exporting projects, bills, and proposals.\n\n---\n\n## üìù Format Overview\n\nThe unified format combines:\n- Project metadata (name, goal, description)\n- Bill metadata (currency, payment method, status)\n- Line items / Tasks (description, price, status, assignee)\n- Agreement text (optional)\n\nThis allows editing proposals in Claude and importing them into the system.\n\n---\n\n## üìã Complete Example\n\n\\`\\`\\`markdown\n# One Group Website Development Proposal\n\n## Project Information\n**Project Name:** One Group Website Development\n**Project Goal:** Build unified digital platform for Solar, Finance & Property Investment\n**Project Description:** Complete 80-page unified platform representing all three One Group verticals with custom calculators, CRM integration, and SEO optimization.\n\n## Bill Information\n**Currency:** AUD\n**Payment Method:** AUD_TRANSFER\n**Status:** PROPOSAL\n\n## Line Items\n\n### 1. Content Page: onegroupaustralasia.com.au/\n**Price:** $100.00\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** tom@tommillerservices.com\n\n### 2. Content Page: onegroupaustralasia.com.au/about\n**Price:** $100.00\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** Unassigned\n\n### 3. Custom Logic: onegroupaustralasia.com.au/solar/calculator\n**Price:** $300.00\n**Billable:** Yes\n**Status:** IN_PROGRESS\n**Assignee:** jane@tommillerservices.com\n\n### 4. Project management and coordination\n**Price:** $0.00\n**Billable:** No\n**Status:** PENDING\n**Assignee:** tom@tommillerservices.com\n\n### 5. Internal testing and QA\n**Price:** [ENTER PRICE]\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** Unassigned\n\n## Agreement\n\n[Full agreement text goes here...]\n\n**Between:** Tom Miller Services Pty Ltd (\"TMS\")\n**And:** One Group (\"Client\")\n\n[Rest of agreement...]\n\\`\\`\\`\n\n---\n\n## üîç Field Specifications\n\n### Project Information Section\n\n| Field | Required | Format | Example |\n|-------|----------|--------|---------|\n| Project Name | Yes | Plain text | \\`One Group Website Development\\` |\n| Project Goal | No | Max 17 words | \\`Build unified digital platform for Solar, Finance & Property\\` |\n| Project Description | No | Max 200 words | \\`Complete 80-page unified platform...\\` |\n\n**Notes:**\n- Project Goal is used for taglines (keep concise)\n- Project Description provides context for the work\n\n---\n\n### Bill Information Section\n\n| Field | Required | Format | Options |\n|-------|----------|--------|---------|\n| Currency | Yes | Uppercase code | \\`AUD\\`, \\`USD\\` |\n| Payment Method | No | Enum value | \\`AUD_TRANSFER\\`, \\`CARD\\`, \\`CRYPTO\\` |\n| Status | No | Enum value | \\`PROPOSAL\\`, \\`DRAFT\\`, \\`SENT\\` |\n\n**Notes:**\n- Currency affects how prices are parsed\n- If Payment Method is omitted, defaults to \\`AUD_TRANSFER\\`\n- If Status is omitted, defaults to \\`PROPOSAL\\`\n\n---\n\n### Line Items Section\n\nEach line item uses this format:\n\n\\`\\`\\`markdown\n### [Number]. [Description]\n**Price:** [Amount]\n**Billable:** [Yes/No]\n**Status:** [Status]\n**Assignee:** [Email or \"Unassigned\"]\n\\`\\`\\`\n\n#### Field Details:\n\n| Field | Required | Format | Options/Rules |\n|-------|----------|--------|---------------|\n| Number | No | Integer | Sequential numbering (1, 2, 3...) |\n| Description | Yes | Plain text | Task/line item description |\n| Price | Yes | Number with currency symbol | \\`$100.00\\`, \\`[ENTER PRICE]\\` (placeholder) |\n| Billable | No | Yes/No | Defaults to \\`Yes\\` if omitted |\n| Status | No | Enum | \\`PENDING\\`, \\`IN_PROGRESS\\`, \\`COMPLETED\\` (defaults to \\`PENDING\\`) |\n| Assignee | No | Email or \"Unassigned\" | Must be valid email or literal \"Unassigned\" |\n\n**Price Format Rules:**\n- With symbol: \\`$100.00\\`, \\`$100\\`, \\`$99.50\\`\n- Without symbol: \\`100.00\\`, \\`100\\`, \\`99.50\\`\n- Placeholder: \\`[ENTER PRICE]\\` ‚Üê **Fails import** (must add price before importing)\n- Zero price: \\`$0.00\\` ‚Üê Creates non-billable line item\n\n**Assignee Rules:**\n- Valid email: \\`tom@tommillerservices.com\\` ‚Üê Looks up user and assigns\n- Invalid email: Creates unassigned task and shows warning\n- \"Unassigned\": Creates unassigned task\n- Omitted: Creates unassigned task\n\n---\n\n## üîÑ Import/Export Behavior\n\n### Export (Project ‚Üí Markdown)\n\nWhen exporting a project to markdown:\n1. **Project Info:** Populated from project.projectName, projectGoal, projectDescription\n2. **Bill Info:** Uses default values (Currency from tenant, Status = PROPOSAL)\n3. **Line Items:**\n   - Description from task.description\n   - Price = \\`[ENTER PRICE]\\` for billable tasks, \\`$0.00\\` for non-billable\n   - Billable from task.billable (defaults to Yes)\n   - Status from task.status\n   - Assignee from task.assignedTo.email (or \"Unassigned\")\n4. **Agreement:** Not included in export (add manually if needed)\n\n### Import (Markdown ‚Üí Bill)\n\nWhen importing markdown to a bill:\n1. **Project Info:** Ignored (bill already linked to project)\n2. **Bill Info:** Updates bill.currency if specified\n3. **Line Items:**\n   - **Replaces all existing line items** (with confirmation modal)\n   - Creates new line items from each \\`### [Number]. [Description]\\` section\n   - Parses price and converts to cents for Stripe\n   - Sets billable flag based on price ($0 = non-billable)\n   - Assignee is stored but not enforced (bills don't have task assignments)\n4. **Agreement:** Ignored during bill import\n\n---\n\n## ‚úÖ Validation Rules\n\n### During Export\n- [ ] At least 1 task exists in project\n- [ ] Task descriptions are not empty\n- [ ] All billable tasks marked with price placeholder\n\n### During Import to Bill\n- [ ] Valid markdown structure\n- [ ] At least 1 line item found\n- [ ] All line items have valid prices (no \\`[ENTER PRICE]\\` placeholders)\n- [ ] All prices are positive numbers or zero\n- [ ] Currency code is valid (AUD or USD)\n- [ ] Status enum is valid (if provided)\n\n---\n\n## üö´ Common Parse Errors\n\n| Error | Cause | Solution |\n|-------|-------|----------|\n| \"No line items found\" | Missing \\`## Line Items\\` section | Add section header |\n| \"Invalid price format\" | Price has \\`[ENTER PRICE]\\` | Replace with actual dollar amount |\n| \"Currency not supported\" | Invalid currency code | Use \\`AUD\\` or \\`USD\\` |\n| \"Line item missing description\" | Empty description after number | Add description text |\n| \"Negative price not allowed\" | Price is negative | Use positive number or $0.00 |\n\n---\n\n## üé® Formatting Tips for Claude Editing\n\n### Adding New Line Items\n\\`\\`\\`markdown\n### 81. New feature: User authentication module\n**Price:** $500.00\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** tom@tommillerservices.com\n\\`\\`\\`\n\n### Bulk Price Adjustments\nAsk Claude: \"Increase all Content Page items by 20%\"\nClaude will update:\n- \\`**Price:** $100.00\\` ‚Üí \\`**Price:** $120.00\\`\n\n### Reassigning Tasks\nAsk Claude: \"Assign all calculator tasks to jane@tommillerservices.com\"\nClaude will update:\n- \\`**Assignee:** Unassigned\\` ‚Üí \\`**Assignee:** jane@tommillerservices.com\\`\n\n### Marking Tasks Complete\nAsk Claude: \"Mark tasks 1-10 as completed\"\nClaude will update:\n- \\`**Status:** PENDING\\` ‚Üí \\`**Status:** COMPLETED\\`\n\n---\n\n**Version History:**\n- v1.0 (Jan 2025) - Initial specification\n`;\n\nexport const BILL_TEMPLATE_CONTENT = `# Bill Line Items Template\n\n## Project Information\n**Project Name:** [Enter project name]\n**Project Goal:** [Enter project goal - max 17 words]\n**Project Description:** [Enter project description - max 200 words]\n\n## Bill Information\n**Currency:** AUD\n**Payment Method:** AUD_TRANSFER\n**Status:** PROPOSAL\n\n## Line Items\n\n### 1. [Task description]\n**Price:** $100.00\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** email@example.com\n\n### 2. [Another task description]\n**Price:** $200.00\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** Unassigned\n\n### 3. [Add more line items as needed]\n**Price:** $150.00\n**Billable:** Yes\n**Status:** PENDING\n**Assignee:** Unassigned\n\n## Agreement\n\n[Add your agreement text here, or leave this section empty]\n`;\n\n/**\n * Download a markdown file with the given content\n */\nexport const downloadMarkdownFile = (content: string, filename: string) => {\n  const blob = new Blob([content], { type: 'text/markdown' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n};\n","import React, { useState, useEffect } from \"react\";\nimport { BILL_TEMPLATE_CONTENT, downloadMarkdownFile } from \"./markdownTemplates\";\nimport {\n  Box,\n  Container,\n  Heading,\n  VStack,\n  FormControl,\n  FormLabel,\n  Select,\n  Switch,\n  Button,\n  useToast,\n  Table,\n  Thead,\n  Tbody,\n  Tr,\n  Th,\n  Td,\n  Input,\n  Textarea,\n  IconButton,\n  HStack,\n  Badge,\n  Text,\n  useColorMode,\n} from \"@chakra-ui/react\";\nimport { AddIcon, DeleteIcon } from \"@chakra-ui/icons\";\nimport { gql, useQuery, useMutation, useApolloClient, ApolloQueryResult } from \"@apollo/client\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { NavbarWithCallToAction } from \"../../components/chakra/NavbarWithCallToAction/NavbarWithCallToAction\";\nimport { FooterWithFourColumns } from \"../../components/chakra/FooterWithFourColumns/FooterWithFourColumns\";\nimport { usePageTitle } from \"../../hooks/useDocumentTitle\";\nimport { ModuleBreadcrumb } from \"../../components/ModuleBreadcrumb\";\nimport billsModuleConfig from \"./moduleConfig\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { getColor } from \"../../brandConfig\";\nimport { Bill, BillInput } from \"../../generated/graphql\";\n\nenum BillStatus {\n  PROPOSAL = \"PROPOSAL\",\n  DRAFT = \"DRAFT\",\n  SENT = \"SENT\"\n}\n\nconst GET_ALL_PROJECTS = gql`\n  query GetAllProjects {\n    projects {\n      id\n      projectName\n      projectGoal\n      progress\n      billingClient {\n        id\n        fName\n        lName\n        email\n        businessName\n      }\n      members {\n        id\n        fName\n        lName\n        email\n      }\n      tasks {\n        id\n        description\n        status\n        order\n        billed\n        assignedTo {\n          id\n          fName\n          lName\n        }\n        media {\n          url\n          description\n          fileType\n        }\n      }\n      bills {\n        id\n        lineItems {\n          id\n          amount\n        }\n        isPaid\n        status\n      }\n    }\n  }\n`;\n\nconst GET_PROJECT_WITH_TASKS = gql`\n  query GetProjectWithTasks($projectId: ID!) {\n    project(id: $projectId) {\n      id\n      projectName\n      projectGoal\n      progress\n      billingClient {\n        id\n        fName\n        lName\n        email\n        businessName\n      }\n      tasks {\n        id\n        description\n        status\n        order\n        billed\n        assignedTo {\n          id\n          fName\n          lName\n        }\n        media {\n          url\n          description\n          fileType\n        }\n      }\n    }\n  }\n`;\n\nconst CREATE_BILL = gql`\n  mutation CreateBill($input: BillInput!) {\n    createBill(input: $input) {\n      id\n      isPaid\n      status\n      paymentMethod\n      currency\n      acceptCardPayment\n      acceptCryptoPayment\n      lineItems {\n        id\n        amount\n        description\n      }\n      projectId\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\n\nconst NewBill = () => {\n  usePageTitle(\"New Bill\");\n  const navigate = useNavigate();\n  const toast = useToast();\n  const { colorMode } = useColorMode();\n  const client = useApolloClient(); // Get Apollo client instance\n  const { user } = useAuth(); // Get current authenticated user\n\n  // Consistent styling from brandConfig with theme support\n  const bg = getColor(\"background.main\", colorMode);\n  const cardGradientBg = getColor(\"background.cardGradient\", colorMode);\n  const cardBorder = getColor(\"border.darkCard\", colorMode);\n  const textPrimary = getColor(colorMode === 'light' ? \"text.primary\" : \"text.primaryDark\", colorMode);\n  const textSecondary = getColor(colorMode === 'light' ? \"text.secondary\" : \"text.secondaryDark\", colorMode);\n  const textMuted = getColor(colorMode === 'light' ? \"text.muted\" : \"text.mutedDark\", colorMode);\n\n  const [searchParams] = useSearchParams();\n  const projectIdFromUrl = searchParams.get('projectId');\n  \n  const [selectedProject, setSelectedProject] = useState(\"\");\n  const [isPaid, setIsPaid] = useState(false);\n  const [billStatus, setBillStatus] = useState<BillStatus>(BillStatus.DRAFT);\n  const [paymentMethod, setPaymentMethod] = useState<\"AUD_TRANSFER\" | \"CRYPTO\" | \"STRIPE\">(\"AUD_TRANSFER\");\n  const [currency, setCurrency] = useState<\"AUD\" | \"USD\">(\"AUD\");\n  const [acceptCardPayment, setAcceptCardPayment] = useState(true);\n  const [acceptCryptoPayment, setAcceptCryptoPayment] = useState(false);\ninterface LineItem {\n  description: string;\n  amount: string | number;\n}  const [lineItems, setLineItems] = useState<LineItem[]>([{ description: \"\", amount: \"\" }]);\n\n  // Calculate total amount\n  const totalAmount = lineItems.reduce((sum, item) => {\n    const amount = typeof item.amount === 'number' ? item.amount : parseFloat(item.amount as string) || 0;\n    return sum + amount;\n  }, 0);\n\n  const { loading: projectsLoading, error: projectsError, data: projectsData } = useQuery(GET_ALL_PROJECTS, {\n    onCompleted: (data) => {\n      console.log(\"Project data received from query:\", data);\n      if (data?.projects) {\n        console.log(`Received ${data.projects.length} projects`);\n        // Check the structure of the first project if available\n        if (data.projects.length > 0) {\n          const sampleProject = data.projects[0];\n          console.log(\"Sample project structure:\", {\n            id: sampleProject.id,\n            name: sampleProject.projectName,\n            tasksCount: sampleProject.tasks?.length || 0,\n            hasTasks: Array.isArray(sampleProject.tasks),\n            billsCount: sampleProject.bills?.length || 0,\n            firstTaskBilled: sampleProject.tasks && sampleProject.tasks.length > 0\n              ? sampleProject.tasks[0].billed\n              : \"No tasks\"\n          });\n        }\n      } else {\n        console.log(\"No projects data received\");\n      }\n    },\n    onError: (error) => {\n      console.error(\"Error fetching projects:\", error);\n    }\n  });\n  const [createBill, { loading: creatingBill }] = useMutation(CREATE_BILL);\n\n  // Pre-populate line items when a project is selected\n  const handleProjectSelect = (projectId: string) => {\n    console.log(\"Project selected:\", projectId);\n    setSelectedProject(projectId);\n\n    if (!projectId) {\n      console.log(\"No project selected, resetting line items\");\n      setLineItems([{ description: \"\", amount: \"\" }]);\n      return;\n    }\n\n    // Set a loading line item while we fetch data\n    setLineItems([{ description: \"Loading tasks...\", amount: \"\" }]);\n\n    // Fetch the specific project with its tasks\n    client.query<{ project: any }>({\n      query: GET_PROJECT_WITH_TASKS,\n      variables: { projectId },\n      fetchPolicy: \"network-only\" // Force a fresh fetch\n    }).then((response: ApolloQueryResult<{ project: any }>) => {\n      console.log(\"Project details fetched:\", response.data);\n\n      const projectData = response.data.project;\n      if (!projectData) {\n        console.log(\"Project data not found\");\n        setLineItems([{ description: \"\", amount: \"\" }]);\n        toast({\n          title: \"Error\",\n          description: \"Could not load project details\",\n          status: \"error\",\n          duration: 3000,\n          isClosable: true,\n        });\n        return;\n      }\n\n      console.log(\"Project tasks:\", projectData.tasks);\n      console.log(\"Task count:\", projectData.tasks?.length || 0);\n\n      // Check if tasks exist\n      if (!projectData.tasks || projectData.tasks.length === 0) {\n        console.log(\"No tasks found in this project\");\n        setLineItems([{ description: \"\", amount: \"\" }]);\n        toast({\n          title: \"No tasks\",\n          description: \"This project has no tasks. You can add custom line items.\",\n          status: \"info\",\n          duration: 3000,\n          isClosable: true,\n        });\n        return;\n      }\n\n      // Get tasks that aren't already billed\n      const unbilledTasks = projectData.tasks.filter((task: any) => {\n        console.log(`Task ${task.id} - ${task.description} - Billed:`, task.billed);\n        // We need to check explicitly for false since billed is a boolean\n        return task.billed === false;\n      });\n\n      console.log(\"Unbilled tasks:\", unbilledTasks);\n      console.log(\"Unbilled task count:\", unbilledTasks.length);\n\n      if (unbilledTasks.length === 0) {\n        // If no unbilled tasks, keep an empty line item\n        console.log(\"No unbilled tasks found\");\n        setLineItems([{ description: \"\", amount: \"\" }]);\n        toast({\n          title: \"No unbilled tasks\",\n          description: \"This project has no unbilled tasks. You can add custom line items.\",\n          status: \"info\",\n          duration: 3000,\n          isClosable: true,\n        });\n        return;\n      }\n\n      // Create line items from unbilled tasks\n      const newLineItems = unbilledTasks.map((task: any) => {\n        console.log(`Creating line item for task: ${task.description}`);\n        return {\n          description: task.description,\n          amount: \"\", // Default to empty, user will need to set amount\n          taskId: task.id, // Store the task ID for reference\n          status: task.status // Store the task status for reference\n        };\n      });\n\n      console.log(\"New line items:\", newLineItems);\n      setLineItems(newLineItems);\n\n      toast({\n        title: \"Tasks loaded\",\n        description: `Loaded ${newLineItems.length} unbilled tasks as line items.`,\n        status: \"success\",\n        duration: 3000,\n        isClosable: true,\n      });\n    }).catch(error => {\n      console.error(\"Error fetching project details:\", error);\n      setLineItems([{ description: \"\", amount: \"\" }]);\n      toast({\n        title: \"Error\",\n        description: \"Failed to load project tasks. Please try again.\",\n        status: \"error\",\n        duration: 3000,\n        isClosable: true,\n      });\n    });\n  };\n\n  // Auto-select project from URL parameter when projects data is loaded\n  useEffect(() => {\n    if (projectIdFromUrl && projectsData?.projects && !selectedProject) {\n      const projectExists = projectsData.projects.some((p: any) => p.id === projectIdFromUrl);\n      if (projectExists) {\n        console.log(\"Auto-selecting project from URL:\", projectIdFromUrl);\n        handleProjectSelect(projectIdFromUrl);\n      }\n    }\n  }, [projectIdFromUrl, projectsData, selectedProject]);\n\n  // Pre-fill from booking URL parameters\n  useEffect(() => {\n    const itemName = searchParams.get('itemName');\n    const itemPrice = searchParams.get('itemPrice');\n    const itemQuantity = searchParams.get('itemQuantity');\n    const urlCurrency = searchParams.get('currency');\n    const notes = searchParams.get('notes');\n\n    if (itemName && itemPrice) {\n      console.log('üìã Pre-filling bill from booking:', { itemName, itemPrice, itemQuantity });\n\n      // Set line items\n      const quantity = parseInt(itemQuantity || '1');\n      const price = parseFloat(itemPrice);\n      setLineItems([{\n        description: itemName,\n        amount: price * quantity\n      }]);\n\n      // Set currency if provided\n      if (urlCurrency === 'AUD' || urlCurrency === 'USD') {\n        setCurrency(urlCurrency);\n      }\n\n      // TODO: Set notes when that field is added to the form\n      // setNotes(notes);\n    }\n  }, [searchParams]);\n\n  const handleAddLineItem = () => {\n    setLineItems([...lineItems, { description: \"\", amount: \"\" }]);\n  };\n\n  const handleRemoveLineItem = (index: number) => {\n    setLineItems(lineItems.filter((_, i) => i !== index));\n  };\n\n  const handleLineItemChange = (index: number, field: keyof LineItem, value: string | number) => {\n    const newLineItems = [...lineItems];\n    newLineItems[index] = {\n      ...newLineItems[index],\n      [field]: field === \"amount\" ? (value === \"\" ? \"\" : parseFloat(value as string) || 0) : value,\n    };\n    setLineItems(newLineItems);\n  };\n\n  const handleSubmit = async () => {\n    console.log(\"üöÄ Starting bill creation...\");\n    \n    if (!selectedProject) {\n      console.error(\"‚ùå No project selected\");\n      toast({\n        title: \"Error\",\n        description: \"Please select a project\",\n        status: \"error\",\n        duration: 3000,\n        isClosable: true,\n      });\n      return;\n    }\n\n    // Filter out line items with no description or zero amount\n    const validLineItems = lineItems.filter(item => item.description && item.amount && Number(item.amount) > 0);\n    console.log(`‚úÖ Valid line items: ${validLineItems.length}`);\n\n    if (validLineItems.length === 0) {\n      console.error(\"‚ùå No valid line items\");\n      toast({\n        title: \"Error\",\n        description: \"Please add at least one line item with a description and amount\",\n        status: \"error\",\n        duration: 3000,\n        isClosable: true,\n      });\n      return;\n    }\n\n    try {\n      // Remove taskId and status from lineItems before submitting\n      const cleanedLineItems = validLineItems.map(({ description, amount }) => ({\n        description,\n        amount: Number(amount)\n      }));\n\n      const billInput = {\n        projectId: selectedProject,\n        isPaid,\n        status: billStatus,\n        paymentMethod,\n        currency,\n        acceptCardPayment,\n        acceptCryptoPayment,\n        lineItems: cleanedLineItems,\n        issuedBy: user?.id, // Include the current user's ID as the issuer\n      };\n\n      console.log(\"üìã Creating bill with:\", {\n        ...billInput,\n        totalAmount: totalAmount.toFixed(2),\n        currency,\n        lineItemsCount: cleanedLineItems.length\n      });\n\n      const { data } = await createBill({\n        variables: {\n          input: billInput,\n        },\n      });\n\n      console.log(\"‚úÖ Bill created successfully:\", {\n        billId: data.createBill.id,\n        currency: data.createBill.currency,\n        totalLineItems: data.createBill.lineItems?.length\n      });\n\n      toast({\n        title: \"Success\",\n        description: `Bill created successfully in ${currency}`,\n        status: \"success\",\n        duration: 3000,\n        isClosable: true,\n      });\n\n      navigate(`/bill/${data.createBill.id}`);\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to create bill\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n      });\n    }\n  };\n\n  return (\n    <Box bg={bg} minHeight=\"100vh\">\n      <NavbarWithCallToAction />\n      <ModuleBreadcrumb moduleConfig={billsModuleConfig} />\n      <Container maxW=\"container.xl\" py={8}>\n        <VStack spacing={8} align=\"stretch\">\n          <HStack justify=\"space-between\" align=\"center\">\n            <Heading color={textPrimary}>üìù Create New Bill</Heading>\n            <Button\n              size=\"sm\"\n              colorScheme=\"purple\"\n              leftIcon={<AddIcon />}\n              onClick={() => downloadMarkdownFile(BILL_TEMPLATE_CONTENT, 'bill_template.md')}\n            >\n              Download .md Template\n            </Button>\n          </HStack>\n\n          <Box\n            p={6}\n            bg={cardGradientBg}\n            backdropFilter=\"blur(10px)\"\n            borderRadius=\"lg\"\n            boxShadow=\"0 8px 32px 0 rgba(0, 0, 0, 0.37)\"\n            borderWidth=\"1px\"\n            borderColor={cardBorder}\n          >\n            <VStack spacing={6} align=\"stretch\">\n              <FormControl>\n                <FormLabel color={textPrimary}>Project</FormLabel>\n                <Select\n                  placeholder=\"Select project\"\n                  value={selectedProject}\n                  onChange={(e) => handleProjectSelect(e.target.value)}\n                  isDisabled={projectsLoading}\n                  bg=\"rgba(0, 0, 0, 0.2)\"\n                  borderColor={cardBorder}\n                  color={textPrimary}\n                  _hover={{ borderColor: textSecondary }}\n                >\n                  {projectsData?.projects.map((project: any) => (\n                    <option key={project.id} value={project.id} style={{ backgroundColor: '#1a1a1a' }}>\n                  {project.projectName} - {project.billingClient?.businessName || `${project.billingClient?.fName} ${project.billingClient?.lName}`}\n                    </option>\n                  ))}\n                </Select>\n              </FormControl>\n\n              <FormControl>\n                <FormLabel color={textPrimary}>Payment Method</FormLabel>\n                <Select\n                  value={paymentMethod}\n                  onChange={(e) => setPaymentMethod(e.target.value as any)}\n                  bg=\"rgba(0, 0, 0, 0.2)\"\n                  borderColor={cardBorder}\n                  color={textPrimary}\n                  _hover={{ borderColor: textSecondary }}\n                >\n                  <option value=\"AUD_TRANSFER\" style={{ backgroundColor: '#1a1a1a' }}>AUD Transfer</option>\n                  <option value=\"CRYPTO\" style={{ backgroundColor: '#1a1a1a' }}>Crypto</option>\n                  <option value=\"STRIPE\" style={{ backgroundColor: '#1a1a1a' }}>Stripe</option>\n                </Select>\n              </FormControl>\n\n              <FormControl>\n                <FormLabel color={textPrimary}>Currency</FormLabel>\n                <Select\n                  value={currency}\n                  onChange={(e) => {\n                    const newCurrency = e.target.value as \"AUD\" | \"USD\";\n                    setCurrency(newCurrency);\n                    console.log(`Currency changed to: ${newCurrency}`);\n                  }}\n                  bg=\"rgba(0, 0, 0, 0.2)\"\n                  borderColor={cardBorder}\n                  color={textPrimary}\n                  _hover={{ borderColor: textSecondary }}\n                >\n                  <option value=\"AUD\" style={{ backgroundColor: '#1a1a1a' }}>AUD - Australian Dollar</option>\n                  <option value=\"USD\" style={{ backgroundColor: '#1a1a1a' }}>USD - US Dollar</option>\n                </Select>\n              </FormControl>\n\n              {/* Payment Method Toggles - Only visible for DRAFT bills */}\n              <Box>\n                <Text fontSize=\"sm\" fontWeight=\"semibold\" color={textPrimary} mb={3}>\n                  Payment Methods Available to Customer\n                </Text>\n                <VStack align=\"stretch\" spacing={3}>\n                  <FormControl display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\n                    <FormLabel htmlFor=\"card-payment\" mb=\"0\" color={textPrimary}>\n                      Accept Card Payments (Stripe)\n                    </FormLabel>\n                    <Switch\n                      id=\"card-payment\"\n                      isChecked={acceptCardPayment}\n                      onChange={(e) => setAcceptCardPayment(e.target.checked)}\n                      colorScheme=\"blue\"\n                    />\n                  </FormControl>\n\n                  <FormControl display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\n                    <FormLabel htmlFor=\"crypto-payment\" mb=\"0\" color={textPrimary}>\n                      Accept Crypto Payments (Bitcoin)\n                    </FormLabel>\n                    <Switch\n                      id=\"crypto-payment\"\n                      isChecked={acceptCryptoPayment}\n                      onChange={(e) => setAcceptCryptoPayment(e.target.checked)}\n                      colorScheme=\"blue\"\n                    />\n                  </FormControl>\n                </VStack>\n                <Text fontSize=\"xs\" color={textMuted} mt={2}>\n                  Note: These options can only be changed while the bill is in DRAFT status\n                </Text>\n              </Box>\n\n              <FormControl display=\"flex\" alignItems=\"center\">\n                <FormLabel mb=\"0\" color={textPrimary}>Is Paid?</FormLabel>\n                <Switch isChecked={isPaid} onChange={(e) => setIsPaid(e.target.checked)} />\n              </FormControl>\n            </VStack>\n          </Box>\n\n          <Box\n            p={6}\n            bg={cardGradientBg}\n            backdropFilter=\"blur(10px)\"\n            borderRadius=\"lg\"\n            boxShadow=\"0 8px 32px 0 rgba(0, 0, 0, 0.37)\"\n            borderWidth=\"1px\"\n            borderColor={cardBorder}\n          >\n            <HStack mb={4} justify=\"space-between\">\n              <Heading size=\"md\" color={textPrimary}>Line Items</Heading>\n              {selectedProject && (\n                <Text fontSize=\"sm\" color={textMuted}>\n                  Line items are pre-populated with unbilled tasks from the selected project\n                </Text>\n              )}\n            </HStack>\n            <Box overflowX=\"auto\" overflowY=\"hidden\">\n              <Table variant=\"simple\" size={{ base: \"sm\", md: \"md\" }}>\n                <Thead>\n                  <Tr>\n                    <Th color={textSecondary} fontSize={{ base: \"xs\", md: \"sm\" }} px={{ base: 2, md: 4 }}>Description</Th>\n                    <Th color={textSecondary} fontSize={{ base: \"xs\", md: \"sm\" }} px={{ base: 2, md: 4 }}>Amount</Th>\n                    <Th color={textSecondary} fontSize={{ base: \"xs\", md: \"sm\" }} px={{ base: 2, md: 4 }} display={{ base: \"none\", md: \"table-cell\" }}>Status</Th>\n                    <Th color={textSecondary} fontSize={{ base: \"xs\", md: \"sm\" }} px={{ base: 2, md: 4 }}>Action</Th>\n                  </Tr>\n                </Thead>\n              <Tbody>\n                {lineItems.map((item, index) => (\n                  <Tr key={index}>\n                    <Td px={{ base: 2, md: 4 }} py={{ base: 2, md: 3 }}>\n                      <Textarea\n                        value={item.description}\n                        onChange={(e) => handleLineItemChange(index, \"description\", e.target.value)}\n                        placeholder=\"Item description\"\n                        bg=\"rgba(0, 0, 0, 0.2)\"\n                        borderColor={cardBorder}\n                        color={textPrimary}\n                        _placeholder={{ color: textMuted }}\n                        _hover={{ borderColor: textSecondary }}\n                        minH={{ base: \"80px\", md: \"120px\" }}\n                        resize=\"vertical\"\n                        rows={5}\n                        fontSize={{ base: \"sm\", md: \"md\" }}\n                      />\n                    </Td>\n                    <Td px={{ base: 2, md: 4 }} py={{ base: 2, md: 3 }}>\n                      <Input\n                        type=\"number\"\n                        value={item.amount}\n                        onChange={(e) => handleLineItemChange(index, \"amount\", e.target.value)}\n                        placeholder=\"Amount\"\n                        bg=\"rgba(0, 0, 0, 0.2)\"\n                        borderColor={cardBorder}\n                        color={textPrimary}\n                        _placeholder={{ color: textMuted }}\n                        _hover={{ borderColor: textSecondary }}\n                        fontSize={{ base: \"sm\", md: \"md\" }}\n                        minW={{ base: \"80px\", md: \"120px\" }}\n                      />\n                    </Td>\n                    <Td px={{ base: 2, md: 4 }} py={{ base: 2, md: 3 }}>\n                      <IconButton\n                        aria-label=\"Remove line item\"\n                        icon={<DeleteIcon />}\n                        onClick={() => handleRemoveLineItem(index)}\n                        isDisabled={lineItems.length === 1}\n                        size={{ base: \"sm\", md: \"md\" }}\n                        variant=\"ghost\"\n                        colorScheme=\"red\"\n                      />\n                    </Td>\n                  </Tr>\n                ))}\n              </Tbody>\n              </Table>\n            </Box>\n            <Button\n              leftIcon={<AddIcon />}\n              onClick={handleAddLineItem}\n              mt={4}\n              size=\"sm\"\n              bg=\"white\"\n              color=\"black\"\n              _hover={{\n                bg: \"gray.100\",\n                transform: \"translateY(-2px)\"\n              }}\n            >\n              Add Line Item\n            </Button>\n          </Box>\n\n          <HStack spacing={4}>\n            <Button\n              onClick={handleSubmit}\n              isLoading={creatingBill}\n              bg=\"white\"\n              color=\"black\"\n              _hover={{\n                bg: \"gray.100\",\n                transform: \"translateY(-2px)\"\n              }}\n            >\n              Create Bill\n            </Button>\n            <Button \n              onClick={() => navigate(\"/bills\")}\n              variant=\"outline\"\n              borderColor={cardBorder}\n              color={textPrimary}\n              _hover={{\n                borderColor: textSecondary,\n                bg: \"rgba(255, 255, 255, 0.05)\"\n              }}\n            >\n              Cancel\n            </Button>\n          </HStack>\n        </VStack>\n      </Container>\n      <FooterWithFourColumns />\n      \n      {/* Floating Total Display */}\n      <Box\n        position=\"fixed\"\n        bottom={8}\n        right={8}\n        p={6}\n        bg=\"linear-gradient(135deg, rgba(20, 20, 20, 0.95) 0%, rgba(30, 30, 30, 0.9) 50%, rgba(20, 20, 20, 0.95) 100%)\"\n        backdropFilter=\"blur(20px)\"\n        borderRadius=\"2xl\"\n        boxShadow=\"0 10px 40px rgba(0, 0, 0, 0.5), 0 0 60px rgba(54, 158, 255, 0.15)\"\n        borderWidth=\"1px\"\n        borderColor=\"rgba(54, 158, 255, 0.3)\"\n        transition=\"all 0.3s ease\"\n        _hover={{\n          transform: \"translateY(-2px) scale(1.02)\",\n          boxShadow: \"0 15px 50px rgba(0, 0, 0, 0.6), 0 0 80px rgba(54, 158, 255, 0.25)\",\n          borderColor: \"rgba(54, 158, 255, 0.5)\"\n        }}\n        zIndex={1000}\n      >\n        <VStack spacing={2} align=\"stretch\">\n          <Text\n            fontSize=\"xs\"\n            fontWeight=\"semibold\"\n            textTransform=\"uppercase\"\n            letterSpacing=\"wider\"\n            color=\"rgba(255, 255, 255, 0.6)\"\n          >\n            Total Amount\n          </Text>\n          <HStack spacing={1} align=\"baseline\">\n            <Text\n              fontSize=\"3xl\"\n              fontWeight=\"bold\"\n              color=\"#FFFFFF\"\n              lineHeight=\"1\"\n            >\n              ${totalAmount.toFixed(2)} {currency}\n            </Text>\n            <Text\n              fontSize=\"sm\"\n              color=\"rgba(255, 255, 255, 0.5)\"\n              fontWeight=\"medium\"\n            >\n              AUD\n            </Text>\n          </HStack>\n          {lineItems.filter(item => item.amount && Number(item.amount) > 0).length > 0 && (\n            <Text\n              fontSize=\"xs\"\n              color=\"rgba(54, 158, 255, 0.8)\"\n            >\n              {lineItems.filter(item => item.amount && Number(item.amount) > 0).length} item{lineItems.filter(item => item.amount && Number(item.amount) > 0).length !== 1 ? 's' : ''}\n            </Text>\n          )}\n        </VStack>\n      </Box>\n    </Box>\n  );\n};\n\nexport default NewBill; "],"names":["FORMAT_SPEC_CONTENT","BILL_TEMPLATE_CONTENT","downloadMarkdownFile","content","filename","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","BillStatus","GET_ALL_PROJECTS","gql","_templateObject","_taggedTemplateLiteral","GET_PROJECT_WITH_TASKS","_templateObject2","CREATE_BILL","_templateObject3","NewBill","usePageTitle","navigate","useNavigate","toast","useToast","colorMode","useColorMode","client","useApolloClient","user","useAuth","bg","getColor","cardGradientBg","cardBorder","textPrimary","textSecondary","textMuted","searchParams","useSearchParams","projectIdFromUrl","get","selectedProject","setSelectedProject","useState","isPaid","setIsPaid","billStatus","setBillStatus","DRAFT","paymentMethod","setPaymentMethod","currency","setCurrency","acceptCardPayment","setAcceptCardPayment","acceptCryptoPayment","setAcceptCryptoPayment","lineItems","setLineItems","description","amount","totalAmount","reduce","sum","item","parseFloat","loading","projectsLoading","error","projectsError","data","projectsData","useQuery","onCompleted","console","log","projects","concat","length","_sampleProject$tasks","_sampleProject$bills","sampleProject","id","name","projectName","tasksCount","tasks","hasTasks","Array","isArray","billsCount","bills","firstTaskBilled","billed","onError","createBill","creatingBill","useMutation","handleProjectSelect","projectId","query","variables","fetchPolicy","then","response","_projectData$tasks","projectData","project","title","status","duration","isClosable","unbilledTasks","filter","task","newLineItems","map","taskId","catch","useEffect","some","p","itemName","itemPrice","itemQuantity","urlCurrency","quantity","parseInt","price","handleLineItemChange","index","field","value","_objectSpread","_jsxs","Box","minHeight","children","_jsx","NavbarWithCallToAction","ModuleBreadcrumb","moduleConfig","billsModuleConfig","Container","maxW","py","VStack","spacing","align","HStack","justify","Heading","color","Button","size","colorScheme","leftIcon","AddIcon","onClick","backdropFilter","borderRadius","boxShadow","borderWidth","borderColor","FormControl","FormLabel","Select","placeholder","onChange","e","target","isDisabled","_hover","_project$billingClien","_project$billingClien2","_project$billingClien3","style","backgroundColor","billingClient","businessName","fName","lName","newCurrency","Text","fontSize","fontWeight","mb","display","alignItems","justifyContent","htmlFor","Switch","isChecked","checked","mt","overflowX","overflowY","Table","variant","base","md","Thead","Tr","Th","px","Tbody","Td","Textarea","_placeholder","minH","resize","rows","Input","minW","IconButton","icon","DeleteIcon","_","i","handleRemoveLineItem","handleAddLineItem","transform","async","validLineItems","Number","_data$createBill$line","cleanedLineItems","_ref","billInput","issuedBy","toFixed","lineItemsCount","input","billId","totalLineItems","Error","message","isLoading","FooterWithFourColumns","position","bottom","right","transition","zIndex","textTransform","letterSpacing","lineHeight"],"sourceRoot":""}