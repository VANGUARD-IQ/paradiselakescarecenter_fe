"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[5202],{35202:(e,s,r)=>{r.r(s),r.d(s,{default:()=>H});var n,a,o,l=r(57528),i=(r(65043),r(88787)),t=r(85871),c=r(87139),d=r(22107),h=r(98662),p=r(42703),x=r(44093),j=r(98939),u=r(76659),g=r(96148),m=r(10202),b=r(80511),f=r(82595),T=r(67813),E=r(83201),y=r(3313),P=r(55395),w=r(30502),S=r(47726),D=r(28846),A=r(39081),C=r(1009),k=r(73216),N=r(31881),v=r(10585),I=r(70459),z=r(39985),L=r(63295),G=r(52003),_=r(95214),R=r(76879),U=r(70579);const $=(0,I.J1)(n||(n=(0,l.A)(["\n  query GetAllProposals {\n    getAllProposals {\n      id\n      companyName\n      slug\n      title\n      status\n      createdAt\n      sentAt\n      fullySignedAt\n      customPagePath\n    }\n  }\n"]))),F=(0,I.J1)(a||(a=(0,l.A)(["\n  mutation ClearProposalSignatures($proposalId: ID!) {\n    clearProposalSignatures(proposalId: $proposalId)\n  }\n"]))),K=(0,I.J1)(o||(o=(0,l.A)(["\n  mutation DeleteProposal($id: ID!) {\n    deleteProposal(id: $id)\n  }\n"]))),H=()=>{const e=(0,k.Zp)(),{colorMode:s}=(0,x.G6)(),r=(0,w.d)(),{data:n,loading:a,error:o,refetch:l}=(0,v.IT)($),[I]=(0,N.n)(F),[H]=(0,N.n)(K),O=(0,z.oU)("background.main",s),W="light"===s?"white":"gray.800",Y=(0,z.oU)("light"===s?"text.primary":"text.primaryDark",s),J=(0,z.oU)("light"===s?"text.secondary":"text.secondaryDark",s),M=e=>{switch(e){case"DRAFT":default:return"gray";case"SENT":return"blue";case"PARTIALLY_SIGNED":return"orange";case"FULLY_SIGNED":return"green";case"EXPIRED":case"CANCELLED":return"red"}};if(a)return(0,U.jsx)(d.a,{bg:O,minH:"100vh",py:10,children:(0,U.jsx)(j.m,{maxW:"container.xl",children:(0,U.jsxs)(m.T,{spacing:8,children:[(0,U.jsx)(u.y,{size:"xl",color:"blue.500"}),(0,U.jsx)(A.E,{color:Y,children:"Loading proposals..."})]})})});if(o)return(0,U.jsx)(d.a,{bg:O,minH:"100vh",py:10,children:(0,U.jsx)(j.m,{maxW:"container.xl",children:(0,U.jsxs)(i.F,{status:"error",children:[(0,U.jsx)(t._,{}),"Error loading proposals: ",o.message]})})});const V=(null===n||void 0===n?void 0:n.getAllProposals)||[];return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(G.m,{}),(0,U.jsx)(d.a,{bg:O,minH:"100vh",py:10,children:(0,U.jsxs)(j.m,{maxW:"container.xl",children:[(0,U.jsx)(_.y,{moduleConfig:R.default}),(0,U.jsxs)(m.T,{spacing:8,align:"stretch",children:[(0,U.jsxs)(g.z,{justify:"space-between",children:[(0,U.jsxs)(m.T,{align:"start",spacing:1,children:[(0,U.jsx)(D.D,{size:"xl",color:Y,children:"Proposals"}),(0,U.jsx)(A.E,{color:J,children:"Manage all business proposals and signatures"})]}),(0,U.jsx)(h.$,{leftIcon:(0,U.jsx)(C.GGD,{}),colorScheme:"blue",onClick:()=>e("/proposals/new"),children:"New Proposal"})]}),(0,U.jsx)(d.a,{bg:W,borderRadius:"lg",shadow:"md",overflow:"hidden",children:0===V.length?(0,U.jsxs)(m.T,{spacing:4,py:10,children:[(0,U.jsx)(A.E,{fontSize:"xl",color:J,children:"No proposals yet"}),(0,U.jsx)(A.E,{color:J,children:"Create your first proposal to get started"}),(0,U.jsx)(h.$,{leftIcon:(0,U.jsx)(C.GGD,{}),colorScheme:"blue",onClick:()=>e("/proposals/new"),children:"Create Proposal"})]}):(0,U.jsxs)(b.X,{variant:"simple",children:[(0,U.jsx)(y.d,{children:(0,U.jsxs)(P.Tr,{children:[(0,U.jsx)(E.Th,{children:"Company"}),(0,U.jsx)(E.Th,{children:"Title"}),(0,U.jsx)(E.Th,{children:"Status"}),(0,U.jsx)(E.Th,{children:"Signatures"}),(0,U.jsx)(E.Th,{children:"Created"}),(0,U.jsx)(E.Th,{children:"Actions"})]})}),(0,U.jsx)(f.N,{children:V.map(s=>(0,U.jsxs)(P.Tr,{children:[(0,U.jsx)(T.Td,{children:(0,U.jsxs)(m.T,{align:"start",spacing:0,children:[(0,U.jsx)(A.E,{fontWeight:"bold",color:Y,children:s.companyName}),(0,U.jsxs)(A.E,{fontSize:"sm",color:J,children:["/",s.slug]})]})}),(0,U.jsx)(T.Td,{children:(0,U.jsx)(A.E,{color:Y,children:s.title})}),(0,U.jsx)(T.Td,{children:(0,U.jsx)(c.E,{colorScheme:M(s.status),children:s.status})}),(0,U.jsx)(T.Td,{children:(0,U.jsx)(A.E,{color:Y,children:"FULLY_SIGNED"===s.status?"\u2713 Signed":"\u2014"})}),(0,U.jsx)(T.Td,{children:(0,U.jsx)(A.E,{color:J,fontSize:"sm",children:new Date(s.createdAt).toLocaleDateString()})}),(0,U.jsx)(T.Td,{children:(0,U.jsxs)(g.z,{spacing:2,children:[(0,U.jsx)(S.m,{label:"View Details",children:(0,U.jsx)(p.K,{"aria-label":"View proposal",icon:(0,U.jsx)(C.Vap,{}),size:"sm",variant:"ghost",onClick:()=>e("/proposals/".concat(s.id))})}),s.customPagePath&&(0,U.jsx)(S.m,{label:"Open Custom Page",children:(0,U.jsx)(p.K,{"aria-label":"Open custom page",icon:(0,U.jsx)(C.HaR,{}),size:"sm",variant:"ghost",onClick:()=>e(s.customPagePath)})}),(0,U.jsx)(S.m,{label:"Edit Proposal",children:(0,U.jsx)(p.K,{"aria-label":"Edit proposal",icon:(0,U.jsx)(C.SG1,{}),size:"sm",variant:"ghost",onClick:()=>e("/proposals/".concat(s.id,"/edit"))})}),(0,U.jsx)(S.m,{label:"Reset Signatures",children:(0,U.jsx)(p.K,{"aria-label":"Reset signatures",icon:(0,U.jsx)(C.cO3,{}),size:"sm",variant:"ghost",colorScheme:"orange",onClick:()=>(async(e,s)=>{if(window.confirm('Reset proposal for "'.concat(s,'"? This will clear all signatures and start fresh from the agreement.')))try{await I({variables:{proposalId:e}}),r({title:"Proposal reset",description:'"'.concat(s,'" has been reset to draft status'),status:"success",duration:3e3}),l()}catch(o){r({title:"Error resetting proposal",description:o instanceof Error?o.message:"Unknown error",status:"error",duration:5e3})}})(s.id,s.companyName)})}),(0,U.jsx)(S.m,{label:"Delete Proposal",children:(0,U.jsx)(p.K,{"aria-label":"Delete proposal",icon:(0,U.jsx)(C.IXo,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>(async(e,s)=>{if(window.confirm('\u26a0\ufe0f PERMANENTLY DELETE proposal for "'.concat(s,'"?\n\nThis will delete:\n- The proposal\n- All signatures\n- All associated data\n\nThis action CANNOT be undone!')))try{await H({variables:{id:e}}),r({title:"Proposal deleted",description:'"'.concat(s,'" has been permanently deleted'),status:"success",duration:3e3}),l()}catch(o){r({title:"Error deleting proposal",description:o instanceof Error?o.message:"Unknown error",status:"error",duration:5e3})}})(s.id,s.companyName)})})]})})]},s.id))})]})})]})]})}),(0,U.jsx)(L.n,{})]})}}}]);
//# sourceMappingURL=5202.4919762b.chunk.js.map