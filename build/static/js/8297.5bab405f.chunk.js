"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[8297],{13241:(e,r,o)=>{o.d(r,{O:()=>a});var s=o(70579);const a=(0,o(14010).w)({displayName:"ViewOffIcon",path:(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),(0,s.jsx)("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})})},78297:(e,r,o)=>{o.r(r),o.d(r,{default:()=>se});var s,a,l,i,n=o(57528),t=o(65043),d=o(73216),c=o(31881),h=o(10585),p=o(70459),x=o(88787),g=o(34334),m=o(85871),u=o(87139),b=o(22107),j=o(98662),v=o(42703),f=o(83169),w=o(24330),C=o(44093),S=o(98939),y=o(82459),k=o(73225),E=o(76668),P=o(43533),T=o(25527),M=o(35699),U=o(45973),A=o(29244),N=o(61724),W=o(96148),H=o(10202),K=o(98481),z=o(19077),J=o(30502),F=o(28846),_=o(39081),I=o(80810),O=o(12730),R=o(55206),D=o(13241),L=o(25624),V=o(37575),G=o(39985),q=o(52003),B=o(63295),Z=o(95214),$=o(73892),X=o(66037),Y=o(70579);const Q=(0,p.J1)(s||(s=(0,n.A)(["\n    query GetClients {\n        clients {\n            id\n            fName\n            lName\n            email\n            phoneNumber\n        }\n    }\n"]))),ee=(0,p.J1)(a||(a=(0,n.A)(["\n    query GetCompanies {\n        companies {\n            id\n            name\n            tradingName\n            abn\n        }\n    }\n"]))),re=(0,p.J1)(l||(l=(0,n.A)(["\n    query MyIPFSVideos {\n        myIPFSVideos {\n            id\n            title\n            description\n            ipfsHash\n        }\n    }\n"]))),oe=(0,p.J1)(i||(i=(0,n.A)(["\n    mutation CreatePassword($input: PasswordInput!) {\n        createPassword(input: $input) {\n            id\n            serviceName\n            loginUrl\n            company {\n                id\n                name\n            }\n            createdBy {\n                id\n                fName\n                lName\n                email\n            }\n            sharedWithEmployees\n            sharedWithExternal\n            instructionalVideos {\n                ipfsHash\n                title\n                description\n            }\n        }\n    }\n"]))),se=()=>{var e,r,o;(0,X.H)("New Password");const s=(0,d.Zp)(),a=(0,J.d)(),{colorMode:l}=(0,C.G6)(),i=(0,G.oU)("background.main",l),n=(0,G.oU)("background.cardGradient",l),p=(0,G.oU)("border.darkCard",l),se=(0,G.oU)("light"===l?"text.primary":"text.primaryDark",l),ae=((0,G.oU)("light"===l?"text.secondary":"text.secondaryDark",l),(0,G.oU)("light"===l?"text.muted":"text.mutedDark",l)),le=(0,G.oU)("primary"),ie=(0,G.oU)("primaryHover"),[ne,te]=((0,G.oU)("successGreen"),(0,G.oU)("status.error"),(0,G.oU)("status.warning"),(0,t.useState)("")),[de,ce]=(0,t.useState)(""),[he,pe]=(0,t.useState)(""),[xe,ge]=(0,t.useState)(""),[me,ue]=(0,t.useState)(""),[be,je]=(0,t.useState)(""),[ve,fe]=(0,t.useState)(!1),[we,Ce]=(0,t.useState)(""),[Se,ye]=(0,t.useState)(""),[ke,Ee]=(0,t.useState)(""),[Pe,Te]=(0,t.useState)(""),[Me,Ue]=(0,t.useState)([]),[Ae,Ne]=(0,t.useState)(!1),[We,He]=(0,t.useState)(""),[Ke,ze]=(0,t.useState)(!1),[Je,Fe]=(0,t.useState)([]),{data:_e,loading:Ie}=(0,h.IT)(Q),{data:Oe,loading:Re}=(0,h.IT)(ee),{data:De,loading:Le}=(0,h.IT)(re),[Ve,{loading:Ge}]=(0,c.n)(oe,{onCompleted:e=>{var r,o;const l=((null===(r=e.createPassword.sharedWithEmployees)||void 0===r?void 0:r.length)||0)+((null===(o=e.createPassword.sharedWithExternal)||void 0===o?void 0:o.length)||0);a({title:"Password created successfully",description:"Password for ".concat(e.createPassword.serviceName," has been created").concat(l>0?" and shared":""),status:"success",duration:5e3,isClosable:!0}),s("/passwords/admin")},onError:e=>{a({title:"Error creating password",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),qe=(e,r)=>{navigator.clipboard.writeText(e),a({title:"".concat(r," copied"),status:"success",duration:2e3})};return(0,Y.jsxs)(b.a,{bg:i,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,Y.jsx)(q.m,{}),(0,Y.jsx)(Z.y,{moduleConfig:$.default}),(0,Y.jsx)(S.m,{maxW:{base:"container.sm",lg:"container.lg"},px:{base:4,md:8},py:{base:6,md:8},flex:"1",children:(0,Y.jsxs)(H.T,{spacing:{base:4,md:6},align:"stretch",children:[(0,Y.jsx)(F.D,{color:se,fontFamily:G.Kk.fonts.heading,size:{base:"md",md:"lg"},children:"Create New Password"}),(0,Y.jsx)(f.Z,{bg:n,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:p,borderRadius:"lg",children:(0,Y.jsx)(w.b,{children:(0,Y.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),!ne||!be)return void a({title:"Missing required fields",description:"Please fill in service name and password",status:"error",duration:3e3});const r={serviceName:ne,password:be};de&&(r.loginUrl=de),he&&(r.dashboardUrl=he),xe&&(r.username=xe),me&&(r.email=me),ke&&(r.notes=ke),Pe&&(r.company=Pe),Ke&&we&&(r.twoFactorSecret=we,Se&&(r.twoFactorBackupCodes=Se)),Me.length>0&&(r.sharedWithExternal=Me),Ae&&We&&(r.expiresAt=new Date(We).toISOString()),Je.length>0&&(r.instructionalVideos=Je),await Ve({variables:{input:r}})},children:(0,Y.jsxs)(H.T,{spacing:{base:4,md:6},align:"stretch",children:[(0,Y.jsxs)(b.a,{children:[(0,Y.jsx)(_.E,{color:se,fontSize:{base:"md",md:"lg"},fontWeight:"bold",mb:4,children:"Service Information"}),(0,Y.jsxs)(P.x,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:{base:4,md:6},children:[(0,Y.jsx)(T.E,{colSpan:{base:2,md:1},children:(0,Y.jsxs)(k.MJ,{isRequired:!0,children:[(0,Y.jsx)(E.l,{color:se,children:"Service Name"}),(0,Y.jsx)(M.p,{placeholder:"e.g., Company Gmail, AWS Console",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:ne,onChange:e=>te(e.target.value)}),(0,Y.jsx)(k.eK,{color:ae,children:"Name of the service, application, or device (e.g., Company Laptop)"})]})}),(0,Y.jsx)(T.E,{colSpan:{base:2,md:1},children:(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Company (Optional)"}),(0,Y.jsx)(N.l,{placeholder:"Select company",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,value:Pe,onChange:e=>Te(e.target.value),disabled:Re,children:null===Oe||void 0===Oe||null===(e=Oe.companies)||void 0===e?void 0:e.map(e=>(0,Y.jsxs)("option",{value:e.id,children:[e.tradingName||e.name," ",e.abn?"(ABN: ".concat(e.abn,")"):""]},e.id))}),(0,Y.jsx)(k.eK,{color:ae,children:"Link this password to a company"})]})}),(0,Y.jsx)(T.E,{colSpan:2,children:(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Share With (Optional)"}),(0,Y.jsx)(N.l,{placeholder:"Select users to share with",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,onChange:e=>{e.target.value&&!Me.includes(e.target.value)&&Ue([...Me,e.target.value])},disabled:Ie,children:null===_e||void 0===_e||null===(r=_e.clients)||void 0===r?void 0:r.filter(e=>!Me.includes(e.id)).map(e=>(0,Y.jsxs)("option",{value:e.id,children:[e.fName," ",e.lName," (",e.email,")"]},e.id))}),(0,Y.jsx)(W.z,{mt:2,wrap:"wrap",spacing:2,children:Me.map(e=>{var r;const o=null===_e||void 0===_e||null===(r=_e.clients)||void 0===r?void 0:r.find(r=>r.id===e);return(0,Y.jsxs)(u.E,{colorScheme:"purple",px:2,py:1,borderRadius:"md",cursor:"pointer",onClick:()=>Ue(Me.filter(r=>r!==e)),children:[null===o||void 0===o?void 0:o.fName," ",null===o||void 0===o?void 0:o.lName," \u2715"]},e)})}),(0,Y.jsx)(k.eK,{color:ae,children:"Users who can access and manage this password"})]})}),(0,Y.jsx)(T.E,{colSpan:2,children:(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Login URL (Optional)"}),(0,Y.jsx)(M.p,{type:"url",placeholder:"https://example.com/login or leave blank for devices",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:de,onChange:e=>ce(e.target.value)}),(0,Y.jsx)(k.eK,{color:ae,children:"URL where the user logs in (leave blank for devices like laptops)"})]})}),(0,Y.jsx)(T.E,{colSpan:3,children:(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Dashboard URL (Optional)"}),(0,Y.jsx)(M.p,{type:"url",placeholder:"https://example.com/dashboard",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:he,onChange:e=>pe(e.target.value)}),(0,Y.jsx)(k.eK,{color:ae,children:"URL to access after logging in"})]})})]})]}),(0,Y.jsx)(y.c,{borderColor:p}),(0,Y.jsxs)(b.a,{children:[(0,Y.jsx)(_.E,{color:se,fontSize:{base:"md",md:"lg"},fontWeight:"bold",mb:4,children:"Login Credentials"}),(0,Y.jsxs)(P.x,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:{base:4,md:6},children:[(0,Y.jsx)(T.E,{colSpan:{base:2,md:1},children:(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Username (Optional)"}),(0,Y.jsx)(M.p,{placeholder:"username",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:xe,onChange:e=>ge(e.target.value)})]})}),(0,Y.jsx)(T.E,{colSpan:{base:2,md:1},children:(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Email (Optional)"}),(0,Y.jsx)(M.p,{type:"email",placeholder:"user@example.com",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:me,onChange:e=>ue(e.target.value)})]})}),(0,Y.jsx)(T.E,{colSpan:2,children:(0,Y.jsxs)(k.MJ,{isRequired:!0,children:[(0,Y.jsx)(E.l,{color:se,children:"Password"}),(0,Y.jsxs)(U.M,{children:[(0,Y.jsx)(M.p,{type:ve?"text":"password",placeholder:"Enter password",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:be,onChange:e=>je(e.target.value),fontFamily:"mono"}),(0,Y.jsx)(A.t,{width:{base:"4rem",md:"6rem"},children:(0,Y.jsxs)(W.z,{spacing:1,children:[(0,Y.jsx)(v.K,{size:{base:"xs",md:"sm"},variant:"ghost","aria-label":"Toggle password",icon:ve?(0,Y.jsx)(D.O,{}):(0,Y.jsx)(R.t,{}),onClick:()=>fe(!ve),minW:"32px",minH:"32px",display:{base:"none",sm:"flex"}}),(0,Y.jsx)(v.K,{size:{base:"xs",md:"sm"},variant:"ghost","aria-label":"Generate password",icon:(0,Y.jsx)(L.H,{}),onClick:()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";let r="";for(let o=0;o<16;o++)r+=e.charAt(Math.floor(88*Math.random()));je(r),a({title:"Password generated",status:"info",duration:2e3})},minW:"32px",minH:"32px"}),be&&(0,Y.jsx)(v.K,{size:{base:"xs",md:"sm"},variant:"ghost","aria-label":"Copy password",icon:(0,Y.jsx)(I.T,{}),onClick:()=>qe(be,"Password"),minW:"32px",minH:"32px",display:{base:"none",sm:"flex"}})]})})]}),(0,Y.jsx)(k.eK,{color:ae,children:"Use the generate button for a secure password"})]})})]})]}),(0,Y.jsx)(y.c,{borderColor:p}),(0,Y.jsxs)(b.a,{children:[(0,Y.jsx)(H.T,{spacing:4,align:"stretch",mb:4,children:(0,Y.jsxs)(W.z,{justify:"space-between",children:[(0,Y.jsx)(_.E,{color:se,fontSize:{base:"md",md:"lg"},fontWeight:"bold",children:"Two-Factor Authentication"}),(0,Y.jsx)(K.d,{isChecked:Ke,onChange:e=>ze(e.target.checked),colorScheme:"purple"})]})}),Ke&&(0,Y.jsxs)(P.x,{templateColumns:"repeat(1, 1fr)",gap:4,children:[(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"2FA Secret Key"}),(0,Y.jsxs)(U.M,{children:[(0,Y.jsx)(M.p,{placeholder:"JBSWY3DPEHPK3PXP...",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:we,onChange:e=>Ce(e.target.value),fontFamily:"mono"}),we&&(0,Y.jsx)(A.t,{children:(0,Y.jsx)(v.K,{size:{base:"xs",md:"sm"},variant:"ghost","aria-label":"Copy 2FA",icon:(0,Y.jsx)(I.T,{}),onClick:()=>qe(we,"2FA Secret"),minW:"32px",minH:"32px"})})]}),(0,Y.jsx)(k.eK,{color:ae,children:"TOTP secret for authenticator apps"})]}),(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Backup Codes"}),(0,Y.jsx)(z.T,{placeholder:"Enter backup codes, one per line or comma-separated",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:Se,onChange:e=>ye(e.target.value),rows:3}),(0,Y.jsx)(k.eK,{color:ae,children:"One-time use backup codes"})]})]})]}),(0,Y.jsx)(y.c,{borderColor:p}),(0,Y.jsxs)(b.a,{children:[(0,Y.jsx)(_.E,{color:se,fontSize:{base:"md",md:"lg"},fontWeight:"bold",mb:4,children:"Additional Settings"}),(0,Y.jsxs)(H.T,{spacing:4,align:"stretch",children:[(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Notes (Optional)"}),(0,Y.jsx)(z.T,{placeholder:"Any special instructions or notes...",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,_placeholder:{color:ae},value:ke,onChange:e=>Ee(e.target.value),rows:4}),(0,Y.jsx)(k.eK,{color:ae,children:"Additional information or instructions"})]}),(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(H.T,{spacing:2,align:"stretch",children:(0,Y.jsxs)(W.z,{justify:"space-between",children:[(0,Y.jsx)(E.l,{color:se,mb:0,children:"Password Expiration"}),(0,Y.jsx)(K.d,{isChecked:Ae,onChange:e=>Ne(e.target.checked),colorScheme:"orange"})]})}),Ae&&(0,Y.jsx)(M.p,{type:"datetime-local",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,value:We,onChange:e=>He(e.target.value),min:(new Date).toISOString().slice(0,16)}),(0,Y.jsx)(k.eK,{color:ae,children:"Set an expiration date for this password"})]}),(0,Y.jsx)(y.c,{borderColor:p}),(0,Y.jsxs)(k.MJ,{children:[(0,Y.jsx)(E.l,{color:se,children:"Instructional Videos (Optional)"}),(0,Y.jsxs)(H.T,{spacing:3,align:"stretch",children:[(0,Y.jsx)(N.l,{placeholder:"Select a video to add",bg:"light"===l?"white":"rgba(255, 255, 255, 0.05)",borderColor:p,color:se,onChange:e=>{var r;const o=null===De||void 0===De||null===(r=De.myIPFSVideos)||void 0===r?void 0:r.find(r=>r.id===e.target.value);o&&!Je.find(e=>e.ipfsHash===o.ipfsHash)&&(Fe([...Je,{ipfsHash:o.ipfsHash,title:o.title,description:o.description}]),e.target.value="")},disabled:Le,children:null===De||void 0===De||null===(o=De.myIPFSVideos)||void 0===o?void 0:o.filter(e=>!Je.find(r=>r.ipfsHash===e.ipfsHash)).map(e=>(0,Y.jsx)("option",{value:e.id,children:e.title},e.id))}),Je.length>0&&(0,Y.jsx)(H.T,{spacing:2,align:"stretch",children:Je.map((e,r)=>(0,Y.jsxs)(W.z,{p:3,bg:"light"===l?"gray.50":"rgba(255, 255, 255, 0.05)",borderRadius:"md",borderWidth:"1px",borderColor:p,justify:"space-between",children:[(0,Y.jsxs)(H.T,{align:"start",spacing:0,flex:1,children:[(0,Y.jsxs)(_.E,{color:se,fontWeight:"medium",fontSize:"sm",children:[r+1,". ",e.title]}),e.description&&(0,Y.jsx)(_.E,{color:ae,fontSize:"xs",noOfLines:1,children:e.description})]}),(0,Y.jsx)(v.K,{size:"sm",variant:"ghost","aria-label":"Remove video",icon:(0,Y.jsx)(V.U,{}),onClick:()=>{Fe(Je.filter(r=>r.ipfsHash!==e.ipfsHash))}})]},e.ipfsHash))})]}),(0,Y.jsx)(k.eK,{color:ae,children:"Add IPFS videos to show users how to use this password (e.g., login process, 2FA setup)"})]})]})]}),(0,Y.jsx)(y.c,{borderColor:p}),(0,Y.jsxs)(H.T,{spacing:4,align:"stretch",direction:{base:"column",md:"row"},justify:{base:"stretch",md:"flex-end"},children:[(0,Y.jsx)(j.$,{variant:"outline",borderColor:p,color:se,onClick:()=>s("/passwords/admin"),width:{base:"100%",md:"auto"},minW:{md:"120px"},children:"Cancel"}),(0,Y.jsx)(j.$,{type:"submit",bg:le,color:"white",_hover:{bg:ie},isLoading:Ge,loadingText:"Issuing...",leftIcon:(0,Y.jsx)(O.R,{}),width:{base:"100%",md:"auto"},minW:{md:"150px"},children:"Create Password"})]}),(0,Y.jsxs)(x.F,{status:"info",borderRadius:"md",bg:"rgba(59, 130, 246, 0.1)",borderColor:"blue.500",border:"1px",children:[(0,Y.jsx)(m._,{color:"blue.500"}),(0,Y.jsx)(g.T,{color:se,children:(0,Y.jsx)(_.E,{fontSize:"sm",children:"This password will be saved securely. Users you share it with will receive an email notification and can access it from their dashboard."})})]})]})})})})]})}),(0,Y.jsx)(B.n,{})]})}}}]);
//# sourceMappingURL=8297.5bab405f.chunk.js.map