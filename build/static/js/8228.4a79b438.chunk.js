"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[8228],{13241:(e,s,r)=>{r.d(s,{O:()=>n});var o=r(70579);const n=(0,r(14010).w)({displayName:"ViewOffIcon",path:(0,o.jsxs)("g",{fill:"currentColor",children:[(0,o.jsx)("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),(0,o.jsx)("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})})},18228:(e,s,r)=>{r.r(s),r.d(s,{default:()=>Xe});var o=r(89379),n=r(57528),i=r(65043),l=r(10585),d=r(31881),a=r(70459),c=r(73216),t=r(30502),x=r(44093),h=r(96870),p=r(22107),m=r(98939),j=r(10202),u=r(28846),b=r(98662),v=r(73212),g=r(83169),w=r(24330),f=r(94217),C=r(53332),y=r(78149),A=r(94085),E=r(45973),S=r(29244),z=r(35699),k=r(96148),W=r(61724),T=r(76659),N=r(88787),I=r(85871),L=r(80511),D=r(3313),U=r(55395),P=r(83201),$=r(82595),_=r(67813),M=r(39081),B=r(42703),H=r(25011),O=r(87139),F=r(80045),G=r(70579),K=r(56294),R=r(44881),Z=r(13019),J=r(64765),q=r(27024),V=r(55003),X=r(36059),Y=r(77971);const Q=["children","borderColor","max","spacing","borderRadius"],ee=(0,V.R)(function(e,s){const r=(0,X.o)("Avatar",e),n=(0,K.M)(e),{children:l,borderColor:d,max:a,spacing:c="-0.75rem",borderRadius:t="full"}=n,x=(0,F.A)(n,Q),h=(0,R.a)(l),p=null!=a?h.slice(0,a):h,m=null!=a?h.length-a:0,j=p.reverse().map((s,r)=>{var o;const n={marginEnd:0===r?0:c,size:e.size,borderColor:null!==(o=s.props.borderColor)&&void 0!==o?o:d,showBorder:!0};return(0,i.cloneElement)(s,(0,Z.o)(n))}),u=(0,o.A)({display:"flex",alignItems:"center",justifyContent:"flex-end",flexDirection:"row-reverse"},r.group),b=(0,o.A)((0,o.A)({borderRadius:t,marginStart:c},q.B),r.excessLabel);return(0,G.jsxs)(Y.B.div,(0,o.A)((0,o.A)({ref:s,role:"group",__css:u},x),{},{className:(0,J.cx)("chakra-avatar__group",e.className),children:[m>0&&(0,G.jsx)(Y.B.span,{className:"chakra-avatar__excess",__css:b,children:"+".concat(m)}),j]}))});ee.displayName="AvatarGroup";var se,re,oe,ne,ie,le,de,ae,ce=r(47726),te=r(59883),xe=r(86236),he=r(91872),pe=r(53560),me=r(67639),je=r(78460),ue=r(11054),be=r(25722),ve=r(15071),ge=r(35929),we=r(67516),fe=r(82459),Ce=r(56529),ye=r(68455),Ae=r(12730),Ee=r(12733),Se=r(25624),ze=r(99973),ke=r(80810),We=r(13241),Te=r(55206),Ne=r(5874),Ie=r(26602),Le=r(42128),De=r(58584),Ue=r(85369),Pe=r(39985),$e=r(52003),_e=r(63295),Me=r(95214),Be=r(73892),He=r(80454),Oe=r(66037);const Fe=(0,a.J1)(se||(se=(0,n.A)(["\n    query GetAllPasswords {\n        passwords {\n            id\n            serviceName\n            loginUrl\n            dashboardUrl\n            username\n            email\n            password\n            twoFactorSecret\n            twoFactorBackupCodes\n            notes\n            isActive\n            expiresAt\n            createdAt\n            updatedAt\n            createdBy {\n                id\n                fName\n                lName\n                email\n            }\n            company {\n                id\n                name\n            }\n            sharedWithEmployees\n            sharedWithExternal\n        }\n    }\n"]))),Ge=(0,a.J1)(re||(re=(0,n.A)(["\n    query GetPasswordAccessLogs($passwordId: ID!) {\n        passwordAccessLogs(passwordId: $passwordId) {\n            id\n            passwordId\n            accessedBy {\n                id\n                fName\n                lName\n                email\n            }\n            accessedAt\n            ipAddress\n            userAgent\n        }\n    }\n"]))),Ke=(0,a.J1)(oe||(oe=(0,n.A)(["\n    mutation DeactivatePassword($id: ID!) {\n        deactivatePassword(id: $id)\n    }\n"]))),Re=(0,a.J1)(ne||(ne=(0,n.A)(["\n    mutation SharePassword($id: ID!, $clientIds: [ID!]!) {\n        sharePassword(id: $id, clientIds: $clientIds) {\n            id\n            sharedWithEmployees\n            sharedWithExternal\n        }\n    }\n"]))),Ze=(0,a.J1)(ie||(ie=(0,n.A)(["\n    mutation GeneratePasswordLink($passwordId: ID!, $expiresInHours: Float!) {\n        generatePasswordLink(passwordId: $passwordId, expiresInHours: $expiresInHours)\n    }\n"]))),Je=(0,a.J1)(le||(le=(0,n.A)(["\n    mutation UpdatePassword($id: ID!, $input: PasswordUpdateInput!) {\n        updatePassword(id: $id, input: $input) {\n            id\n            company {\n                id\n                name\n            }\n        }\n    }\n"]))),qe=(0,a.J1)(de||(de=(0,n.A)(["\n    query GetClients {\n        clients {\n            id\n            fName\n            lName\n            email\n            phoneNumber\n        }\n    }\n"]))),Ve=(0,a.J1)(ae||(ae=(0,n.A)(["\n    query GetCompanies {\n        companies {\n            id\n            name\n            tradingName\n            abn\n        }\n    }\n"]))),Xe=()=>{var e,s,r,n,a,F,K,R,Z,J;(0,Oe.H)("Passwords");const V=(0,c.Zp)(),X=(0,t.d)(),{colorMode:Y}=(0,x.G6)(),{isOpen:Q,onOpen:se,onClose:re}=(0,h.j)(),{isOpen:oe,onOpen:ne,onClose:ie}=(0,h.j)(),{isOpen:le,onOpen:de,onClose:ae}=(0,h.j)(),{isOpen:Xe,onOpen:Ye,onClose:Qe}=(0,h.j)(),es=i.useRef(),[ss,rs]=(0,i.useState)(""),[os,ns]=(0,i.useState)("all"),[is,ls]=(0,i.useState)(null),[ds,as]=(0,i.useState)({}),[cs,ts]=(0,i.useState)([]),[xs,hs]=(0,i.useState)(24),[ps,ms]=(0,i.useState)({}),[js,us]=(0,i.useState)({}),bs=(0,Pe.oU)("background.main",Y),vs=(0,Pe.oU)("background.cardGradient",Y),gs=(0,Pe.oU)("border.darkCard",Y),ws=(0,Pe.oU)("light"===Y?"text.primary":"text.primaryDark",Y),fs=(0,Pe.oU)("light"===Y?"text.secondary":"text.secondaryDark",Y),Cs=(0,Pe.oU)("light"===Y?"text.muted":"text.mutedDark",Y),ys=(0,Pe.oU)("primary",Y),As=(0,Pe.oU)("primaryHover",Y),Es=(0,Pe.oU)("successGreen",Y),Ss=(0,Pe.oU)("status.error",Y),zs=((0,Pe.oU)("status.warning",Y),(0,Pe.oU)("status.info",Y)),{data:ks,loading:Ws,error:Ts,refetch:Ns}=(0,l.IT)(Fe),{data:Is}=(0,l.IT)(qe),{data:Ls}=(0,l.IT)(Ve),{data:Ds,loading:Us,refetch:Ps}=(0,l.IT)(Ge,{variables:{passwordId:(null===is||void 0===is?void 0:is.id)||""},skip:!(null!==is&&void 0!==is&&is.id)}),[$s]=(0,d.n)(Ke,{onCompleted:()=>{X({title:"Password deactivated",status:"success",duration:3e3}),Ns(),Qe()},onError:e=>{X({title:"Error deactivating password",description:e.message,status:"error",duration:3e3})}}),[_s]=(0,d.n)(Re,{onCompleted:()=>{X({title:"Password shared successfully",status:"success",duration:3e3}),Ns(),ie(),ts([])}}),[Ms]=(0,d.n)(Je,{onCompleted:()=>{X({title:"Password updated",status:"success",duration:3e3}),Ns()},onError:e=>{X({title:"Error updating password",description:e.message,status:"error",duration:3e3})}}),[Bs]=(0,d.n)(Ze,{onCompleted:e=>{navigator.clipboard.writeText(e.generatePasswordLink),X({title:"Secure link generated and copied",description:"Link expires in ".concat(xs," hours"),status:"success",duration:5e3})}}),Hs=null===ks||void 0===ks||null===(e=ks.passwords)||void 0===e?void 0:e.filter(e=>{var s,r,o,n;const i=e.serviceName.toLowerCase().includes(ss.toLowerCase())||(null===(s=e.company)||void 0===s||null===(r=s.name)||void 0===r?void 0:r.toLowerCase().includes(ss.toLowerCase()))||"".concat((null===(o=e.createdBy)||void 0===o?void 0:o.fName)||""," ").concat((null===(n=e.createdBy)||void 0===n?void 0:n.lName)||"").trim().toLowerCase().includes(ss.toLowerCase()),l=!!e.expiresAt&&new Date(e.expiresAt)<new Date,d="all"===os||"active"===os&&e.isActive&&!l||"expired"===os&&(l||!e.isActive);return i&&d}),Os=(null===ks||void 0===ks||null===(s=ks.passwords)||void 0===s?void 0:s.length)||0,Fs=(null===ks||void 0===ks||null===(r=ks.passwords)||void 0===r?void 0:r.filter(e=>e.isActive&&(!e.expiresAt||new Date(e.expiresAt)>new Date)).length)||0,Gs=(null===ks||void 0===ks||null===(n=ks.passwords)||void 0===n?void 0:n.filter(e=>e.expiresAt&&new Date(e.expiresAt)<new Date).length)||0,Ks=(null===ks||void 0===ks||null===(a=ks.passwords)||void 0===a?void 0:a.filter(e=>e.sharedWithEmployees&&e.sharedWithEmployees.length>0||e.sharedWithExternal&&e.sharedWithExternal.length>0).length)||0,Rs=e=>{ls(e);const s=[...e.sharedWithEmployees||[],...e.sharedWithExternal||[]];ts(s),ne()},Zs=e=>!!e&&new Date(e)<new Date;return(0,G.jsxs)(p.a,{bg:bs,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,G.jsx)($e.m,{}),(0,G.jsx)(Me.y,{moduleConfig:Be.default}),(0,G.jsx)(m.m,{maxW:{base:"container.sm",lg:"container.xl"},px:{base:4,md:8},py:{base:6,md:8},flex:"1",children:(0,G.jsxs)(j.T,{spacing:{base:4,md:6},align:"stretch",children:[(0,G.jsxs)(j.T,{spacing:4,align:"stretch",children:[(0,G.jsx)(j.T,{align:"start",spacing:2,children:(0,G.jsx)(u.D,{color:ws,fontFamily:Pe.Kk.fonts.heading,size:{base:"md",md:"lg"},children:"Password Management (Admin)"})}),(0,G.jsx)(p.a,{display:"flex",justifyContent:{base:"stretch",md:"flex-end"},children:(0,G.jsx)(b.$,{bg:ys,color:"white",_hover:{bg:As},leftIcon:(0,G.jsx)(Ae.R,{}),onClick:()=>V("/passwords/new"),width:{base:"100%",md:"auto"},minW:{md:"180px"},children:"Issue New Password"})})]}),(0,G.jsxs)(v.r,{columns:{base:2,md:4},spacing:{base:4,md:6},children:[(0,G.jsx)(g.Z,{bg:vs,borderColor:gs,border:"1px",children:(0,G.jsx)(w.b,{children:(0,G.jsxs)(f.r,{children:[(0,G.jsx)(C.v,{color:Cs,children:"Total Passwords"}),(0,G.jsx)(y.k,{color:ws,fontSize:{base:"lg",md:"2xl"},children:Os}),(0,G.jsx)(A.h,{color:Cs,children:"All issued passwords"})]})})}),(0,G.jsx)(g.Z,{bg:vs,borderColor:gs,border:"1px",children:(0,G.jsx)(w.b,{children:(0,G.jsxs)(f.r,{children:[(0,G.jsx)(C.v,{color:Cs,children:"Active"}),(0,G.jsx)(y.k,{color:Es,fontSize:{base:"lg",md:"2xl"},children:Fs}),(0,G.jsx)(A.h,{color:Cs,children:"Currently valid"})]})})}),(0,G.jsx)(g.Z,{bg:vs,borderColor:gs,border:"1px",children:(0,G.jsx)(w.b,{children:(0,G.jsxs)(f.r,{children:[(0,G.jsx)(C.v,{color:Cs,children:"Expired"}),(0,G.jsx)(y.k,{color:Ss,fontSize:{base:"lg",md:"2xl"},children:Gs}),(0,G.jsx)(A.h,{color:Cs,children:"Need renewal"})]})})}),(0,G.jsx)(g.Z,{bg:vs,borderColor:gs,border:"1px",children:(0,G.jsx)(w.b,{children:(0,G.jsxs)(f.r,{children:[(0,G.jsx)(C.v,{color:Cs,children:"Shared"}),(0,G.jsx)(y.k,{color:zs,fontSize:{base:"lg",md:"2xl"},children:Ks}),(0,G.jsx)(A.h,{color:Cs,children:"Team access"})]})})})]}),(0,G.jsxs)(j.T,{spacing:4,align:"stretch",children:[(0,G.jsxs)(E.M,{maxW:{base:"100%",md:"400px"},children:[(0,G.jsx)(S.W,{pointerEvents:"none",children:(0,G.jsx)(Ee.W,{color:Cs})}),(0,G.jsx)(z.p,{placeholder:"Search passwords...",bg:"light"===Y?"white":"rgba(255, 255, 255, 0.05)",borderColor:gs,color:ws,_placeholder:{color:Cs},value:ss,onChange:e=>rs(e.target.value)})]}),(0,G.jsxs)(k.z,{spacing:4,direction:{base:"column",md:"row"},width:{base:"100%",md:"auto"},children:[(0,G.jsxs)(W.l,{maxW:{base:"100%",md:"200px"},bg:"light"===Y?"white":"rgba(255, 255, 255, 0.05)",borderColor:gs,color:ws,value:os,onChange:e=>ns(e.target.value),children:[(0,G.jsx)("option",{value:"all",children:"All Status"}),(0,G.jsx)("option",{value:"active",children:"Active Only"}),(0,G.jsx)("option",{value:"expired",children:"Expired/Inactive"})]}),(0,G.jsx)(b.$,{variant:"outline",borderColor:gs,color:ws,leftIcon:(0,G.jsx)(Se.H,{}),onClick:()=>Ns(),width:{base:"100%",md:"auto"},children:"Refresh"})]})]}),Ws&&(0,G.jsx)(p.a,{textAlign:"center",py:8,children:(0,G.jsx)(T.y,{size:"xl",color:ys})}),Ts&&(0,G.jsxs)(N.F,{status:"error",borderRadius:"md",children:[(0,G.jsx)(I._,{}),"Error loading passwords: ",Ts.message]}),ks&&(0,G.jsx)(g.Z,{bg:vs,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:gs,borderRadius:"lg",overflow:"visible",children:(0,G.jsxs)(w.b,{p:0,minH:"400px",children:[(0,G.jsx)(p.a,{overflowX:"auto",overflowY:"visible",width:"100%",children:(0,G.jsxs)(L.X,{variant:"simple",size:{base:"sm",md:"md"},minWidth:"1000px",children:[(0,G.jsx)(D.d,{position:"sticky",top:0,bg:vs,children:(0,G.jsxs)(U.Tr,{borderBottom:"1px",borderColor:gs,children:[(0,G.jsx)(P.Th,{color:Cs,borderColor:gs,minW:"140px",px:{base:2,md:4},fontSize:{base:"xs",md:"sm"},children:"Service"}),(0,G.jsx)(P.Th,{color:Cs,borderColor:gs,minW:"160px",px:{base:2,md:4},fontSize:{base:"xs",md:"sm"},display:{base:"none",md:"table-cell"},children:"Company"}),(0,G.jsx)(P.Th,{color:Cs,borderColor:gs,minW:"140px",px:{base:2,md:4},fontSize:{base:"xs",md:"sm"},children:"Credentials"}),(0,G.jsx)(P.Th,{color:Cs,borderColor:gs,minW:"100px",px:{base:2,md:4},fontSize:{base:"xs",md:"sm"},children:"Status"}),(0,G.jsx)(P.Th,{color:Cs,borderColor:gs,minW:"100px",px:{base:2,md:4},fontSize:{base:"xs",md:"sm"},display:{base:"none",lg:"table-cell"},children:"Sharing"}),(0,G.jsx)(P.Th,{color:Cs,borderColor:gs,minW:"140px",px:{base:2,md:4},fontSize:{base:"xs",md:"sm"},children:"Actions"})]})}),(0,G.jsx)($.N,{children:null===Hs||void 0===Hs?void 0:Hs.map(e=>{var s,r,n,i,l,d,a,c,t,x,h;return(0,G.jsxs)(U.Tr,{borderBottom:"1px",borderColor:gs,children:[(0,G.jsx)(_.Td,{borderColor:gs,px:{base:2,md:4},children:(0,G.jsxs)(j.T,{align:"start",spacing:1,children:[(0,G.jsx)(M.E,{color:ws,fontWeight:"bold",fontSize:{base:"xs",md:"sm"},children:e.serviceName}),(0,G.jsxs)(M.E,{color:Cs,fontSize:"xs",children:["Created ",(0,He.GP)(new Date(e.createdAt),"MMM dd, yyyy")]}),(0,G.jsxs)(p.a,{display:{base:"block",md:"none"},children:[e.company&&(0,G.jsxs)(M.E,{color:ws,fontSize:"xs",children:["Company: ",e.company.name]}),((null===(s=e.sharedWithEmployees)||void 0===s?void 0:s.length)||0)+((null===(r=e.sharedWithExternal)||void 0===r?void 0:r.length)||0)>0&&(0,G.jsxs)(M.E,{color:Cs,fontSize:"xs",children:["Shared with ",((null===(n=e.sharedWithEmployees)||void 0===n?void 0:n.length)||0)+((null===(i=e.sharedWithExternal)||void 0===i?void 0:i.length)||0)," users"]})]})]})}),(0,G.jsx)(_.Td,{borderColor:gs,px:{base:2,md:4},display:{base:"none",md:"table-cell"},children:(0,G.jsxs)(j.T,{align:"start",spacing:1,children:[ps[e.id]?(0,G.jsxs)(k.z,{spacing:2,children:[(0,G.jsxs)(W.l,{size:"sm",bg:"light"===Y?"white":"rgba(255, 255, 255, 0.05)",borderColor:gs,color:ws,value:js[e.id]||(null===(l=e.company)||void 0===l?void 0:l.id)||"",onChange:s=>us((0,o.A)((0,o.A)({},js),{},{[e.id]:s.target.value})),width:"140px",children:[(0,G.jsx)("option",{value:"",children:"No company"}),null===Ls||void 0===Ls||null===(d=Ls.companies)||void 0===d?void 0:d.map(e=>(0,G.jsx)("option",{value:e.id,children:e.tradingName||e.name},e.id))]}),(0,G.jsx)(B.K,{size:"xs",colorScheme:"green","aria-label":"Save",icon:(0,G.jsx)(H.I,{viewBox:"0 0 24 24",children:(0,G.jsx)("path",{fill:"currentColor",d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})}),onClick:async()=>{const s=js[e.id]||"";await Ms({variables:{id:e.id,input:{company:s||null}}}),ms((0,o.A)((0,o.A)({},ps),{},{[e.id]:!1})),delete js[e.id]}}),(0,G.jsx)(B.K,{size:"xs",variant:"ghost","aria-label":"Cancel",icon:(0,G.jsx)(H.I,{viewBox:"0 0 24 24",children:(0,G.jsx)("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})}),onClick:()=>{ms((0,o.A)((0,o.A)({},ps),{},{[e.id]:!1})),delete js[e.id]}})]}):(0,G.jsxs)(k.z,{spacing:2,children:[(0,G.jsx)(M.E,{color:e.company?ws:Cs,fontSize:"sm",cursor:"pointer",onClick:()=>{var s;ms((0,o.A)((0,o.A)({},ps),{},{[e.id]:!0})),us((0,o.A)((0,o.A)({},js),{},{[e.id]:(null===(s=e.company)||void 0===s?void 0:s.id)||""}))},_hover:{textDecoration:"underline"},children:(null===(a=e.company)||void 0===a?void 0:a.name)||"No company"}),(0,G.jsx)(B.K,{size:"xs",variant:"ghost","aria-label":"Edit company",icon:(0,G.jsx)(ze.q,{}),onClick:()=>{var s;ms((0,o.A)((0,o.A)({},ps),{},{[e.id]:!0})),us((0,o.A)((0,o.A)({},js),{},{[e.id]:(null===(s=e.company)||void 0===s?void 0:s.id)||""}))}})]}),((null===(c=e.sharedWithEmployees)||void 0===c?void 0:c.length)||0)+((null===(t=e.sharedWithExternal)||void 0===t?void 0:t.length)||0)>0&&(0,G.jsxs)(O.E,{colorScheme:"purple",size:"sm",children:[((null===(x=e.sharedWithEmployees)||void 0===x?void 0:x.length)||0)+((null===(h=e.sharedWithExternal)||void 0===h?void 0:h.length)||0)," users"]})]})}),(0,G.jsx)(_.Td,{borderColor:gs,px:{base:2,md:4},children:(0,G.jsxs)(j.T,{align:"start",spacing:1,children:[e.email&&(0,G.jsxs)(k.z,{children:[(0,G.jsx)(M.E,{color:fs,fontSize:{base:"xs",md:"sm"},noOfLines:1,children:e.email}),(0,G.jsx)(B.K,{size:"xs",variant:"ghost","aria-label":"Copy",icon:(0,G.jsx)(ke.T,{}),onClick:()=>{return s=e.email,r="Email",navigator.clipboard.writeText(s),void X({title:"".concat(r," copied"),status:"success",duration:2e3});var s,r},minW:"32px",minH:"32px"})]}),(0,G.jsxs)(k.z,{children:[(0,G.jsx)(M.E,{color:ws,fontFamily:"mono",fontSize:{base:"xs",md:"sm"},children:ds[e.id]?e.password.substring(0,20)+"...":"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,G.jsx)(B.K,{size:"xs",variant:"ghost","aria-label":"Toggle",icon:ds[e.id]?(0,G.jsx)(We.O,{}):(0,G.jsx)(Te.t,{}),onClick:()=>{return s=e.id,void as(e=>(0,o.A)((0,o.A)({},e),{},{[s]:!e[s]}));var s},minW:"32px",minH:"32px"})]})]})}),(0,G.jsx)(_.Td,{borderColor:gs,px:{base:2,md:4},children:(0,G.jsxs)(j.T,{align:"start",spacing:1,children:[e.isActive?e.expiresAt&&Zs(e.expiresAt)?(0,G.jsx)(O.E,{colorScheme:"orange",fontSize:{base:"xs",md:"sm"},children:"Expired"}):(0,G.jsx)(O.E,{colorScheme:"green",fontSize:{base:"xs",md:"sm"},children:"Active"}):(0,G.jsx)(O.E,{colorScheme:"red",fontSize:{base:"xs",md:"sm"},children:"Inactive"}),e.expiresAt&&!Zs(e.expiresAt)&&(0,G.jsxs)(M.E,{color:Cs,fontSize:"xs",children:["Expires ",(0,He.GP)(new Date(e.expiresAt),"MMM dd")]}),e.twoFactorSecret&&(0,G.jsx)(O.E,{colorScheme:"blue",size:"sm",fontSize:"xs",children:"2FA"})]})}),(0,G.jsx)(_.Td,{borderColor:gs,px:{base:2,md:4},display:{base:"none",lg:"table-cell"},children:(()=>{const s=[...e.sharedWithEmployees||[],...e.sharedWithExternal||[]];return s.length>0?(0,G.jsx)(ee,{size:"xs",max:3,children:s.map(e=>{var s;const r=null===Is||void 0===Is||null===(s=Is.clients)||void 0===s?void 0:s.find(s=>s.id===e);return(0,G.jsx)(ce.m,{label:(null===r||void 0===r?void 0:r.name)||"Unknown",children:(0,G.jsx)(q.e,{name:null===r||void 0===r?void 0:r.name,size:"xs"})},e)})}):(0,G.jsx)(M.E,{color:Cs,fontSize:"xs",children:"Not shared"})})()}),(0,G.jsx)(_.Td,{borderColor:gs,px:{base:1,md:4},children:(0,G.jsx)(j.T,{spacing:1,children:(0,G.jsxs)(k.z,{spacing:1,children:[(0,G.jsx)(ce.m,{label:"View Details",children:(0,G.jsx)(B.K,{size:"xs",variant:"ghost","aria-label":"Details",icon:(0,G.jsx)(Te.t,{}),onClick:()=>(e=>{ls(e),se()})(e),minW:"32px",minH:"32px"})}),(0,G.jsx)(ce.m,{label:"Share",children:(0,G.jsx)(B.K,{size:"xs",variant:"ghost","aria-label":"Share",icon:(0,G.jsx)(H.I,{as:Ue.Zzu}),onClick:()=>Rs(e),minW:"32px",minH:"32px",display:{base:"none",md:"flex"}})}),(0,G.jsxs)(te.W,{children:[(0,G.jsx)(xe.I,{as:B.K,size:"xs",variant:"ghost",icon:(0,G.jsx)(Ne.D,{}),minW:"32px",minH:"32px"}),(0,G.jsxs)(he.c,{bg:vs,borderColor:gs,zIndex:1e3,position:"relative",children:[(0,G.jsx)(pe.D,{icon:(0,G.jsx)(H.I,{as:Ue.Zzu}),onClick:()=>Rs(e),bg:vs,_hover:{bg:"rgba(255, 255, 255, 0.05)"},color:ws,display:{base:"flex",md:"none"},children:"Share"}),(0,G.jsx)(pe.D,{icon:(0,G.jsx)(Ie.b,{}),onClick:()=>(e=>{ls(e),Ps(),de()})(e),bg:vs,_hover:{bg:"rgba(255, 255, 255, 0.05)"},color:ws,children:(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{children:"Access Logs"}),(0,G.jsx)(M.E,{fontSize:"xs",color:Cs,children:"View who accessed this password"})]})}),(0,G.jsx)(pe.D,{icon:(0,G.jsx)(Le.p,{}),onClick:()=>(async e=>{await Bs({variables:{passwordId:e.id,expiresInHours:xs}})})(e),bg:vs,_hover:{bg:"rgba(255, 255, 255, 0.05)"},color:ws,children:(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{children:"Generate Access Link"}),(0,G.jsx)(M.E,{fontSize:"xs",color:Cs,children:"Create a secure link for SMS sharing"})]})}),(0,G.jsx)(pe.D,{icon:(0,G.jsx)(ze.q,{}),onClick:()=>V("/password/".concat(e.id,"/edit")),bg:vs,_hover:{bg:"rgba(255, 255, 255, 0.05)"},color:ws,children:(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{children:"Edit"}),(0,G.jsx)(M.E,{fontSize:"xs",color:Cs,children:"Update password details"})]})}),(0,G.jsx)(me.N,{borderColor:gs}),(0,G.jsx)(pe.D,{icon:(0,G.jsx)(De.d,{}),onClick:()=>(e=>{ls(e),Ye()})(e),bg:vs,_hover:{bg:"rgba(255, 255, 255, 0.05)"},color:Ss,children:(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Ss,children:"Deactivate"}),(0,G.jsx)(M.E,{fontSize:"xs",color:Cs,children:"Remove this password"})]})})]})]})]})})})]},e.id)})})]})}),0===(null===Hs||void 0===Hs?void 0:Hs.length)&&(0,G.jsx)(p.a,{textAlign:"center",py:8,children:(0,G.jsx)(M.E,{color:Cs,children:"No passwords found"})})]})})]})}),(0,G.jsxs)(je.aF,{isOpen:Q,onClose:re,size:{base:"full",md:"xl"},children:[(0,G.jsx)(ue.m,{bg:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"}),(0,G.jsxs)(be.$,{bg:vs,borderColor:gs,border:"1px solid",children:[(0,G.jsx)(ve.r,{color:ws,fontFamily:Pe.Kk.fonts.heading,children:null===is||void 0===is?void 0:is.serviceName}),(0,G.jsx)(ge.s,{color:ws}),(0,G.jsx)(we.c,{children:is&&(0,G.jsxs)(j.T,{spacing:4,align:"stretch",children:[(0,G.jsxs)(v.r,{columns:{base:1,md:2},spacing:4,children:[(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",children:"Company"}),(0,G.jsx)(M.E,{color:ws,children:(null===(F=is.company)||void 0===F?void 0:F.name)||"No company"})]}),(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",children:"Created By"}),(0,G.jsx)(M.E,{color:ws,children:"".concat((null===(K=is.createdBy)||void 0===K?void 0:K.fName)||""," ").concat((null===(R=is.createdBy)||void 0===R?void 0:R.lName)||"").trim()||"System"})]}),(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",children:"Created"}),(0,G.jsx)(M.E,{color:ws,children:(0,He.GP)(new Date(is.createdAt),"MMM dd, yyyy HH:mm")})]}),(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",children:"Last Updated"}),(0,G.jsx)(M.E,{color:ws,children:(0,He.GP)(new Date(is.updatedAt),"MMM dd, yyyy HH:mm")})]})]}),(0,G.jsx)(fe.c,{borderColor:gs}),(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",mb:1,children:"Login URL"}),(0,G.jsxs)(k.z,{children:[(0,G.jsx)(M.E,{color:ws,children:is.loginUrl}),(0,G.jsx)(B.K,{size:"sm",variant:"ghost","aria-label":"Open",icon:(0,G.jsx)(Le.p,{}),onClick:()=>is.loginUrl&&window.open(is.loginUrl,"_blank")})]})]}),is.dashboardUrl&&(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",mb:1,children:"Dashboard URL"}),(0,G.jsxs)(k.z,{children:[(0,G.jsx)(M.E,{color:ws,children:is.dashboardUrl}),(0,G.jsx)(B.K,{size:"sm",variant:"ghost","aria-label":"Open",icon:(0,G.jsx)(Le.p,{}),onClick:()=>is.dashboardUrl&&window.open(is.dashboardUrl,"_blank")})]})]}),is.notes&&(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",mb:1,children:"Notes"}),(0,G.jsx)(M.E,{color:ws,whiteSpace:"pre-wrap",children:is.notes})]}),(()=>{const e=[...is.sharedWithEmployees||[],...is.sharedWithExternal||[]];return e.length>0&&(0,G.jsxs)(p.a,{children:[(0,G.jsx)(M.E,{color:Cs,fontSize:"sm",mb:2,children:"Shared With"}),(0,G.jsx)(k.z,{wrap:"wrap",spacing:2,children:e.map(e=>{var s;const r=null===Is||void 0===Is||null===(s=Is.clients)||void 0===s?void 0:s.find(s=>s.id===e);return(0,G.jsx)(O.E,{colorScheme:"purple",px:2,py:1,children:(null===r||void 0===r?void 0:r.name)||"Unknown User"},e)})})]})})()]})}),(0,G.jsx)(Ce.j,{children:(0,G.jsx)(b.$,{variant:"ghost",onClick:re,color:ws,children:"Close"})})]})]}),(0,G.jsxs)(je.aF,{isOpen:oe,onClose:ie,size:{base:"full",md:"md"},children:[(0,G.jsx)(ue.m,{bg:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"}),(0,G.jsxs)(be.$,{bg:vs,borderColor:gs,border:"1px solid",children:[(0,G.jsxs)(ve.r,{color:ws,fontFamily:Pe.Kk.fonts.heading,children:["Share Password: ",null===is||void 0===is?void 0:is.serviceName]}),(0,G.jsx)(ge.s,{color:ws}),(0,G.jsx)(we.c,{children:(0,G.jsxs)(j.T,{spacing:4,align:"stretch",children:[(0,G.jsx)(M.E,{color:fs,children:"Select users who should have access to this password:"}),(0,G.jsx)(W.l,{placeholder:"Add user...",bg:"light"===Y?"white":"rgba(255, 255, 255, 0.05)",borderColor:gs,color:ws,onChange:e=>{e.target.value&&!cs.includes(e.target.value)&&ts([...cs,e.target.value])},children:null===Is||void 0===Is||null===(Z=Is.clients)||void 0===Z?void 0:Z.filter(e=>{var s;const r=[...(null===is||void 0===is?void 0:is.sharedWithEmployees)||[],...(null===is||void 0===is?void 0:is.sharedWithExternal)||[]];return e.id!==(null===is||void 0===is||null===(s=is.createdBy)||void 0===s?void 0:s.id)&&!r.includes(e.id)&&!cs.includes(e.id)}).map(e=>(0,G.jsxs)("option",{value:e.id,children:[e.fName," ",e.lName," (",e.email,")"]},e.id))}),(0,G.jsx)(j.T,{align:"stretch",spacing:2,children:cs.map(e=>{var s;const r=null===Is||void 0===Is||null===(s=Is.clients)||void 0===s?void 0:s.find(s=>s.id===e),o=r?"".concat(r.fName," ").concat(r.lName):"Unknown User";return(0,G.jsxs)(k.z,{justify:"space-between",p:2,bg:"rgba(255, 255, 255, 0.05)",borderRadius:"md",children:[(0,G.jsx)(M.E,{color:ws,children:o}),(0,G.jsx)(B.K,{size:"sm",variant:"ghost","aria-label":"Remove from sharing",icon:(0,G.jsx)(De.d,{}),colorScheme:"red",onClick:()=>ts(cs.filter(s=>s!==e))})]},e)})})]})}),(0,G.jsxs)(Ce.j,{children:[(0,G.jsx)(b.$,{variant:"ghost",mr:3,onClick:ie,color:ws,children:"Cancel"}),(0,G.jsx)(b.$,{bg:ys,color:"white",onClick:async()=>{is&&cs.length>0&&await _s({variables:{id:is.id,clientIds:cs}})},isDisabled:0===cs.length,_hover:{bg:As},children:"Share Password"})]})]})]}),(0,G.jsxs)(je.aF,{isOpen:le,onClose:ae,size:{base:"full",md:"xl"},children:[(0,G.jsx)(ue.m,{bg:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"}),(0,G.jsxs)(be.$,{bg:vs,borderColor:gs,border:"1px solid",children:[(0,G.jsxs)(ve.r,{color:ws,fontFamily:Pe.Kk.fonts.heading,children:["Access Logs: ",null===is||void 0===is?void 0:is.serviceName]}),(0,G.jsx)(ge.s,{color:ws}),(0,G.jsx)(we.c,{children:Us?(0,G.jsx)(T.y,{}):(null===Ds||void 0===Ds||null===(J=Ds.passwordAccessLogs)||void 0===J?void 0:J.length)>0?(0,G.jsxs)(L.X,{variant:"simple",size:"sm",children:[(0,G.jsx)(D.d,{children:(0,G.jsxs)(U.Tr,{children:[(0,G.jsx)(P.Th,{color:Cs,children:"User"}),(0,G.jsx)(P.Th,{color:Cs,children:"Accessed At"}),(0,G.jsx)(P.Th,{color:Cs,children:"IP Address"})]})}),(0,G.jsx)($.N,{children:Ds.passwordAccessLogs.map(e=>(0,G.jsxs)(U.Tr,{children:[(0,G.jsxs)(_.Td,{color:ws,children:[e.accessedBy.fName," ",e.accessedBy.lName,(0,G.jsx)(M.E,{color:Cs,fontSize:"xs",children:e.accessedBy.email})]}),(0,G.jsx)(_.Td,{color:ws,children:(0,He.GP)(new Date(e.accessedAt),"MMM dd, yyyy HH:mm")}),(0,G.jsx)(_.Td,{color:ws,children:e.ipAddress||"Unknown"})]},e.id))})]}):(0,G.jsx)(M.E,{color:Cs,children:"No access logs yet"})}),(0,G.jsx)(Ce.j,{children:(0,G.jsx)(b.$,{variant:"ghost",onClick:ae,color:ws,children:"Close"})})]})]}),(0,G.jsx)(ye.Lt,{isOpen:Xe,leastDestructiveRef:es,onClose:Qe,children:(0,G.jsx)(ue.m,{bg:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",children:(0,G.jsxs)(ye.EO,{bg:vs,borderColor:gs,border:"1px solid",children:[(0,G.jsx)(ve.r,{fontSize:"lg",fontWeight:"bold",color:ws,children:"Deactivate Password"}),(0,G.jsxs)(we.c,{color:fs,children:['Are you sure you want to deactivate the password for "',null===is||void 0===is?void 0:is.serviceName,'"? This will prevent the user from accessing it.']}),(0,G.jsxs)(Ce.j,{children:[(0,G.jsx)(b.$,{ref:es,onClick:Qe,variant:"ghost",color:ws,children:"Cancel"}),(0,G.jsx)(b.$,{colorScheme:"red",onClick:async()=>{is&&await $s({variables:{id:is.id}})},ml:3,children:"Deactivate"})]})]})})}),(0,G.jsx)(_e.n,{})]})}}}]);
//# sourceMappingURL=8228.4a79b438.chunk.js.map