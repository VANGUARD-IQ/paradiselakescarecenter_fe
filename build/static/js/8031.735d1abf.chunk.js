"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[8031],{38031:(e,i,o)=>{o.r(i),o.d(i,{default:()=>R});var s,n,l,d,r=o(57528),t=o(65043),a=o(88787),c=o(85871),h=o(22107),u=o(98662),x=o(42703),p=o(83169),j=o(24330),b=o(26201),v=o(68659),f=o(98939),g=o(82459),m=o(73225),y=o(76668),w=o(35699),C=o(45973),S=o(29244),k=o(76659),V=o(96148),P=o(10202),F=o(98481),H=o(48239),I=o(19077),T=o(30502),A=o(28846),$=o(39081),z=o(58861),B=o(1009),D=o(73216),E=o(31881),_=o(10585),J=o(70459),U=o(52003),M=o(63295),W=o(95214),Z=o(93128),G=o(39985),K=o(66037),O=o(70579);const q=(0,J.J1)(s||(s=(0,r.A)(["\n  query IPFSVideo($id: String!) {\n    ipfsVideo(id: $id) {\n      id\n      title\n      description\n      ipfsHash\n      ipfsUrl\n      thumbnailUrl\n      source\n      fileSize\n      mimeType\n      uploadedBy\n      uploadedByName\n      tags\n      viewCount\n      isPublic\n      isPrivateFile\n      createdAt\n      updatedAt\n    }\n  }\n"]))),L=(0,J.J1)(n||(n=(0,r.A)(["\n  query IPFSVideoByHash($ipfsHash: String!) {\n    ipfsVideoByHash(ipfsHash: $ipfsHash) {\n      id\n      title\n      description\n      ipfsHash\n      ipfsUrl\n      thumbnailUrl\n      source\n      fileSize\n      mimeType\n      uploadedBy\n      uploadedByName\n      tags\n      viewCount\n      isPublic\n      isPrivateFile\n      createdAt\n      updatedAt\n    }\n  }\n"]))),N=(0,J.J1)(l||(l=(0,r.A)(["\n  mutation UpdateIPFSVideo($id: String!, $input: IPFSVideoInput!) {\n    updateIPFSVideo(id: $id, input: $input) {\n      id\n      title\n      description\n      tags\n      isPublic\n      isPrivateFile\n      ipfsUrl\n    }\n  }\n"]))),Q=(0,J.J1)(d||(d=(0,r.A)(["\n  mutation DeleteIPFSVideo($id: String!) {\n    deleteIPFSVideo(id: $id)\n  }\n"]))),R=()=>{(0,K.H)("Edit Video Details");const e=(0,D.Zp)(),{id:i}=(0,D.g)(),o=(0,T.d)(),s=(0,G.oU)("background.main"),n=(0,G.oU)("background.cardGradient"),l=(0,G.oU)("border.darkCard"),d="white",r="gray.300",[J,R]=(0,t.useState)(""),[X,Y]=(0,t.useState)(""),[ee,ie]=(0,t.useState)([]),[oe,se]=(0,t.useState)(""),[ne,le]=(0,t.useState)(!1),[de,re]=(0,t.useState)(!1),[te,ae]=(0,t.useState)(!1),ce=(null===i||void 0===i?void 0:i.startsWith("Qm"))||(null===i||void 0===i?void 0:i.startsWith("baf")),{data:he,loading:ue,error:xe}=(0,_.IT)(ce?L:q,{variables:ce?{ipfsHash:i}:{id:i},skip:!i,onCompleted:e=>{const i=(null===e||void 0===e?void 0:e.ipfsVideo)||(null===e||void 0===e?void 0:e.ipfsVideoByHash);i&&(R(i.title||""),Y(i.description||""),ie(i.tags||[]),le(i.isPublic||!1),re(i.isPrivateFile||!1))}}),[pe]=(0,E.n)(N,{onCompleted:()=>{o({title:"Video updated successfully",status:"success",duration:3e3})},onError:e=>{o({title:"Failed to update video",description:e.message,status:"error",duration:5e3})}}),[je]=(0,E.n)(Q,{onCompleted:()=>{o({title:"Video deleted successfully",status:"success",duration:3e3}),e("/youtubetoipfs")},onError:e=>{o({title:"Failed to delete video",description:e.message,status:"error",duration:5e3}),ae(!1)}}),be=()=>{oe&&!ee.includes(oe)&&(ie([...ee,oe]),se(""))};if(ue)return(0,O.jsxs)(h.a,{bg:s,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,O.jsx)(U.m,{}),(0,O.jsx)(h.a,{flex:"1",children:(0,O.jsx)(f.m,{maxW:"6xl",py:8,children:(0,O.jsx)(v.o,{children:(0,O.jsx)(k.y,{size:"xl",color:d})})})}),(0,O.jsx)(M.n,{})]});const ve=(null===he||void 0===he?void 0:he.ipfsVideo)||(null===he||void 0===he?void 0:he.ipfsVideoByHash);if(xe||!ve)return(0,O.jsxs)(h.a,{bg:s,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,O.jsx)(U.m,{}),(0,O.jsx)(h.a,{flex:"1",children:(0,O.jsx)(f.m,{maxW:"6xl",py:8,children:(0,O.jsx)(v.o,{children:(0,O.jsxs)(P.T,{spacing:4,children:[(0,O.jsx)($.E,{fontSize:"xl",color:r,children:"Video not found or you don't have permission to edit it"}),(0,O.jsx)(u.$,{onClick:()=>e("/youtubetoipfs"),children:"Back to Gallery"})]})})})}),(0,O.jsx)(M.n,{})]});const fe=he.ipfsVideo||he.ipfsVideoByHash;return(0,O.jsxs)(h.a,{bg:s,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,O.jsx)(U.m,{}),(0,O.jsx)(W.y,{moduleConfig:Z.default}),(0,O.jsx)(h.a,{flex:"1",children:(0,O.jsx)(f.m,{maxW:"6xl",py:8,children:(0,O.jsxs)(P.T,{spacing:6,align:"stretch",children:[(0,O.jsxs)(V.z,{justify:"space-between",children:[(0,O.jsx)(u.$,{leftIcon:(0,O.jsx)(B.kRp,{}),variant:"ghost",onClick:()=>e("/youtubetoipfs/video/".concat(i)),children:"Back to Video"}),(0,O.jsxs)(V.z,{children:[(0,O.jsx)(u.$,{leftIcon:(0,O.jsx)(B.Vap,{}),variant:"outline",onClick:()=>window.open("/youtubetoipfs/video/".concat(fe.id),"_blank"),children:"View Public Page"}),(0,O.jsx)(u.$,{leftIcon:(0,O.jsx)(B.Bc_,{}),colorScheme:"blue",onClick:async()=>{const e=(null===he||void 0===he?void 0:he.ipfsVideo)||(null===he||void 0===he?void 0:he.ipfsVideoByHash),i=null===e||void 0===e?void 0:e.id;i?await pe({variables:{id:i,input:{title:J,description:X,tags:ee,isPublic:ne,isPrivateFile:de}}}):o({title:"Error: Video ID not found",status:"error",duration:3e3})},children:"Save Changes"})]})]}),(0,O.jsxs)(p.Z,{bg:n,border:"1px solid",borderColor:l,children:[(0,O.jsx)(b.a,{children:(0,O.jsx)(A.D,{size:"md",color:d,children:"Basic Details"})}),(0,O.jsx)(j.b,{children:(0,O.jsxs)(P.T,{spacing:4,align:"stretch",children:[(0,O.jsxs)(m.MJ,{children:[(0,O.jsx)(y.l,{color:d,children:"Title"}),(0,O.jsx)(w.p,{value:J,onChange:e=>R(e.target.value),placeholder:"Enter video title",bg:"whiteAlpha.100",border:"1px solid",borderColor:l,color:d,_placeholder:{color:r}})]}),(0,O.jsxs)(m.MJ,{children:[(0,O.jsx)(y.l,{color:d,children:"Description"}),(0,O.jsx)(I.T,{value:X,onChange:e=>Y(e.target.value),placeholder:"Enter video description",bg:"whiteAlpha.100",border:"1px solid",borderColor:l,color:d,_placeholder:{color:r},rows:4})]}),(0,O.jsxs)(m.MJ,{children:[(0,O.jsx)(y.l,{color:d,children:"Tags"}),(0,O.jsx)(z.B,{mb:2,children:ee.map(e=>(0,O.jsx)(z.Q,{children:(0,O.jsxs)(H.vw,{size:"md",colorScheme:"blue",children:[(0,O.jsx)(H.d1,{children:e}),(0,O.jsx)(H.TV,{onClick:()=>(e=>{ie(ee.filter(i=>i!==e))})(e)})]})},e))}),(0,O.jsxs)(C.M,{children:[(0,O.jsx)(w.p,{value:oe,onChange:e=>se(e.target.value),onKeyPress:e=>"Enter"===e.key&&be(),placeholder:"Add a tag",bg:"whiteAlpha.100",border:"1px solid",borderColor:l,color:d,_placeholder:{color:r}}),(0,O.jsx)(S.t,{children:(0,O.jsx)(x.K,{icon:(0,O.jsx)(B.GGD,{}),"aria-label":"Add tag",size:"sm",onClick:be})})]})]})]})})]}),(0,O.jsxs)(p.Z,{bg:n,border:"1px solid",borderColor:l,children:[(0,O.jsx)(b.a,{children:(0,O.jsx)(A.D,{size:"md",color:d,children:"Privacy Settings"})}),(0,O.jsx)(j.b,{children:(0,O.jsxs)(P.T,{spacing:4,align:"stretch",children:[(0,O.jsxs)(m.MJ,{children:[(0,O.jsxs)(h.a,{display:"flex",alignItems:"center",children:[(0,O.jsx)(y.l,{htmlFor:"public-switch",mb:"0",color:d,children:(0,O.jsxs)(V.z,{children:[ne?(0,O.jsx)(B.VeH,{}):(0,O.jsx)(B.F5$,{}),(0,O.jsx)($.E,{children:"Make video public"})]})}),(0,O.jsx)(F.d,{id:"public-switch",isChecked:ne,onChange:e=>le(e.target.checked),colorScheme:"green"})]}),(0,O.jsx)(m.eK,{color:r,mt:2,children:ne?"Anyone with the link can view this video without logging in.":"Only you and people you share with can view this video."})]}),(0,O.jsx)(g.c,{borderColor:l}),(0,O.jsxs)(m.MJ,{children:[(0,O.jsxs)(h.a,{display:"flex",alignItems:"center",children:[(0,O.jsx)(y.l,{htmlFor:"private-file-switch",mb:"0",color:d,children:(0,O.jsxs)(V.z,{children:[(0,O.jsx)(B.pcC,{}),(0,O.jsx)($.E,{children:"Private Pinata File"})]})}),(0,O.jsx)(F.d,{id:"private-file-switch",isChecked:de,onChange:e=>re(e.target.checked),colorScheme:"orange"})]}),(0,O.jsx)(m.eK,{color:r,mt:2,children:de?"This video is stored as a private file on Pinata and uses authenticated gateway access.":"This video is stored as a public file on Pinata and can be accessed via any IPFS gateway."})]}),(0,O.jsx)(g.c,{borderColor:l}),(0,O.jsxs)(h.a,{children:[(0,O.jsx)($.E,{fontWeight:"bold",mb:2,color:d,children:"Share Link"}),(0,O.jsxs)(C.M,{children:[(0,O.jsx)(w.p,{value:"".concat(window.location.origin,"/youtubetoipfs/video/").concat(fe.ipfsHash||i),isReadOnly:!0,bg:"whiteAlpha.100",border:"1px solid",borderColor:l,color:d}),(0,O.jsx)(S.t,{width:"4.5rem",children:(0,O.jsx)(u.$,{h:"1.75rem",size:"sm",onClick:()=>{var e;const s="".concat(window.location.origin,"/youtubetoipfs/video/").concat((null===he||void 0===he||null===(e=he.ipfsVideo)||void 0===e?void 0:e.ipfsHash)||i);navigator.clipboard.writeText(s),o({title:"Share link copied to clipboard",status:"success",duration:2e3})},children:(0,O.jsx)(B.nxz,{})})})]}),ne&&(0,O.jsxs)(a.F,{status:"info",mt:2,bg:"blue.900",border:"1px solid",borderColor:"blue.700",children:[(0,O.jsx)(c._,{}),(0,O.jsx)($.E,{fontSize:"sm",children:"This link can be shared publicly. Anyone can view the video."})]})]})]})})]}),(0,O.jsxs)(p.Z,{bg:"red.900",border:"1px solid",borderColor:"red.700",children:[(0,O.jsx)(b.a,{children:(0,O.jsx)(A.D,{size:"md",color:d,children:"Danger Zone"})}),(0,O.jsx)(j.b,{children:(0,O.jsxs)(P.T,{align:"stretch",spacing:4,children:[(0,O.jsx)($.E,{color:r,children:"Once you delete a video, there is no going back. The video will be removed from our database, but the IPFS content may still exist on the network."}),(0,O.jsx)(u.$,{leftIcon:(0,O.jsx)(B.IXo,{}),colorScheme:"red",variant:"outline",onClick:async()=>{if(!window.confirm("Are you sure you want to delete this video? This action cannot be undone."))return;const e=(null===he||void 0===he?void 0:he.ipfsVideo)||(null===he||void 0===he?void 0:he.ipfsVideoByHash),i=null===e||void 0===e?void 0:e.id;i?(ae(!0),await je({variables:{id:i}})):o({title:"Error: Video ID not found",status:"error",duration:3e3})},isLoading:te,loadingText:"Deleting...",children:"Delete Video Permanently"})]})})]})]})})}),(0,O.jsx)(M.n,{})]})}}}]);
//# sourceMappingURL=8031.735d1abf.chunk.js.map