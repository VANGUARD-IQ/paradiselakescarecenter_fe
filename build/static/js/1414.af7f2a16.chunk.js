"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[1414],{41414:(e,n,i)=>{i.r(n),i.d(n,{default:()=>se});var s,l,o,r=i(57528),t=i(65043),c=i(31881),a=i(10585),d=i(70459),x=i(73216),h=i(88787),g=i(85871),u=i(87139),j=i(22107),p=i(98662),m=i(42703),y=i(83169),b=i(24330),f=i(26201),w=i(44093),S=i(98939),C=i(5371),P=i(73212),v=i(35699),k=i(45973),A=i(29244),z=i(59883),D=i(86236),E=i(53560),$=i(91872),I=i(76659),T=i(96148),K=i(10202),U=i(48239),_=i(30502),G=i(47726),H=i(28846),R=i(39081),W=i(12733),F=i(12730),M=i(55206),Z=i(58584),B=i(99973),J=i(92293),O=i(52003),V=i(63295),q=i(95214),L=i(62405),N=i(66037),Y=i(39985),Q=i(80454),X=i(70579);const ee=(0,d.J1)(s||(s=(0,r.A)(["\n    query GetArticles($category: String, $tags: [String!], $search: String, $onlyPublished: Boolean, $onlyPinned: Boolean) {\n        companyKnowledgeArticles(\n            category: $category\n            tags: $tags\n            search: $search\n            onlyPublished: $onlyPublished\n            onlyPinned: $onlyPinned\n        ) {\n            id\n            title\n            category\n            tags\n            visibility\n            allowPublicAccess\n            publicSlug\n            isPinned\n            isPublished\n            viewCount\n            createdAt\n            updatedAt\n        }\n    }\n"]))),ne=(0,d.J1)(l||(l=(0,r.A)(["\n    mutation DeleteArticle($id: ID!) {\n        deleteCompanyKnowledgeArticle(id: $id)\n    }\n"]))),ie=(0,d.J1)(o||(o=(0,r.A)(["\n    mutation TogglePin($id: ID!) {\n        togglePinCompanyKnowledgeArticle(id: $id) {\n            id\n            isPinned\n        }\n    }\n"]))),se=()=>{(0,N.H)("Company Knowledge");const e=(0,x.Zp)(),n=(0,_.d)(),{colorMode:i}=(0,w.G6)(),[s,l]=(0,t.useState)(""),[o,r]=(0,t.useState)(void 0),[d,se]=(0,t.useState)([]),[le,oe]=(0,t.useState)(!1),[re,te]=(0,t.useState)(!1),ce=(0,Y.oU)("background.main",i),ae=(0,Y.oU)("background.cardGradient",i),de=(0,Y.oU)("border.darkCard",i),xe=(0,Y.oU)("light"===i?"text.primary":"text.primaryDark",i),he=(0,Y.oU)("light"===i?"text.secondary":"text.secondaryDark",i),ge=(0,Y.oU)("primary",i),{data:ue,loading:je,error:pe,refetch:me}=(0,a.IT)(ee,{variables:{category:o,tags:d.length>0?d:void 0,search:s||void 0,onlyPublished:le||void 0,onlyPinned:re||void 0}}),[ye]=(0,c.n)(ne,{onCompleted:()=>{n({title:"Article deleted",status:"success",duration:3e3}),me()},onError:e=>{n({title:"Error deleting article",description:e.message,status:"error",duration:5e3})}}),[be]=(0,c.n)(ie,{onCompleted:()=>{n({title:"Pin status updated",status:"success",duration:2e3}),me()}});if(je)return(0,X.jsxs)(j.a,{bg:ce,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,X.jsx)(O.m,{}),(0,X.jsx)(q.y,{moduleConfig:L.default}),(0,X.jsx)(S.m,{maxW:"container.xl",py:8,flex:"1",children:(0,X.jsx)(C.s,{justify:"center",align:"center",minH:"400px",children:(0,X.jsx)(I.y,{size:"xl",color:ge})})}),(0,X.jsx)(V.n,{})]});if(pe)return(0,X.jsxs)(j.a,{bg:ce,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,X.jsx)(O.m,{}),(0,X.jsx)(q.y,{moduleConfig:L.default}),(0,X.jsx)(S.m,{maxW:"container.xl",py:8,flex:"1",children:(0,X.jsxs)(h.F,{status:"error",children:[(0,X.jsx)(g._,{}),pe.message]})}),(0,X.jsx)(V.n,{})]});const fe=(null===ue||void 0===ue?void 0:ue.companyKnowledgeArticles)||[];return(0,X.jsxs)(j.a,{bg:ce,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,X.jsx)(O.m,{}),(0,X.jsx)(q.y,{moduleConfig:L.default}),(0,X.jsxs)(S.m,{maxW:"container.xl",py:8,flex:"1",children:[(0,X.jsxs)(C.s,{justify:"space-between",align:"center",mb:6,children:[(0,X.jsxs)(K.T,{align:"start",spacing:1,children:[(0,X.jsx)(H.D,{color:xe,fontFamily:Y.Kk.fonts.heading,children:"Company Knowledge"}),(0,X.jsxs)(R.E,{color:he,fontSize:"sm",children:[fe.length," ",1===fe.length?"article":"articles"," found"]})]}),(0,X.jsx)(p.$,{leftIcon:(0,X.jsx)(F.R,{}),colorScheme:"blue",onClick:()=>e("/companyknowledge/new"),children:"New Article"})]}),(0,X.jsx)(y.Z,{bg:ae,border:"1px",borderColor:de,mb:6,children:(0,X.jsx)(b.b,{children:(0,X.jsxs)(K.T,{spacing:4,align:"stretch",children:[(0,X.jsxs)(k.M,{children:[(0,X.jsx)(A.W,{pointerEvents:"none",children:(0,X.jsx)(W.W,{color:"gray.400"})}),(0,X.jsx)(v.p,{placeholder:"Search articles...",value:s,onChange:e=>l(e.target.value),bg:"light"===i?"white":"rgba(255, 255, 255, 0.05)",color:xe})]}),(0,X.jsxs)(T.z,{spacing:4,children:[(0,X.jsx)(p.$,{size:"sm",variant:le?"solid":"outline",colorScheme:"green",onClick:()=>oe(!le),children:"Published Only"}),(0,X.jsx)(p.$,{size:"sm",variant:re?"solid":"outline",colorScheme:"yellow",onClick:()=>te(!re),leftIcon:(0,X.jsx)(J.G,{}),children:"Pinned Only"})]})]})})}),0===fe.length?(0,X.jsx)(y.Z,{bg:ae,border:"1px",borderColor:de,children:(0,X.jsx)(b.b,{children:(0,X.jsxs)(K.T,{py:8,spacing:4,children:[(0,X.jsx)(R.E,{fontSize:"xl",color:he,children:"No articles found"}),(0,X.jsx)(p.$,{leftIcon:(0,X.jsx)(F.R,{}),colorScheme:"blue",onClick:()=>e("/companyknowledge/new"),children:"Create Your First Article"})]})})}):(0,X.jsx)(P.r,{columns:{base:1,md:2,lg:3},spacing:6,children:fe.map(n=>{return(0,X.jsxs)(y.Z,{bg:ae,border:"1px",borderColor:de,_hover:{transform:"translateY(-4px)",shadow:"lg"},transition:"all 0.2s",cursor:"pointer",onClick:()=>e("/companyknowledge/".concat(n.id)),children:[(0,X.jsx)(f.a,{pb:2,children:(0,X.jsxs)(T.z,{justify:"space-between",align:"start",children:[(0,X.jsxs)(K.T,{align:"start",spacing:1,flex:1,children:[(0,X.jsxs)(T.z,{children:[n.isPinned&&(0,X.jsx)(J.G,{color:"yellow.400",boxSize:4}),(0,X.jsx)(H.D,{size:"md",color:xe,noOfLines:2,children:n.title})]}),(0,X.jsxs)(T.z,{spacing:2,children:[(i=n.visibility,s=n.allowPublicAccess,s?(0,X.jsx)(u.E,{colorScheme:"green",children:"PUBLIC"}):"SHARED"===i?(0,X.jsx)(u.E,{colorScheme:"blue",children:"SHARED"}):(0,X.jsx)(u.E,{colorScheme:"purple",children:"PRIVATE"})),!n.isPublished&&(0,X.jsx)(u.E,{colorScheme:"gray",children:"DRAFT"})]})]}),(0,X.jsxs)(z.W,{children:[(0,X.jsx)(D.I,{as:m.K,icon:(0,X.jsx)(M.t,{}),variant:"ghost",size:"sm",onClick:e=>e.stopPropagation()}),(0,X.jsxs)($.c,{children:[(0,X.jsx)(E.D,{icon:(0,X.jsx)(M.t,{}),onClick:i=>{i.stopPropagation(),e("/companyknowledge/".concat(n.id))},children:"View"}),(0,X.jsx)(E.D,{icon:(0,X.jsx)(B.q,{}),onClick:i=>{i.stopPropagation(),e("/companyknowledge/".concat(n.id,"/edit"))},children:"Edit"}),(0,X.jsx)(E.D,{icon:(0,X.jsx)(J.G,{}),onClick:e=>{e.stopPropagation(),be({variables:{id:n.id}})},children:n.isPinned?"Unpin":"Pin"}),(0,X.jsx)(E.D,{icon:(0,X.jsx)(Z.d,{}),color:"red.500",onClick:e=>{var i,s;e.stopPropagation(),i=n.id,s=n.title,window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&ye({variables:{id:i}})},children:"Delete"})]})]})]})}),(0,X.jsx)(b.b,{pt:2,children:(0,X.jsxs)(K.T,{align:"stretch",spacing:3,children:[n.category&&(0,X.jsx)(T.z,{children:(0,X.jsxs)(R.E,{fontSize:"sm",color:he,children:["\ud83d\udcc1 ",n.category]})}),n.tags&&n.tags.length>0&&(0,X.jsxs)(T.z,{wrap:"wrap",spacing:2,children:[n.tags.slice(0,3).map(e=>(0,X.jsx)(U.vw,{size:"sm",colorScheme:"blue",children:(0,X.jsx)(U.d1,{children:e})},e)),n.tags.length>3&&(0,X.jsxs)(R.E,{fontSize:"xs",color:he,children:["+",n.tags.length-3," more"]})]}),(0,X.jsxs)(T.z,{justify:"space-between",pt:2,children:[(0,X.jsx)(G.m,{label:"View count",children:(0,X.jsxs)(R.E,{fontSize:"sm",color:he,children:["\ud83d\udc41\ufe0f ",n.viewCount||0," views"]})}),(0,X.jsx)(R.E,{fontSize:"xs",color:he,children:(0,Q.GP)(new Date(n.updatedAt),"MMM dd, yyyy")})]}),n.publicSlug&&(0,X.jsxs)(R.E,{fontSize:"xs",color:"green.500",fontFamily:"mono",children:["/kb/",n.publicSlug]})]})})]},n.id);var i,s})})]}),(0,X.jsx)(V.n,{})]})}}}]);
//# sourceMappingURL=1414.af7f2a16.chunk.js.map