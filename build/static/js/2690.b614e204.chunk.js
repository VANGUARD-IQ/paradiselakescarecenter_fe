"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[2690],{72690:(e,n,s)=>{s.r(n),s.d(n,{default:()=>R});var r,i,t=s(57528),l=(s(65043),s(87139)),a=s(22107),o=s(98662),d=s(44093),c=s(98939),g=s(82459),h=s(47781),x=s(76659),u=s(96148),m=s(10202),j=s(28846),p=s(39081),f=s(1009),b=s(73216),y=s(10585),z=s(70459),S=s(39985),P=s(63295),w=s(52003),E=s(95214),I=s(76879),k=s(64379),A=s(29285),D=s(70579);const v=(0,z.J1)(r||(r=(0,t.A)(["\n  query GetProposal($id: ID!) {\n    getProposal(id: $id) {\n      id\n      companyName\n      slug\n      title\n      agreementMarkdown\n      customPagePath\n      notes\n      status\n      createdAt\n      projectId\n      draftBillId\n      scheduledPayments {\n        billId\n        daysAfterPrevious\n        description\n      }\n    }\n  }\n"]))),T=(0,z.J1)(i||(i=(0,t.A)(["\n  query GetProposalSignatures($proposalId: ID!) {\n    getProposalSignatures(proposalId: $proposalId) {\n      id\n      signerName\n      signerEmail\n      signerRole\n      signedAt\n      ipAddress\n    }\n  }\n"]))),R=()=>{const{id:e}=(0,b.g)(),n=(0,b.Zp)(),{colorMode:s}=(0,d.G6)(),{data:r,loading:i}=(0,y.IT)(v,{variables:{id:e},skip:!e}),{data:t}=(0,y.IT)(T,{variables:{proposalId:e},skip:!e}),z=(0,S.oU)("background.main",s),R="light"===s?"white":"gray.800",_=(0,S.oU)("light"===s?"text.primary":"text.primaryDark",s),N=(0,S.oU)("light"===s?"text.secondary":"text.secondaryDark",s);if(i)return(0,D.jsx)(a.a,{bg:z,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:(0,D.jsx)(x.y,{size:"xl"})});const W=null===r||void 0===r?void 0:r.getProposal,C=(null===t||void 0===t?void 0:t.getProposalSignatures)||[];if(!W)return(0,D.jsx)(a.a,{bg:z,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:(0,D.jsx)(p.E,{children:"Proposal not found"})});return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w.m,{}),(0,D.jsx)(a.a,{bg:z,minH:"100vh",py:10,children:(0,D.jsx)(c.m,{maxW:"container.xl",children:(0,D.jsxs)(m.T,{spacing:8,align:"stretch",children:[(0,D.jsx)(E.y,{moduleConfig:I.default}),(0,D.jsx)(a.a,{bg:R,p:8,borderRadius:"lg",shadow:"md",children:(0,D.jsxs)(m.T,{align:"start",spacing:4,children:[(0,D.jsxs)(u.z,{justify:"space-between",w:"full",children:[(0,D.jsxs)(u.z,{spacing:4,children:[(0,D.jsx)(j.D,{size:"xl",color:_,children:W.companyName}),(0,D.jsx)(l.E,{colorScheme:(e=>{switch(e){case"DRAFT":default:return"gray";case"SENT":return"blue";case"PARTIALLY_SIGNED":return"orange";case"FULLY_SIGNED":return"green"}})(W.status),fontSize:"md",children:W.status})]}),(0,D.jsxs)(u.z,{children:[(0,D.jsx)(o.$,{leftIcon:(0,D.jsx)(f.SG1,{}),onClick:()=>n("/proposals/".concat(e,"/edit")),size:"sm",children:"Edit"}),W.customPagePath&&(0,D.jsx)(o.$,{as:"a",href:W.customPagePath,target:"_blank",variant:"outline",size:"sm",children:"View Offer Page"})]})]}),(0,D.jsx)(p.E,{fontSize:"xl",color:N,children:W.title}),(0,D.jsxs)(u.z,{spacing:8,color:N,children:[(0,D.jsxs)(p.E,{children:[(0,D.jsx)("strong",{children:"Slug:"})," ",W.slug]}),(0,D.jsxs)(p.E,{children:[(0,D.jsx)("strong",{children:"Created:"})," ",new Date(W.createdAt).toLocaleDateString()]})]}),W.notes&&(0,D.jsxs)(a.a,{w:"full",children:[(0,D.jsx)(p.E,{fontWeight:"bold",color:_,children:"Notes:"}),(0,D.jsx)(p.E,{color:N,children:W.notes})]})]})}),C.length>0&&(0,D.jsx)(a.a,{bg:R,p:8,borderRadius:"lg",shadow:"md",children:(0,D.jsxs)(m.T,{align:"start",spacing:4,children:[(0,D.jsx)(j.D,{size:"md",color:_,children:"Signature Audit Trail"}),(0,D.jsx)(h.B8,{spacing:3,w:"full",children:C.map(e=>(0,D.jsx)(h.ck,{children:(0,D.jsxs)(u.z,{justify:"space-between",p:3,borderWidth:1,borderRadius:"md",children:[(0,D.jsxs)(m.T,{align:"start",spacing:0,children:[(0,D.jsxs)(u.z,{children:[(0,D.jsx)(p.E,{fontWeight:"bold",color:_,children:e.signerName}),e.signerRole&&(0,D.jsx)(l.E,{children:e.signerRole})]}),(0,D.jsx)(p.E,{fontSize:"sm",color:N,children:e.signerEmail}),(0,D.jsxs)(p.E,{fontSize:"xs",color:N,children:["IP: ",e.ipAddress]})]}),(0,D.jsx)(p.E,{fontSize:"sm",color:N,children:new Date(e.signedAt).toLocaleString()})]})},e.id))})]})}),(0,D.jsx)(a.a,{bg:R,p:8,borderRadius:"lg",shadow:"md",children:(0,D.jsxs)(m.T,{align:"start",spacing:4,children:[(0,D.jsx)(j.D,{size:"md",color:_,children:"Agreement"}),(0,D.jsx)(g.c,{}),(0,D.jsx)(a.a,{w:"full",sx:{"& h1":{fontSize:"2xl",fontWeight:"bold",mt:4,mb:2},"& h2":{fontSize:"xl",fontWeight:"bold",mt:3,mb:2},"& h3":{fontSize:"lg",fontWeight:"bold",mt:2,mb:1},"& p":{mb:2},"& ul":{ml:4,mb:2},"& li":{mb:1},"& strong":{fontWeight:"bold"},"& hr":{my:4}},children:(0,D.jsx)(k.oz,{remarkPlugins:[A.A],children:W.agreementMarkdown})})]})})]})})}),(0,D.jsx)(P.n,{})]})}}}]);
//# sourceMappingURL=2690.b614e204.chunk.js.map