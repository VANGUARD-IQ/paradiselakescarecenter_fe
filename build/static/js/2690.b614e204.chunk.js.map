{"version":3,"file":"static/js/2690.b614e204.chunk.js","mappings":"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","sources":["pages/proposals/ProposalDetail.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  Box,\n  Container,\n  Heading,\n  Text,\n  Button,\n  VStack,\n  HStack,\n  useColorMode,\n  Badge,\n  Spinner,\n  List,\n  ListItem,\n  Divider,\n} from '@chakra-ui/react';\nimport { FiEdit } from 'react-icons/fi';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { gql, useQuery } from '@apollo/client';\nimport { getColor } from '../../brandConfig';\nimport { FooterWithFourColumns } from '../../components/chakra/FooterWithFourColumns/FooterWithFourColumns';\nimport { NavbarWithCallToAction } from '../../components/chakra/NavbarWithCallToAction/NavbarWithCallToAction';\nimport { ModuleBreadcrumb } from '../../components/ModuleBreadcrumb';\nimport proposalsModuleConfig from './moduleConfig';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\nconst GET_PROPOSAL = gql`\n  query GetProposal($id: ID!) {\n    getProposal(id: $id) {\n      id\n      companyName\n      slug\n      title\n      agreementMarkdown\n      customPagePath\n      notes\n      status\n      createdAt\n      projectId\n      draftBillId\n      scheduledPayments {\n        billId\n        daysAfterPrevious\n        description\n      }\n    }\n  }\n`;\n\nconst GET_PROPOSAL_SIGNATURES = gql`\n  query GetProposalSignatures($proposalId: ID!) {\n    getProposalSignatures(proposalId: $proposalId) {\n      id\n      signerName\n      signerEmail\n      signerRole\n      signedAt\n      ipAddress\n    }\n  }\n`;\n\nconst ProposalDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { colorMode } = useColorMode();\n\n  const { data: proposalData, loading: loadingProposal } = useQuery(GET_PROPOSAL, {\n    variables: { id },\n    skip: !id,\n  });\n\n  const { data: signaturesData } = useQuery(GET_PROPOSAL_SIGNATURES, {\n    variables: { proposalId: id },\n    skip: !id,\n  });\n\n  const bg = getColor(\"background.main\", colorMode);\n  const cardBg = colorMode === 'light' ? 'white' : 'gray.800';\n  const textPrimary = getColor(colorMode === 'light' ? \"text.primary\" : \"text.primaryDark\", colorMode);\n  const textSecondary = getColor(colorMode === 'light' ? \"text.secondary\" : \"text.secondaryDark\", colorMode);\n\n  if (loadingProposal) {\n    return (\n      <Box bg={bg} minH=\"100vh\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\n        <Spinner size=\"xl\" />\n      </Box>\n    );\n  }\n\n  const proposal = proposalData?.getProposal;\n  const signatures = signaturesData?.getProposalSignatures || [];\n\n  if (!proposal) {\n    return (\n      <Box bg={bg} minH=\"100vh\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\n        <Text>Proposal not found</Text>\n      </Box>\n    );\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'DRAFT': return 'gray';\n      case 'SENT': return 'blue';\n      case 'PARTIALLY_SIGNED': return 'orange';\n      case 'FULLY_SIGNED': return 'green';\n      default: return 'gray';\n    }\n  };\n\n  return (\n    <>\n      <NavbarWithCallToAction />\n      <Box bg={bg} minH=\"100vh\" py={10}>\n        <Container maxW=\"container.xl\">\n          <VStack spacing={8} align=\"stretch\">\n            <ModuleBreadcrumb\n              moduleConfig={proposalsModuleConfig}\n            />\n\n            {/* Header */}\n            <Box bg={cardBg} p={8} borderRadius=\"lg\" shadow=\"md\">\n              <VStack align=\"start\" spacing={4}>\n                <HStack justify=\"space-between\" w=\"full\">\n                  <HStack spacing={4}>\n                    <Heading size=\"xl\" color={textPrimary}>{proposal.companyName}</Heading>\n                    <Badge colorScheme={getStatusColor(proposal.status)} fontSize=\"md\">\n                      {proposal.status}\n                    </Badge>\n                  </HStack>\n                  <HStack>\n                    <Button\n                      leftIcon={<FiEdit />}\n                      onClick={() => navigate(`/proposals/${id}/edit`)}\n                      size=\"sm\"\n                    >\n                      Edit\n                    </Button>\n                    {proposal.customPagePath && (\n                      <Button\n                        as=\"a\"\n                        href={proposal.customPagePath}\n                        target=\"_blank\"\n                        variant=\"outline\"\n                        size=\"sm\"\n                      >\n                        View Offer Page\n                      </Button>\n                    )}\n                  </HStack>\n                </HStack>\n\n                <Text fontSize=\"xl\" color={textSecondary}>{proposal.title}</Text>\n\n                <HStack spacing={8} color={textSecondary}>\n                  <Text><strong>Slug:</strong> {proposal.slug}</Text>\n                  <Text><strong>Created:</strong> {new Date(proposal.createdAt).toLocaleDateString()}</Text>\n                </HStack>\n\n                {proposal.notes && (\n                  <Box w=\"full\">\n                    <Text fontWeight=\"bold\" color={textPrimary}>Notes:</Text>\n                    <Text color={textSecondary}>{proposal.notes}</Text>\n                  </Box>\n                )}\n              </VStack>\n            </Box>\n\n            {/* Signatures */}\n            {signatures.length > 0 && (\n              <Box bg={cardBg} p={8} borderRadius=\"lg\" shadow=\"md\">\n                <VStack align=\"start\" spacing={4}>\n                  <Heading size=\"md\" color={textPrimary}>Signature Audit Trail</Heading>\n                  <List spacing={3} w=\"full\">\n                    {signatures.map((sig: any) => (\n                      <ListItem key={sig.id}>\n                        <HStack justify=\"space-between\" p={3} borderWidth={1} borderRadius=\"md\">\n                          <VStack align=\"start\" spacing={0}>\n                            <HStack>\n                              <Text fontWeight=\"bold\" color={textPrimary}>{sig.signerName}</Text>\n                              {sig.signerRole && <Badge>{sig.signerRole}</Badge>}\n                            </HStack>\n                            <Text fontSize=\"sm\" color={textSecondary}>{sig.signerEmail}</Text>\n                            <Text fontSize=\"xs\" color={textSecondary}>IP: {sig.ipAddress}</Text>\n                          </VStack>\n                          <Text fontSize=\"sm\" color={textSecondary}>\n                            {new Date(sig.signedAt).toLocaleString()}\n                          </Text>\n                        </HStack>\n                      </ListItem>\n                    ))}\n                  </List>\n                </VStack>\n              </Box>\n            )}\n\n            {/* Agreement Content */}\n            <Box bg={cardBg} p={8} borderRadius=\"lg\" shadow=\"md\">\n              <VStack align=\"start\" spacing={4}>\n                <Heading size=\"md\" color={textPrimary}>Agreement</Heading>\n                <Divider />\n                <Box\n                  w=\"full\"\n                  sx={{\n                    '& h1': { fontSize: '2xl', fontWeight: 'bold', mt: 4, mb: 2 },\n                    '& h2': { fontSize: 'xl', fontWeight: 'bold', mt: 3, mb: 2 },\n                    '& h3': { fontSize: 'lg', fontWeight: 'bold', mt: 2, mb: 1 },\n                    '& p': { mb: 2 },\n                    '& ul': { ml: 4, mb: 2 },\n                    '& li': { mb: 1 },\n                    '& strong': { fontWeight: 'bold' },\n                    '& hr': { my: 4 },\n                  }}\n                >\n                  <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                    {proposal.agreementMarkdown}\n                  </ReactMarkdown>\n                </Box>\n              </VStack>\n            </Box>\n          </VStack>\n        </Container>\n      </Box>\n      <FooterWithFourColumns />\n    </>\n  );\n};\n\nexport default ProposalDetail;\n"],"names":["GET_PROPOSAL","gql","_templateObject","_taggedTemplateLiteral","GET_PROPOSAL_SIGNATURES","_templateObject2","ProposalDetail","id","useParams","navigate","useNavigate","colorMode","useColorMode","data","proposalData","loading","loadingProposal","useQuery","variables","skip","signaturesData","proposalId","bg","getColor","cardBg","textPrimary","textSecondary","_jsx","Box","minH","display","alignItems","justifyContent","children","Spinner","size","proposal","getProposal","signatures","getProposalSignatures","Text","_jsxs","_Fragment","NavbarWithCallToAction","py","Container","maxW","VStack","spacing","align","ModuleBreadcrumb","moduleConfig","proposalsModuleConfig","p","borderRadius","shadow","HStack","justify","w","Heading","color","companyName","Badge","colorScheme","status","getStatusColor","fontSize","Button","leftIcon","FiEdit","onClick","concat","customPagePath","as","href","target","variant","title","slug","Date","createdAt","toLocaleDateString","notes","fontWeight","length","List","map","sig","ListItem","borderWidth","signerName","signerRole","signerEmail","ipAddress","signedAt","toLocaleString","Divider","sx","mt","mb","ml","my","ReactMarkdown","remarkPlugins","remarkGfm","agreementMarkdown","FooterWithFourColumns"],"sourceRoot":""}