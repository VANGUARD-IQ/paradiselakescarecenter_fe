"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[4362],{24362:(e,n,o)=>{o.r(n),o.d(n,{default:()=>ne});var t,i,r,a,l,c=o(89379),s=o(57528),d=o(65043),p=o(88787),u=o(85871),m=o(22107),b=o(98662),h=o(42703),y=o(83169),g=o(24330),x=o(26201),v=o(68659),f=o(34946),j=o(98939),C=o(82459),D=o(73225),A=o(76668),S=o(73212),k=o(35699),R=o(61724),w=o(76659),N=o(96148),P=o(10202),T=o(30502),E=o(28846),_=o(39081),W=o(31881),B=o(10585),K=o(70459),M=o(12730),I=o(58584),Q=o(37809),z=o(72515),U=o(73216),F=o(29066),J=o(52003),$=o(63295),V=o(66037),Y=o(95214),O=o(192),H=o(39985),L=o(70579);const G=(0,K.J1)(t||(t=(0,s.A)(["\n    query GetCurrentTenant {\n        currentTenant {\n            id\n            name\n            companyDetails {\n                companyName\n                taxId\n                billingEmail\n                billingPhone\n            }\n            paymentReceivingDetails {\n                acceptedMethods\n                bankAccount {\n                    accountName\n                    bsb\n                    accountNumber\n                    bankName\n                    swiftCode\n                }\n                cryptoWallets {\n                    walletAddress\n                    network\n                    memo\n                }\n                stripeConnect {\n                    stripeAccountId\n                    accountVerified\n                    verifiedAt\n                }\n                paypalEmail\n                isVerified\n                cryptoDiscountPercentage\n            }\n        }\n    }\n"]))),Z=(0,K.J1)(i||(i=(0,s.A)(["\n    mutation UpdateTenantPaymentDetails($paymentDetails: PaymentReceivingDetailsInput!) {\n        updateTenantPaymentDetails(paymentDetails: $paymentDetails) {\n            id\n            paymentReceivingDetails {\n                acceptedMethods\n                bankAccount {\n                    accountName\n                    bsb\n                    accountNumber\n                    bankName\n                    swiftCode\n                }\n                cryptoWallets {\n                    walletAddress\n                    network\n                    memo\n                }\n                stripeConnect {\n                    stripeAccountId\n                    accountVerified\n                    verifiedAt\n                }\n                paypalEmail\n                isVerified\n                cryptoDiscountPercentage\n            }\n        }\n    }\n"]))),q=(0,K.J1)(r||(r=(0,s.A)(["\n    mutation UpdateTenantCompanyDetails($companyDetails: TenantCompanyDetailsInput!) {\n        updateTenantCompanyDetails(companyDetails: $companyDetails) {\n            id\n            companyDetails {\n                companyName\n                taxId\n                billingEmail\n                billingPhone\n            }\n        }\n    }\n"]))),X=(0,K.J1)(a||(a=(0,s.A)(["\n    query GetTenant($id: ID!) {\n        tenant(id: $id) {\n            id\n            name\n            domain\n            websiteUrl\n            apiKeys {\n                stripePublicKey\n                stripeSecretKey\n                stripeWebhookSecret\n            }\n            branding {\n                siteName\n            }\n        }\n    }\n"]))),ee=(0,K.J1)(l||(l=(0,s.A)(["\n    mutation UpdateTenant($id: ID!, $input: UpdateTenantInput!) {\n        updateTenant(id: $id, input: $input) {\n            id\n            apiKeys {\n                stripePublicKey\n                stripeSecretKey\n                stripeWebhookSecret\n            }\n        }\n    }\n"]))),ne=()=>{(0,V.H)("Edit Payment Details");const e=(0,U.Zp)(),n=(0,T.d)(),{user:o}=(0,F.A)(),t=(0,H.oU)("background.main"),i=(0,H.oU)("background.cardGradient"),r=(0,H.oU)("border.darkCard"),a=(0,H.oU)("text.primaryDark"),l=(0,H.oU)("text.secondaryDark"),s=(0,H.oU)("text.mutedDark"),K=(0,H.oU)("text.inverse"),ne=(0,H.oU)("primary"),[oe,te]=d.useState({apiKeys:{stripePublicKey:"",stripeSecretKey:"",stripeWebhookSecret:""},branding:{siteName:""},domain:"",websiteUrl:""}),[ie,re]=d.useState({businessName:"",businessRegistrationNumber:"",paymentReceivingDetails:{acceptedMethods:[],bankAccount:{accountName:"",bsb:"",accountNumber:"",bankName:"",swiftCode:""},cryptoWallets:[],stripeConnect:{stripeAccountId:"",accountVerified:!1,verifiedAt:null},paypalEmail:"",isVerified:!1,cryptoDiscountPercentage:void 0}}),{data:ae,refetch:le}=(0,B.IT)(X,{variables:{id:H.Kk.tenantId},skip:!H.Kk.tenantId,onCompleted:e=>{var n,o,t,i;null!==e&&void 0!==e&&e.tenant&&te({apiKeys:{stripePublicKey:(null===(n=e.tenant.apiKeys)||void 0===n?void 0:n.stripePublicKey)||"",stripeSecretKey:(null===(o=e.tenant.apiKeys)||void 0===o?void 0:o.stripeSecretKey)||"",stripeWebhookSecret:(null===(t=e.tenant.apiKeys)||void 0===t?void 0:t.stripeWebhookSecret)||""},branding:{siteName:(null===(i=e.tenant.branding)||void 0===i?void 0:i.siteName)||""},domain:e.tenant.domain||"",websiteUrl:e.tenant.websiteUrl||""})}}),{data:ce,loading:se}=(0,B.IT)(G,{onCompleted:e=>{var n,o,t,i,r,a,l,c,s,d,p,u,m,b,h,y,g,x,v,f,j,C,D;null!==e&&void 0!==e&&e.currentTenant&&re({businessName:(null===(n=e.currentTenant.companyDetails)||void 0===n?void 0:n.companyName)||"",businessRegistrationNumber:(null===(o=e.currentTenant.companyDetails)||void 0===o?void 0:o.taxId)||"",paymentReceivingDetails:{acceptedMethods:(null===(t=e.currentTenant.paymentReceivingDetails)||void 0===t?void 0:t.acceptedMethods)||[],bankAccount:{accountName:(null===(i=e.currentTenant.paymentReceivingDetails)||void 0===i||null===(r=i.bankAccount)||void 0===r?void 0:r.accountName)||"",bsb:(null===(a=e.currentTenant.paymentReceivingDetails)||void 0===a||null===(l=a.bankAccount)||void 0===l?void 0:l.bsb)||"",accountNumber:(null===(c=e.currentTenant.paymentReceivingDetails)||void 0===c||null===(s=c.bankAccount)||void 0===s?void 0:s.accountNumber)||"",bankName:(null===(d=e.currentTenant.paymentReceivingDetails)||void 0===d||null===(p=d.bankAccount)||void 0===p?void 0:p.bankName)||"",swiftCode:(null===(u=e.currentTenant.paymentReceivingDetails)||void 0===u||null===(m=u.bankAccount)||void 0===m?void 0:m.swiftCode)||""},cryptoWallets:(null===(b=e.currentTenant.paymentReceivingDetails)||void 0===b?void 0:b.cryptoWallets)||[],stripeConnect:{stripeAccountId:(null===(h=e.currentTenant.paymentReceivingDetails)||void 0===h||null===(y=h.stripeConnect)||void 0===y?void 0:y.stripeAccountId)||"",accountVerified:(null===(g=e.currentTenant.paymentReceivingDetails)||void 0===g||null===(x=g.stripeConnect)||void 0===x?void 0:x.accountVerified)||!1,verifiedAt:(null===(v=e.currentTenant.paymentReceivingDetails)||void 0===v||null===(f=v.stripeConnect)||void 0===f?void 0:f.verifiedAt)||null},paypalEmail:(null===(j=e.currentTenant.paymentReceivingDetails)||void 0===j?void 0:j.paypalEmail)||"",isVerified:(null===(C=e.currentTenant.paymentReceivingDetails)||void 0===C?void 0:C.isVerified)||!1,cryptoDiscountPercentage:(null===(D=e.currentTenant.paymentReceivingDetails)||void 0===D?void 0:D.cryptoDiscountPercentage)||void 0}})}}),[de,{loading:pe}]=(0,W.n)(ee,{onCompleted:()=>{n({title:"Stripe Settings Updated",description:"Your Stripe API keys have been updated successfully",status:"success",duration:3e3}),le()},onError:e=>{n({title:"Update Failed",description:e.message,status:"error",duration:5e3})}}),[ue,{loading:me}]=(0,W.n)(Z,{onError:e=>{n({title:"Payment Details Update Failed",description:e.message,status:"error",duration:5e3})}}),[be,{loading:he}]=(0,W.n)(q,{onError:e=>{n({title:"Company Details Update Failed",description:e.message,status:"error",duration:5e3})}}),ye=(e,n)=>{re(o=>(0,c.A)((0,c.A)({},o),{},{[e]:n}))},ge=(e,n)=>{re(o=>(0,c.A)((0,c.A)({},o),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},o.paymentReceivingDetails),{},{bankAccount:(0,c.A)((0,c.A)({},o.paymentReceivingDetails.bankAccount),{},{[e]:n})})}))},xe=(e,n)=>{re(o=>{const t=n?[...o.paymentReceivingDetails.acceptedMethods,e]:o.paymentReceivingDetails.acceptedMethods.filter(n=>n!==e);return(0,c.A)((0,c.A)({},o),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},o.paymentReceivingDetails),{},{acceptedMethods:t})})})},ve=(e,n)=>{te(o=>(0,c.A)((0,c.A)({},o),{},{apiKeys:(0,c.A)((0,c.A)({},o.apiKeys),{},{[e]:n})}))},fe=(e,n,o)=>{re(t=>(0,c.A)((0,c.A)({},t),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},t.paymentReceivingDetails),{},{cryptoWallets:t.paymentReceivingDetails.cryptoWallets.map((t,i)=>i===e?(0,c.A)((0,c.A)({},t),{},{[n]:o}):t)})}))};return se?(0,L.jsxs)(m.a,{bg:t,minHeight:"100vh",display:"flex",flexDirection:"column",children:[(0,L.jsx)(J.m,{}),(0,L.jsx)(Y.y,{moduleConfig:O.default}),(0,L.jsx)(j.m,{maxW:"container.xl",py:12,flex:"1",children:(0,L.jsx)(v.o,{h:"50vh",children:(0,L.jsx)(w.y,{size:"xl",color:(0,H.oU)("primary")})})}),(0,L.jsx)($.n,{})]}):(0,L.jsxs)(m.a,{bg:t,minHeight:"100vh",display:"flex",flexDirection:"column",children:[(0,L.jsx)(J.m,{}),(0,L.jsx)(Y.y,{moduleConfig:O.default}),(0,L.jsx)(j.m,{maxW:"container.xl",py:12,flex:"1",children:(0,L.jsxs)(P.T,{spacing:8,align:"stretch",children:[(0,L.jsxs)(N.z,{justify:"space-between",align:"center",children:[(0,L.jsxs)(P.T,{align:"start",spacing:2,children:[(0,L.jsx)(E.D,{size:"lg",color:a,children:"Edit Payment Details"}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,children:"Update your business and payment information"})]}),(0,L.jsx)(b.$,{onClick:()=>e("/bills/payment-details"),variant:"outline",leftIcon:(0,L.jsx)(Q.g,{}),borderColor:r,color:l,_hover:{borderColor:ne,color:K},children:"Back to Payment Details"})]}),(0,L.jsxs)(y.Z,{bg:i,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",borderWidth:"1px",borderColor:r,overflow:"hidden",children:[(0,L.jsx)(x.a,{borderBottomWidth:"1px",borderColor:r,children:(0,L.jsx)(E.D,{size:"md",color:K,children:"Business Information"})}),(0,L.jsx)(g.b,{children:(0,L.jsxs)(P.T,{spacing:6,children:[(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Business Name"}),(0,L.jsx)(k.p,{value:ie.businessName,onChange:e=>ye("businessName",e.target.value),placeholder:"Your Business Name",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Business Registration Number"}),(0,L.jsx)(k.p,{value:ie.businessRegistrationNumber,onChange:e=>ye("businessRegistrationNumber",e.target.value),placeholder:"ABN or Registration Number",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]})]})})]}),(0,L.jsxs)(y.Z,{bg:i,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",borderWidth:"1px",borderColor:r,overflow:"hidden",children:[(0,L.jsxs)(x.a,{borderBottomWidth:"1px",borderColor:r,children:[(0,L.jsx)(E.D,{size:"md",color:K,children:"\ud83d\udcb3 Payment Receiving Details"}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,children:"Configure how you want to receive payments from clients"})]}),(0,L.jsx)(g.b,{children:(0,L.jsxs)(P.T,{spacing:8,align:"stretch",children:[(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",mb:3,color:K,children:"Accepted Payment Methods"}),(0,L.jsxs)(S.r,{columns:2,spacing:4,children:[(0,L.jsx)(f.S,{isChecked:ie.paymentReceivingDetails.acceptedMethods.includes("BANK_TRANSFER"),onChange:e=>xe("BANK_TRANSFER",e.target.checked),colorScheme:"blue",children:(0,L.jsx)(_.E,{color:l,children:"Bank Transfer"})}),(0,L.jsx)(f.S,{isChecked:ie.paymentReceivingDetails.acceptedMethods.includes("CRYPTO"),onChange:e=>xe("CRYPTO",e.target.checked),colorScheme:"blue",children:(0,L.jsx)(_.E,{color:l,children:"Cryptocurrency"})}),(0,L.jsx)(f.S,{isChecked:ie.paymentReceivingDetails.acceptedMethods.includes("STRIPE"),onChange:e=>xe("STRIPE",e.target.checked),colorScheme:"blue",children:(0,L.jsx)(_.E,{color:l,children:"Stripe (Credit Cards)"})}),(0,L.jsx)(f.S,{isChecked:ie.paymentReceivingDetails.acceptedMethods.includes("PAYPAL"),onChange:e=>xe("PAYPAL",e.target.checked),colorScheme:"blue",children:(0,L.jsx)(_.E,{color:l,children:"PayPal"})})]})]}),(0,L.jsx)(C.c,{borderColor:r}),ie.paymentReceivingDetails.acceptedMethods.includes("STRIPE")&&(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",mb:3,color:K,children:"\ud83d\udcb3 Stripe Configuration"}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,mb:4,children:"Configure your Stripe API keys to accept credit card payments"}),(0,L.jsxs)(p.F,{status:"info",mb:4,children:[(0,L.jsx)(u._,{}),(0,L.jsxs)(m.a,{children:[(0,L.jsxs)(_.E,{fontWeight:"bold",children:["Stripe API Keys for: ",oe.branding.siteName||"Your Business"]}),(0,L.jsx)(_.E,{fontSize:"sm",children:"These keys will be used for processing credit card payments when clients pay your bills"})]})]}),(0,L.jsxs)(S.r,{columns:{base:1,md:2},spacing:4,children:[(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Stripe Public Key"}),(0,L.jsx)(k.p,{value:oe.apiKeys.stripePublicKey,onChange:e=>ve("stripePublicKey",e.target.value),placeholder:"pk_live_...",bg:(0,H.QQ)("form","fieldBg"),border:"1px",borderColor:(0,H.QQ)("form","fieldBorder"),_focus:{borderColor:(0,H.QQ)("form","fieldBorderFocus"),boxShadow:(0,H.QQ)("form","fieldShadowFocus")}}),(0,L.jsx)(_.E,{fontSize:"xs",color:s,mt:1,children:"Starts with pk_live_ or pk_test_"})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Stripe Secret Key"}),(0,L.jsx)(k.p,{type:"text",value:oe.apiKeys.stripeSecretKey,onChange:e=>ve("stripeSecretKey",e.target.value),placeholder:"sk_live_...",bg:(0,H.QQ)("form","fieldBg"),border:"1px",borderColor:(0,H.QQ)("form","fieldBorder"),_focus:{borderColor:(0,H.QQ)("form","fieldBorderFocus"),boxShadow:(0,H.QQ)("form","fieldShadowFocus")},fontFamily:"monospace",fontSize:"sm"}),(0,L.jsx)(_.E,{fontSize:"xs",color:s,mt:1,children:"Starts with sk_live_ or sk_test_"})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Stripe Webhook Secret"}),(0,L.jsx)(k.p,{type:"text",value:oe.apiKeys.stripeWebhookSecret,onChange:e=>ve("stripeWebhookSecret",e.target.value),placeholder:"whsec_...",bg:(0,H.QQ)("form","fieldBg"),border:"1px",borderColor:(0,H.QQ)("form","fieldBorder"),_focus:{borderColor:(0,H.QQ)("form","fieldBorderFocus"),boxShadow:(0,H.QQ)("form","fieldShadowFocus")},fontFamily:"monospace",fontSize:"sm"}),(0,L.jsx)(_.E,{fontSize:"xs",color:s,mt:1,children:"Starts with whsec_"})]})]}),(0,L.jsxs)(p.F,{status:"warning",mt:4,children:[(0,L.jsx)(u._,{}),(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",children:"Security Notice"}),(0,L.jsx)(_.E,{fontSize:"sm",children:"Your Stripe keys are encrypted and securely stored. Never share your secret keys publicly."})]})]})]}),(0,L.jsx)(C.c,{borderColor:r}),(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",mb:3,color:K,children:"\ud83c\udfe6 Bank Account Details"}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,mb:4,children:"Add your bank account details to receive payments via bank transfer"}),(0,L.jsxs)(S.r,{columns:{base:1,md:2},spacing:4,children:[(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Account Name"}),(0,L.jsx)(k.p,{value:ie.paymentReceivingDetails.bankAccount.accountName,onChange:e=>ge("accountName",e.target.value),placeholder:"John Doe",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"BSB"}),(0,L.jsx)(k.p,{value:ie.paymentReceivingDetails.bankAccount.bsb,onChange:e=>ge("bsb",e.target.value),placeholder:"123-456",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Account Number"}),(0,L.jsx)(k.p,{value:ie.paymentReceivingDetails.bankAccount.accountNumber,onChange:e=>ge("accountNumber",e.target.value),placeholder:"123456789",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Bank Name (Optional)"}),(0,L.jsx)(k.p,{value:ie.paymentReceivingDetails.bankAccount.bankName,onChange:e=>ge("bankName",e.target.value),placeholder:"Commonwealth Bank",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"SWIFT Code (Optional)"}),(0,L.jsx)(k.p,{value:ie.paymentReceivingDetails.bankAccount.swiftCode,onChange:e=>ge("swiftCode",e.target.value),placeholder:"CTBAAU2S",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]})]})]}),(0,L.jsx)(C.c,{borderColor:r}),(0,L.jsxs)(m.a,{children:[(0,L.jsxs)(N.z,{justify:"space-between",mb:3,children:[(0,L.jsx)(_.E,{fontWeight:"bold",color:K,children:"\u20bf Cryptocurrency Wallets"}),(0,L.jsx)(b.$,{size:"sm",leftIcon:(0,L.jsx)(M.R,{}),onClick:()=>{re(e=>(0,c.A)((0,c.A)({},e),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},e.paymentReceivingDetails),{},{cryptoWallets:[...e.paymentReceivingDetails.cryptoWallets,{walletAddress:"",network:"",memo:""}]})}))},variant:"outline",borderColor:r,color:l,_hover:{borderColor:ne,color:K},children:"Add Wallet"})]}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,mb:4,children:"Add cryptocurrency wallet addresses to receive crypto payments"}),ie.paymentReceivingDetails.acceptedMethods.includes("CRYPTO")&&!ie.paymentReceivingDetails.cryptoWallets.some(e=>"BTC"===e.network)&&(0,L.jsxs)(p.F,{status:"info",mb:4,children:[(0,L.jsx)(u._,{}),(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",children:"Bitcoin Wallet Recommended"}),(0,L.jsxs)(_.E,{fontSize:"sm",children:["You've selected cryptocurrency as an accepted payment method.",0===ie.paymentReceivingDetails.cryptoWallets.length?" Please add your Bitcoin (BTC) wallet address to receive Bitcoin payments from clients.":" Consider adding a Bitcoin (BTC) wallet address to accept Bitcoin payments."]})]})]}),ie.paymentReceivingDetails.cryptoWallets.length>0?(0,L.jsx)(P.T,{spacing:4,children:ie.paymentReceivingDetails.cryptoWallets.map((e,n)=>(0,L.jsxs)(m.a,{p:4,border:"1px",borderColor:r,borderRadius:"md",width:"100%",children:[(0,L.jsxs)(N.z,{justify:"space-between",mb:3,children:[(0,L.jsxs)(_.E,{fontWeight:"semibold",color:K,children:["Wallet ",n+1]}),(0,L.jsx)(h.K,{"aria-label":"Remove wallet",icon:(0,L.jsx)(I.d,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>(e=>{re(n=>(0,c.A)((0,c.A)({},n),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},n.paymentReceivingDetails),{},{cryptoWallets:n.paymentReceivingDetails.cryptoWallets.filter((n,o)=>o!==e)})}))})(n)})]}),(0,L.jsxs)(S.r,{columns:{base:1,md:3},spacing:4,children:[(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{fontSize:"sm",color:l,children:"Network"}),(0,L.jsxs)(R.l,{value:e.network,onChange:e=>fe(n,"network",e.target.value),placeholder:"Select network",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)},children:[(0,L.jsx)("option",{value:"BTC",children:"Bitcoin (BTC)"}),(0,L.jsx)("option",{value:"ETH",children:"Ethereum (ETH)"}),(0,L.jsx)("option",{value:"BSC",children:"Binance Smart Chain (BSC)"}),(0,L.jsx)("option",{value:"MATIC",children:"Polygon (MATIC)"}),(0,L.jsx)("option",{value:"ADA",children:"Cardano (ADA)"}),(0,L.jsx)("option",{value:"SOL",children:"Solana (SOL)"})]})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{fontSize:"sm",color:l,children:"Wallet Address"}),(0,L.jsx)(k.p,{value:e.walletAddress,onChange:e=>fe(n,"walletAddress",e.target.value),placeholder:"0x...",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{fontSize:"sm",color:l,children:"Memo (Optional)"}),(0,L.jsx)(k.p,{value:e.memo,onChange:e=>fe(n,"memo",e.target.value),placeholder:"Memo or tag",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)}})]})]})]},n))}):(0,L.jsx)(_.E,{color:s,textAlign:"center",py:4,children:'No crypto wallets added yet. Click "Add Wallet" to get started.'})]}),ie.paymentReceivingDetails.acceptedMethods.includes("CRYPTO")&&(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",mb:3,color:K,children:"\ud83d\udcb8 Crypto Payment Discount"}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,mb:4,children:"Offer a discount to customers who pay with cryptocurrency to incentivize crypto payments"}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"Discount Percentage (%)"}),(0,L.jsxs)(N.z,{children:[(0,L.jsx)(k.p,{type:"number",min:"0",max:"100",value:ie.paymentReceivingDetails.cryptoDiscountPercentage||"",onChange:e=>{const n=e.target.value?Number(e.target.value):void 0;re(e=>(0,c.A)((0,c.A)({},e),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},e.paymentReceivingDetails),{},{cryptoDiscountPercentage:n})}))},placeholder:"e.g., 10",bg:"rgba(255, 255, 255, 0.05)",border:"1px",borderColor:r,color:K,_placeholder:{color:s},_focus:{borderColor:ne,boxShadow:"0 0 0 1px ".concat(ne)},width:"150px"}),(0,L.jsx)(_.E,{color:l,children:"% off for crypto payments"})]}),(0,L.jsx)(_.E,{fontSize:"xs",color:s,mt:2,children:ie.paymentReceivingDetails.cryptoDiscountPercentage?"Customers will save ".concat(ie.paymentReceivingDetails.cryptoDiscountPercentage,"% when paying with cryptocurrency"):"No discount currently offered"})]})]}),(0,L.jsx)(C.c,{borderColor:r}),(0,L.jsxs)(m.a,{children:[(0,L.jsx)(_.E,{fontWeight:"bold",mb:3,color:K,children:"\ud83d\udcb0 PayPal"}),(0,L.jsx)(_.E,{fontSize:"sm",color:s,mb:4,children:"Add your PayPal email to receive PayPal payments"}),(0,L.jsxs)(D.MJ,{children:[(0,L.jsx)(A.l,{color:l,children:"PayPal Email"}),(0,L.jsx)(k.p,{type:"email",value:ie.paymentReceivingDetails.paypalEmail,onChange:e=>{return n="paypalEmail",o=e.target.value,void re(e=>(0,c.A)((0,c.A)({},e),{},{paymentReceivingDetails:(0,c.A)((0,c.A)({},e.paymentReceivingDetails),{},{[n]:o})}));var n,o},placeholder:"your-paypal@email.com",bg:(0,H.QQ)("form","fieldBg"),border:"1px",borderColor:(0,H.QQ)("form","fieldBorder"),_focus:{borderColor:(0,H.QQ)("form","fieldBorderFocus"),boxShadow:(0,H.QQ)("form","fieldShadowFocus")}})]})]})]})})]}),(0,L.jsxs)(N.z,{justify:"flex-end",spacing:4,children:[(0,L.jsx)(b.$,{variant:"outline",onClick:()=>e("/bills/payment-details"),children:"Cancel"}),(0,L.jsx)(b.$,{onClick:async()=>{if(null!==o&&void 0!==o&&o.id)try{const o=ie.paymentReceivingDetails.bankAccount?{accountName:ie.paymentReceivingDetails.bankAccount.accountName||void 0,bsb:ie.paymentReceivingDetails.bankAccount.bsb||void 0,accountNumber:ie.paymentReceivingDetails.bankAccount.accountNumber||void 0,bankName:ie.paymentReceivingDetails.bankAccount.bankName||void 0,swiftCode:ie.paymentReceivingDetails.bankAccount.swiftCode||void 0}:void 0,t={acceptedMethods:ie.paymentReceivingDetails.acceptedMethods,cryptoWallets:ie.paymentReceivingDetails.cryptoWallets.map(e=>({walletAddress:e.walletAddress,network:e.network,memo:e.memo||void 0})),bankAccount:o,paypalEmail:ie.paymentReceivingDetails.paypalEmail||void 0,stripeConnect:ie.paymentReceivingDetails.stripeConnect?{stripeAccountId:ie.paymentReceivingDetails.stripeConnect.stripeAccountId||void 0,accountVerified:ie.paymentReceivingDetails.stripeConnect.accountVerified,verifiedAt:ie.paymentReceivingDetails.stripeConnect.verifiedAt||void 0}:void 0,cryptoDiscountPercentage:ie.paymentReceivingDetails.cryptoDiscountPercentage||void 0};(ie.businessName||ie.businessRegistrationNumber)&&await be({variables:{companyDetails:{companyName:ie.businessName||void 0,taxId:ie.businessRegistrationNumber||void 0}}}),await ue({variables:{paymentDetails:t}}),ie.paymentReceivingDetails.acceptedMethods.includes("STRIPE")&&H.Kk.tenantId&&await de({variables:{id:H.Kk.tenantId,input:{apiKeys:oe.apiKeys}}}),n({title:"Details Updated",description:"Your business and payment details have been updated successfully",status:"success",duration:3e3}),e("/bills/payment-details")}catch(t){console.error("Error updating details:",t)}},isLoading:me||he||pe,loadingText:"Saving...",bg:(0,H.QQ)("button","primaryBg"),color:(0,H.oU)("text.inverse"),_hover:{bg:(0,H.QQ)("button","primaryHover")},leftIcon:(0,L.jsx)(z.S,{}),children:"Save Changes"})]})]})}),(0,L.jsx)($.n,{})]})}}}]);
//# sourceMappingURL=4362.1d0f45b5.chunk.js.map