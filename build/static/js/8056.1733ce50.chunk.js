"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[8056],{18056:(e,r,o)=>{o.r(r),o.d(r,{default:()=>se});var i=o(57528),t=(o(65043),o(44093)),n=o(83169),s=o(24330),l=o(10202),a=o(39081),c=o(22107),d=o(68659),x=o(26201),h=o(96148),p=o(87139),u=o(88019),g=o(47726),b=o(25011),j=o(42703),m=o(30502),y=o(76659),v=o(28846),f=o(98662),k=o(88787),S=o(85871),z=o(33430),w=o(34334),C=o(73212),T=o(94217),E=o(53332),D=o(78149),G=o(94085),I=o(80045),R=o(89379),A=o(70579),M=o(77971);const H=["type","aria-label"],P=e=>(0,A.jsx)(b.I,(0,R.A)((0,R.A)({color:"red.400"},e),{},{children:(0,A.jsx)("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}));function U(e){return(0,A.jsx)(b.I,(0,R.A)((0,R.A)({color:"green.400"},e),{},{children:(0,A.jsx)("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})}))}function F(e){const{type:r,"aria-label":o}=e,i=(0,I.A)(e,H),t=(0,T.E)(),n="increase"===r?U:P,s=o||("increase"===r?"increased by":"decreased by");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(M.B.span,{srOnly:!0,children:s}),(0,A.jsx)(n,(0,R.A)((0,R.A)({"aria-hidden":!0},i),{},{__css:t.icon}))]})}P.displayName="StatDownArrow",U.displayName="StatUpArrow",F.displayName="StatArrow";var W,N,O,_=o(73216),$=o(70459),q=o(10585),Z=o(31881),L=o(1009),B=o(52003),Q=o(63295),Y=o(95214),J=o(69129),V=o(39985),K=o(66037);const X=(0,$.J1)(W||(W=(0,i.A)(["\n  query GetPipelineMetrics {\n    pipelineMetrics {\n      totalOpportunities\n      totalValue\n      averageDealSize\n      conversionRate\n      averageSalesCycle\n      expectedRevenue\n      stageMetrics {\n        stageName\n        count\n        value\n        conversionToNext\n        averageTimeInStage\n      }\n      monthlyTrend {\n        month\n        created\n        won\n        lost\n        value\n      }\n      healthScore\n      suggestedActions {\n        type\n        title\n        description\n        priority\n      }\n    }\n  }\n"]))),ee=(0,$.J1)(N||(N=(0,i.A)(["\n  query GetRevenueTargets {\n    revenueTargets {\n      monthly\n      quarterly\n      yearly\n      currentMonthProgress\n      currentQuarterProgress\n      currentYearProgress\n      requiredOpportunities {\n        monthly\n        quarterly\n        yearly\n      }\n    }\n  }\n"]))),re=(0,$.J1)(O||(O=(0,i.A)(["\n  mutation CreateOpportunityTask($input: OpportunityTaskInput!) {\n    createOpportunityTask(input: $input) {\n      id\n      title\n      description\n      priority\n      dueDate\n    }\n  }\n"]))),oe=[{icon:L.kGk,title:"Send initial proposal",description:"Draft and send a proposal to the client outlining your solution",priority:"HIGH",category:"proposal"},{icon:L.QFc,title:"Schedule discovery call",description:"Book a call to understand client needs and pain points",priority:"HIGH",category:"discovery"},{icon:L.pHD,title:"Send follow-up email",description:"Follow up on your last interaction with the client",priority:"MEDIUM",category:"followup"},{icon:L.wIk,title:"Schedule product demo",description:"Book a demo to showcase your solution to the client",priority:"HIGH",category:"demo"},{icon:L.jH2,title:"Prepare contract",description:"Draft the contract terms and pricing for client review",priority:"HIGH",category:"closing"},{icon:L.z8N,title:"Send quote",description:"Provide detailed pricing and payment terms",priority:"HIGH",category:"pricing"}],ie=e=>{let{score:r}=e;const{colorMode:o}=(0,t.G6)(),i=(0,V.oU)("background.cardGradient",o),x=(0,V.oU)("border.darkCard",o),h=(0,V.oU)("light"===o?"text.primary":"text.primaryDark",o),p=(0,V.oU)("light"===o?"text.muted":"text.mutedDark",o),u=e=>e>=80?"green":e>=60?"yellow":e>=40?"orange":"red";return(0,A.jsx)(n.Z,{bg:i,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:x,borderRadius:"lg",children:(0,A.jsx)(s.b,{children:(0,A.jsxs)(l.T,{spacing:3,children:[(0,A.jsx)(a.E,{fontSize:"sm",fontWeight:"bold",color:h,children:"Pipeline Health"}),(0,A.jsxs)(c.a,{position:"relative",width:"120px",height:"120px",children:[(0,A.jsxs)("svg",{width:"120",height:"120",style:{transform:"rotate(-90deg)"},children:[(0,A.jsx)("circle",{cx:"60",cy:"60",r:"50",stroke:"#E2E8F0",strokeWidth:"10",fill:"none"}),(0,A.jsx)("circle",{cx:"60",cy:"60",r:"50",stroke:"var(--chakra-colors-".concat(u(r),"-500)"),strokeWidth:"10",fill:"none",strokeDasharray:"".concat(100*Math.PI),strokeDashoffset:"".concat(100*Math.PI*(1-r/100)),style:{transition:"stroke-dashoffset 0.5s ease"}})]}),(0,A.jsx)(d.o,{position:"absolute",top:"0",left:"0",width:"120px",height:"120px",children:(0,A.jsxs)(l.T,{spacing:0,children:[(0,A.jsxs)(a.E,{fontSize:"2xl",fontWeight:"bold",color:"".concat(u(r),".500"),children:[r,"%"]}),(0,A.jsx)(a.E,{fontSize:"xs",color:p,children:(e=>e>=80?"Excellent":e>=60?"Good":e>=40?"Needs Attention":"Critical")(r)})]})})]})]})})})},te=e=>{let{stageMetrics:r}=e;const o=Math.max(...r.map(e=>e.value)),{colorMode:i}=(0,t.G6)(),d=(0,V.oU)("background.cardGradient",i),g=(0,V.oU)("border.darkCard",i),b=(0,V.oU)("light"===i?"text.primary":"text.primaryDark",i),j=(0,V.oU)("light"===i?"text.muted":"text.mutedDark",i);return(0,A.jsxs)(n.Z,{bg:d,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:g,borderRadius:"lg",children:[(0,A.jsx)(x.a,{children:(0,A.jsx)(a.E,{fontWeight:"bold",color:b,children:"Conversion Funnel"})}),(0,A.jsx)(s.b,{children:(0,A.jsx)(l.T,{spacing:2,align:"stretch",children:r.map(e=>(0,A.jsxs)(c.a,{children:[(0,A.jsxs)(h.z,{justify:"space-between",mb:1,children:[(0,A.jsx)(a.E,{fontSize:"sm",fontWeight:"medium",color:b,children:e.stageName}),(0,A.jsxs)(h.z,{spacing:4,children:[(0,A.jsxs)(p.E,{colorScheme:"blue",bg:"light"===i?"blue.100":"rgba(56, 178, 255, 0.2)",color:"light"===i?"blue.800":"white",children:[e.count," deals"]}),(0,A.jsxs)(a.E,{fontSize:"sm",color:b,fontWeight:"medium",children:["$",e.value>=1e3?"".concat((e.value/1e3).toFixed(1),"k"):e.value.toFixed(0)]})]})]}),(0,A.jsx)(u.k,{value:e.value/o*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.conversionToNext>0&&(0,A.jsxs)(a.E,{fontSize:"xs",color:j,mt:1,children:[e.conversionToNext,"% convert to next stage"]})]},e.stageName))})})]})},ne=e=>{let{onCreateTask:r}=e;const{colorMode:o}=(0,t.G6)(),i=(0,V.oU)("background.cardGradient",o),c=(0,V.oU)("border.darkCard",o),d=(0,V.oU)("light"===o?"text.primary":"text.primaryDark",o),p=(0,V.oU)("light"===o?"text.muted":"text.mutedDark",o);return(0,A.jsxs)(n.Z,{bg:i,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:c,borderRadius:"lg",children:[(0,A.jsx)(x.a,{children:(0,A.jsxs)(h.z,{justify:"space-between",children:[(0,A.jsx)(a.E,{fontWeight:"bold",color:d,children:"Suggested Actions"}),(0,A.jsx)(g.m,{label:"Create tasks to move deals forward",children:(0,A.jsx)(b.I,{as:L.y3G,color:p})})]})}),(0,A.jsx)(s.b,{children:(0,A.jsx)(l.T,{spacing:3,align:"stretch",children:oe.slice(0,4).map((e,i)=>(0,A.jsxs)(h.z,{p:3,borderWidth:"1px",borderColor:"rgba(255, 255, 255, 0.2)",borderRadius:"md",_hover:{bg:"rgba(255, 255, 255, 0.1)",cursor:"pointer"},onClick:()=>r(e),children:[(0,A.jsx)(b.I,{as:e.icon,color:(0,V.oU)("primary",o),boxSize:5}),(0,A.jsxs)(l.T,{align:"start",flex:"1",spacing:0,children:[(0,A.jsx)(a.E,{fontSize:"sm",fontWeight:"medium",color:d,children:e.title}),(0,A.jsx)(a.E,{fontSize:"xs",color:p,children:e.description})]}),(0,A.jsx)(j.K,{icon:(0,A.jsx)(L.GGD,{}),"aria-label":"Create task",size:"sm",variant:"ghost"})]},i))})})]})},se=()=>{var e,r,o;(0,K.H)("Opportunity Dashboard");const i=(0,_.Zp)(),g=(0,m.d)(),{colorMode:j}=(0,t.G6)(),{data:I,loading:R,error:M,refetch:H}=(0,q.IT)(X,{fetchPolicy:"network-only",errorPolicy:"all"}),{data:P,loading:U,error:W}=(0,q.IT)(ee,{fetchPolicy:"network-only",errorPolicy:"all"});M&&console.error("Pipeline Metrics Error:",M),W&&console.error("Revenue Targets Error:",W);const[N]=(0,Z.n)(re),O=null===I||void 0===I?void 0:I.pipelineMetrics,$=null===P||void 0===P?void 0:P.revenueTargets,oe=(0,V.oU)("background.main",j),se=(0,V.oU)("background.cardGradient",j),le=(0,V.oU)("border.darkCard",j),ae=(0,V.oU)("light"===j?"text.primary":"text.primaryDark",j),ce=(0,V.oU)("light"===j?"text.muted":"text.mutedDark",j),de=(0,V.oU)("light"===j?"text.secondary":"text.secondaryDark",j),xe=(0,V.oU)("button.bg",j),he=(0,V.oU)("button.hoverBg",j);if(R||U)return(0,A.jsxs)(c.a,{bg:oe,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,A.jsx)(B.m,{}),(0,A.jsx)(Y.y,{moduleConfig:J.default}),(0,A.jsx)(c.a,{maxW:"100%",px:{base:4,md:8},py:8,flex:"1",children:(0,A.jsx)(d.o,{children:(0,A.jsx)(y.y,{size:"xl"})})}),(0,A.jsx)(Q.n,{})]});const pe=(null===O||void 0===O?void 0:O.totalOpportunities)>0;return(0,A.jsxs)(c.a,{bg:oe,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,A.jsx)(B.m,{}),(0,A.jsx)(Y.y,{moduleConfig:J.default}),(0,A.jsx)(c.a,{maxW:"100%",px:{base:4,md:8},py:8,flex:"1",children:(0,A.jsxs)(l.T,{spacing:6,align:"stretch",children:[(0,A.jsxs)(l.T,{spacing:4,align:"stretch",children:[(0,A.jsxs)(l.T,{align:"start",spacing:1,children:[(0,A.jsx)(v.D,{size:"lg",color:ae,children:"Opportunity Pipeline"}),(0,A.jsx)(a.E,{color:ce,fontSize:{base:"sm",md:"md"},children:"Track your sales pipeline health and conversion metrics"})]}),(0,A.jsxs)(h.z,{spacing:2,flexWrap:"wrap",children:[(0,A.jsx)(f.$,{leftIcon:(0,A.jsx)(L.jTZ,{}),variant:"outline",size:{base:"sm",md:"md"},borderColor:"light"===j?"gray.300":"rgba(255, 255, 255, 0.3)",color:ae,_hover:{bg:"light"===j?"gray.50":se},onClick:()=>H(),children:"Refresh"}),(0,A.jsx)(f.$,{leftIcon:(0,A.jsx)(L.GGD,{}),size:{base:"sm",md:"md"},bg:xe,color:"white",_hover:{bg:he},onClick:()=>i("/opportunities/new"),children:"New Opportunity"})]})]}),!pe&&(0,A.jsxs)(k.F,{status:"warning",borderRadius:"md",children:[(0,A.jsx)(S._,{}),(0,A.jsxs)(c.a,{children:[(0,A.jsx)(z.X,{children:"No opportunities in your pipeline!"}),(0,A.jsx)(w.T,{children:"Start by creating your first opportunity to track potential deals."})]}),(0,A.jsx)(f.$,{ml:"auto",colorScheme:"orange",size:"sm",leftIcon:(0,A.jsx)(L.GGD,{}),onClick:()=>i("/opportunities/new"),children:"Create First Opportunity"})]}),(0,A.jsxs)(C.r,{columns:{base:1,md:2,lg:4},spacing:4,children:[(0,A.jsx)(n.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,A.jsx)(s.b,{children:(0,A.jsxs)(T.r,{children:[(0,A.jsx)(E.v,{color:de,children:"Total Pipeline Value"}),(0,A.jsxs)(D.k,{color:ae,fontSize:"2xl",children:["$",((null===O||void 0===O?void 0:O.totalValue)||0).toLocaleString()]}),(0,A.jsxs)(G.h,{color:ce,children:[(0,A.jsx)(F,{type:"increase"}),(null===O||void 0===O?void 0:O.totalOpportunities)||0," opportunities"]})]})})}),(0,A.jsx)(n.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,A.jsx)(s.b,{children:(0,A.jsxs)(T.r,{children:[(0,A.jsx)(E.v,{color:de,children:"Expected Revenue"}),(0,A.jsxs)(D.k,{color:ae,fontSize:"2xl",children:["$",((null===O||void 0===O?void 0:O.expectedRevenue)||0).toLocaleString()]}),(0,A.jsx)(G.h,{color:ce,children:"Based on probability"})]})})}),(0,A.jsx)(n.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,A.jsx)(s.b,{children:(0,A.jsxs)(T.r,{children:[(0,A.jsx)(E.v,{color:de,children:"Conversion Rate"}),(0,A.jsxs)(D.k,{color:ae,fontSize:"2xl",children:[(null===O||void 0===O?void 0:O.conversionRate)||0,"%"]}),(0,A.jsx)(G.h,{color:ce,children:"Won / Total Closed"})]})})}),(0,A.jsx)(n.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,A.jsx)(s.b,{children:(0,A.jsxs)(T.r,{children:[(0,A.jsx)(E.v,{color:de,children:"Avg Deal Size"}),(0,A.jsxs)(D.k,{color:ae,fontSize:"2xl",children:["$",((null===O||void 0===O?void 0:O.averageDealSize)||0).toLocaleString()]}),(0,A.jsxs)(G.h,{color:ce,children:[(null===O||void 0===O?void 0:O.averageSalesCycle)||0," day cycle"]})]})})})]}),$&&(0,A.jsxs)(n.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:[(0,A.jsx)(x.a,{children:(0,A.jsx)(a.E,{fontWeight:"bold",color:ae,children:"Revenue Targets & Progress"})}),(0,A.jsx)(s.b,{children:(0,A.jsxs)(C.r,{columns:{base:1,md:3},spacing:4,children:[(0,A.jsxs)(c.a,{children:[(0,A.jsxs)(a.E,{fontSize:"sm",color:ae,fontWeight:"medium",mb:2,children:["Monthly Target: $",($.monthly||0).toLocaleString()]}),(0,A.jsx)(u.k,{value:$.currentMonthProgress||0,colorScheme:"green",size:"sm",borderRadius:"full"}),(0,A.jsxs)(a.E,{fontSize:"xs",color:de,mt:1,children:[$.currentMonthProgress||0,"% achieved"]}),(0,A.jsxs)(a.E,{fontSize:"xs",color:ce,children:["Need ",(null===(e=$.requiredOpportunities)||void 0===e?void 0:e.monthly)||0," more opportunities"]})]}),(0,A.jsxs)(c.a,{children:[(0,A.jsxs)(a.E,{fontSize:"sm",color:ae,fontWeight:"medium",mb:2,children:["Quarterly Target: $",($.quarterly||0).toLocaleString()]}),(0,A.jsx)(u.k,{value:$.currentQuarterProgress||0,colorScheme:"blue",size:"sm",borderRadius:"full"}),(0,A.jsxs)(a.E,{fontSize:"xs",color:de,mt:1,children:[$.currentQuarterProgress||0,"% achieved"]}),(0,A.jsxs)(a.E,{fontSize:"xs",color:ce,children:["Need ",(null===(r=$.requiredOpportunities)||void 0===r?void 0:r.quarterly)||0," more opportunities"]})]}),(0,A.jsxs)(c.a,{children:[(0,A.jsxs)(a.E,{fontSize:"sm",color:ae,fontWeight:"medium",mb:2,children:["Yearly Target: $",($.yearly||0).toLocaleString()]}),(0,A.jsx)(u.k,{value:$.currentYearProgress||0,colorScheme:"purple",size:"sm",borderRadius:"full"}),(0,A.jsxs)(a.E,{fontSize:"xs",color:de,mt:1,children:[$.currentYearProgress||0,"% achieved"]}),(0,A.jsxs)(a.E,{fontSize:"xs",color:ce,children:["Need ",(null===(o=$.requiredOpportunities)||void 0===o?void 0:o.yearly)||0," more opportunities"]})]})]})})]}),(0,A.jsxs)(C.r,{columns:{base:1,lg:3},spacing:6,children:[(0,A.jsx)(ie,{score:(null===O||void 0===O?void 0:O.healthScore)||0}),(null===O||void 0===O?void 0:O.stageMetrics)&&(0,A.jsx)(te,{stageMetrics:O.stageMetrics}),(0,A.jsx)(ne,{onCreateTask:async e=>{try{await N({variables:{input:{title:e.title,description:e.description,priority:e.priority,dueDate:new Date(Date.now()+2592e5).toISOString()}}}),g({title:"Task created",description:'"'.concat(e.title,'" has been added to your tasks'),status:"success",duration:3e3,isClosable:!0}),H()}catch(r){g({title:"Failed to create task",description:r.message||"An error occurred",status:"error",duration:5e3,isClosable:!0})}}})]}),(null===O||void 0===O?void 0:O.suggestedActions)&&O.suggestedActions.length>0&&(0,A.jsxs)(n.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:[(0,A.jsx)(x.a,{children:(0,A.jsxs)(h.z,{children:[(0,A.jsx)(b.I,{as:L.x_j,color:"#FFA500"}),(0,A.jsx)(a.E,{fontWeight:"bold",color:ae,children:"Recommended Actions"})]})}),(0,A.jsx)(s.b,{children:(0,A.jsx)(l.T,{spacing:3,align:"stretch",children:O.suggestedActions.map((e,r)=>(0,A.jsxs)(h.z,{align:"start",spacing:3,children:[(0,A.jsx)(b.I,{as:"HIGH"===e.priority?L.y3G:L.A3x,color:"HIGH"===e.priority?"red.500":"green.500",mt:1}),(0,A.jsxs)(l.T,{align:"start",spacing:0,flex:"1",children:[(0,A.jsx)(a.E,{fontWeight:"medium",color:ae,children:e.title}),(0,A.jsx)(a.E,{fontSize:"sm",color:ce,children:e.description})]}),(0,A.jsx)(p.E,{colorScheme:"HIGH"===e.priority?"red":"yellow",children:e.priority})]},r))})})]})]})}),(0,A.jsx)(Q.n,{})]})}}}]);
//# sourceMappingURL=8056.1733ce50.chunk.js.map