"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[748],{20748:(e,r,o)=>{o.r(r),o.d(r,{default:()=>ee});var i,t,n,s=o(57528),l=(o(65043),o(88787)),a=o(34334),c=o(85871),d=o(33430),x=o(87139),h=o(22107),p=o(98662),u=o(42703),g=o(83169),b=o(24330),j=o(26201),m=o(68659),y=o(44093),v=o(73212),f=o(25011),k=o(57371),S=o(76659),z=o(96148),w=o(10202),C=o(94217),T=o(26381),E=o(94085),D=o(53332),G=o(78149),R=o(30502),I=o(47726),P=o(28846),H=o(39081),M=o(73216),U=o(31881),F=o(10585),W=o(70459),O=o(1009),A=o(52003),N=o(63295),$=o(95214),q=o(69129),Z=o(39985),_=o(66037),L=o(70579);const Q=(0,W.J1)(i||(i=(0,s.A)(["\n  query GetPipelineMetrics {\n    pipelineMetrics {\n      totalOpportunities\n      totalValue\n      averageDealSize\n      conversionRate\n      averageSalesCycle\n      expectedRevenue\n      stageMetrics {\n        stageName\n        count\n        value\n        conversionToNext\n        averageTimeInStage\n      }\n      monthlyTrend {\n        month\n        created\n        won\n        lost\n        value\n      }\n      healthScore\n      suggestedActions {\n        type\n        title\n        description\n        priority\n      }\n    }\n  }\n"]))),B=(0,W.J1)(t||(t=(0,s.A)(["\n  query GetRevenueTargets {\n    revenueTargets {\n      monthly\n      quarterly\n      yearly\n      currentMonthProgress\n      currentQuarterProgress\n      currentYearProgress\n      requiredOpportunities {\n        monthly\n        quarterly\n        yearly\n      }\n    }\n  }\n"]))),Y=(0,W.J1)(n||(n=(0,s.A)(["\n  mutation CreateOpportunityTask($input: OpportunityTaskInput!) {\n    createOpportunityTask(input: $input) {\n      id\n      title\n      description\n      priority\n      dueDate\n    }\n  }\n"]))),J=[{icon:O.kGk,title:"Send initial proposal",description:"Draft and send a proposal to the client outlining your solution",priority:"HIGH",category:"proposal"},{icon:O.QFc,title:"Schedule discovery call",description:"Book a call to understand client needs and pain points",priority:"HIGH",category:"discovery"},{icon:O.pHD,title:"Send follow-up email",description:"Follow up on your last interaction with the client",priority:"MEDIUM",category:"followup"},{icon:O.wIk,title:"Schedule product demo",description:"Book a demo to showcase your solution to the client",priority:"HIGH",category:"demo"},{icon:O.jH2,title:"Prepare contract",description:"Draft the contract terms and pricing for client review",priority:"HIGH",category:"closing"},{icon:O.z8N,title:"Send quote",description:"Provide detailed pricing and payment terms",priority:"HIGH",category:"pricing"}],V=e=>{let{score:r}=e;const{colorMode:o}=(0,y.G6)(),i=(0,Z.oU)("background.cardGradient",o),t=(0,Z.oU)("border.darkCard",o),n=(0,Z.oU)("light"===o?"text.primary":"text.primaryDark",o),s=(0,Z.oU)("light"===o?"text.muted":"text.mutedDark",o),l=e=>e>=80?"green":e>=60?"yellow":e>=40?"orange":"red";return(0,L.jsx)(g.Z,{bg:i,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:t,borderRadius:"lg",children:(0,L.jsx)(b.b,{children:(0,L.jsxs)(w.T,{spacing:3,children:[(0,L.jsx)(H.E,{fontSize:"sm",fontWeight:"bold",color:n,children:"Pipeline Health"}),(0,L.jsxs)(h.a,{position:"relative",width:"120px",height:"120px",children:[(0,L.jsxs)("svg",{width:"120",height:"120",style:{transform:"rotate(-90deg)"},children:[(0,L.jsx)("circle",{cx:"60",cy:"60",r:"50",stroke:"#E2E8F0",strokeWidth:"10",fill:"none"}),(0,L.jsx)("circle",{cx:"60",cy:"60",r:"50",stroke:"var(--chakra-colors-".concat(l(r),"-500)"),strokeWidth:"10",fill:"none",strokeDasharray:"".concat(100*Math.PI),strokeDashoffset:"".concat(100*Math.PI*(1-r/100)),style:{transition:"stroke-dashoffset 0.5s ease"}})]}),(0,L.jsx)(m.o,{position:"absolute",top:"0",left:"0",width:"120px",height:"120px",children:(0,L.jsxs)(w.T,{spacing:0,children:[(0,L.jsxs)(H.E,{fontSize:"2xl",fontWeight:"bold",color:"".concat(l(r),".500"),children:[r,"%"]}),(0,L.jsx)(H.E,{fontSize:"xs",color:s,children:(e=>e>=80?"Excellent":e>=60?"Good":e>=40?"Needs Attention":"Critical")(r)})]})})]})]})})})},K=e=>{let{stageMetrics:r}=e;const o=Math.max(...r.map(e=>e.value)),{colorMode:i}=(0,y.G6)(),t=(0,Z.oU)("background.cardGradient",i),n=(0,Z.oU)("border.darkCard",i),s=(0,Z.oU)("light"===i?"text.primary":"text.primaryDark",i),l=(0,Z.oU)("light"===i?"text.muted":"text.mutedDark",i);return(0,L.jsxs)(g.Z,{bg:t,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:n,borderRadius:"lg",children:[(0,L.jsx)(j.a,{children:(0,L.jsx)(H.E,{fontWeight:"bold",color:s,children:"Conversion Funnel"})}),(0,L.jsx)(b.b,{children:(0,L.jsx)(w.T,{spacing:2,align:"stretch",children:r.map(e=>(0,L.jsxs)(h.a,{children:[(0,L.jsxs)(z.z,{justify:"space-between",mb:1,children:[(0,L.jsx)(H.E,{fontSize:"sm",fontWeight:"medium",color:s,children:e.stageName}),(0,L.jsxs)(z.z,{spacing:4,children:[(0,L.jsxs)(x.E,{colorScheme:"blue",bg:"light"===i?"blue.100":"rgba(56, 178, 255, 0.2)",color:"light"===i?"blue.800":"white",children:[e.count," deals"]}),(0,L.jsxs)(H.E,{fontSize:"sm",color:s,fontWeight:"medium",children:["$",e.value>=1e3?"".concat((e.value/1e3).toFixed(1),"k"):e.value.toFixed(0)]})]})]}),(0,L.jsx)(k.k,{value:e.value/o*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.conversionToNext>0&&(0,L.jsxs)(H.E,{fontSize:"xs",color:l,mt:1,children:[e.conversionToNext,"% convert to next stage"]})]},e.stageName))})})]})},X=e=>{let{onCreateTask:r}=e;const{colorMode:o}=(0,y.G6)(),i=(0,Z.oU)("background.cardGradient",o),t=(0,Z.oU)("border.darkCard",o),n=(0,Z.oU)("light"===o?"text.primary":"text.primaryDark",o),s=(0,Z.oU)("light"===o?"text.muted":"text.mutedDark",o);return(0,L.jsxs)(g.Z,{bg:i,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:t,borderRadius:"lg",children:[(0,L.jsx)(j.a,{children:(0,L.jsxs)(z.z,{justify:"space-between",children:[(0,L.jsx)(H.E,{fontWeight:"bold",color:n,children:"Suggested Actions"}),(0,L.jsx)(I.m,{label:"Create tasks to move deals forward",children:(0,L.jsx)(f.I,{as:O.y3G,color:s})})]})}),(0,L.jsx)(b.b,{children:(0,L.jsx)(w.T,{spacing:3,align:"stretch",children:J.slice(0,4).map((e,i)=>(0,L.jsxs)(z.z,{p:3,borderWidth:"1px",borderColor:"rgba(255, 255, 255, 0.2)",borderRadius:"md",_hover:{bg:"rgba(255, 255, 255, 0.1)",cursor:"pointer"},onClick:()=>r(e),children:[(0,L.jsx)(f.I,{as:e.icon,color:(0,Z.oU)("primary",o),boxSize:5}),(0,L.jsxs)(w.T,{align:"start",flex:"1",spacing:0,children:[(0,L.jsx)(H.E,{fontSize:"sm",fontWeight:"medium",color:n,children:e.title}),(0,L.jsx)(H.E,{fontSize:"xs",color:s,children:e.description})]}),(0,L.jsx)(u.K,{icon:(0,L.jsx)(O.GGD,{}),"aria-label":"Create task",size:"sm",variant:"ghost"})]},i))})})]})},ee=()=>{var e,r,o;(0,_.H)("Opportunity Dashboard");const i=(0,M.Zp)(),t=(0,R.d)(),{colorMode:n}=(0,y.G6)(),{data:s,loading:u,error:I,refetch:W}=(0,F.IT)(Q,{fetchPolicy:"network-only",errorPolicy:"all"}),{data:J,loading:ee,error:re}=(0,F.IT)(B,{fetchPolicy:"network-only",errorPolicy:"all"});I&&console.error("Pipeline Metrics Error:",I),re&&console.error("Revenue Targets Error:",re);const[oe]=(0,U.n)(Y),ie=null===s||void 0===s?void 0:s.pipelineMetrics,te=null===J||void 0===J?void 0:J.revenueTargets,ne=(0,Z.oU)("background.main",n),se=(0,Z.oU)("background.cardGradient",n),le=(0,Z.oU)("border.darkCard",n),ae=(0,Z.oU)("light"===n?"text.primary":"text.primaryDark",n),ce=(0,Z.oU)("light"===n?"text.muted":"text.mutedDark",n),de=(0,Z.oU)("light"===n?"text.secondary":"text.secondaryDark",n),xe=(0,Z.oU)("button.bg",n),he=(0,Z.oU)("button.hoverBg",n);if(u||ee)return(0,L.jsxs)(h.a,{bg:ne,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,L.jsx)(A.m,{}),(0,L.jsx)($.y,{moduleConfig:q.default}),(0,L.jsx)(h.a,{maxW:"100%",px:{base:4,md:8},py:8,flex:"1",children:(0,L.jsx)(m.o,{children:(0,L.jsx)(S.y,{size:"xl"})})}),(0,L.jsx)(N.n,{})]});const pe=(null===ie||void 0===ie?void 0:ie.totalOpportunities)>0;return(0,L.jsxs)(h.a,{bg:ne,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,L.jsx)(A.m,{}),(0,L.jsx)($.y,{moduleConfig:q.default}),(0,L.jsx)(h.a,{maxW:"100%",px:{base:4,md:8},py:8,flex:"1",children:(0,L.jsxs)(w.T,{spacing:6,align:"stretch",children:[(0,L.jsxs)(w.T,{spacing:4,align:"stretch",children:[(0,L.jsxs)(w.T,{align:"start",spacing:1,children:[(0,L.jsx)(P.D,{size:"lg",color:ae,children:"Opportunity Pipeline"}),(0,L.jsx)(H.E,{color:ce,fontSize:{base:"sm",md:"md"},children:"Track your sales pipeline health and conversion metrics"})]}),(0,L.jsxs)(z.z,{spacing:2,flexWrap:"wrap",children:[(0,L.jsx)(p.$,{leftIcon:(0,L.jsx)(O.jTZ,{}),variant:"outline",size:{base:"sm",md:"md"},borderColor:"light"===n?"gray.300":"rgba(255, 255, 255, 0.3)",color:ae,_hover:{bg:"light"===n?"gray.50":se},onClick:()=>W(),children:"Refresh"}),(0,L.jsx)(p.$,{leftIcon:(0,L.jsx)(O.GGD,{}),size:{base:"sm",md:"md"},bg:xe,color:"white",_hover:{bg:he},onClick:()=>i("/opportunities/new"),children:"New Opportunity"})]})]}),!pe&&(0,L.jsxs)(l.F,{status:"warning",borderRadius:"md",children:[(0,L.jsx)(c._,{}),(0,L.jsxs)(h.a,{children:[(0,L.jsx)(d.X,{children:"No opportunities in your pipeline!"}),(0,L.jsx)(a.T,{children:"Start by creating your first opportunity to track potential deals."})]}),(0,L.jsx)(p.$,{ml:"auto",colorScheme:"orange",size:"sm",leftIcon:(0,L.jsx)(O.GGD,{}),onClick:()=>i("/opportunities/new"),children:"Create First Opportunity"})]}),(0,L.jsxs)(v.r,{columns:{base:1,md:2,lg:4},spacing:4,children:[(0,L.jsx)(g.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,L.jsx)(b.b,{children:(0,L.jsxs)(C.r,{children:[(0,L.jsx)(D.v,{color:de,children:"Total Pipeline Value"}),(0,L.jsxs)(G.k,{color:ae,fontSize:"2xl",children:["$",((null===ie||void 0===ie?void 0:ie.totalValue)||0).toLocaleString()]}),(0,L.jsxs)(E.h,{color:ce,children:[(0,L.jsx)(T.Ip,{type:"increase"}),(null===ie||void 0===ie?void 0:ie.totalOpportunities)||0," opportunities"]})]})})}),(0,L.jsx)(g.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,L.jsx)(b.b,{children:(0,L.jsxs)(C.r,{children:[(0,L.jsx)(D.v,{color:de,children:"Expected Revenue"}),(0,L.jsxs)(G.k,{color:ae,fontSize:"2xl",children:["$",((null===ie||void 0===ie?void 0:ie.expectedRevenue)||0).toLocaleString()]}),(0,L.jsx)(E.h,{color:ce,children:"Based on probability"})]})})}),(0,L.jsx)(g.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,L.jsx)(b.b,{children:(0,L.jsxs)(C.r,{children:[(0,L.jsx)(D.v,{color:de,children:"Conversion Rate"}),(0,L.jsxs)(G.k,{color:ae,fontSize:"2xl",children:[(null===ie||void 0===ie?void 0:ie.conversionRate)||0,"%"]}),(0,L.jsx)(E.h,{color:ce,children:"Won / Total Closed"})]})})}),(0,L.jsx)(g.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:(0,L.jsx)(b.b,{children:(0,L.jsxs)(C.r,{children:[(0,L.jsx)(D.v,{color:de,children:"Avg Deal Size"}),(0,L.jsxs)(G.k,{color:ae,fontSize:"2xl",children:["$",((null===ie||void 0===ie?void 0:ie.averageDealSize)||0).toLocaleString()]}),(0,L.jsxs)(E.h,{color:ce,children:[(null===ie||void 0===ie?void 0:ie.averageSalesCycle)||0," day cycle"]})]})})})]}),te&&(0,L.jsxs)(g.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:[(0,L.jsx)(j.a,{children:(0,L.jsx)(H.E,{fontWeight:"bold",color:ae,children:"Revenue Targets & Progress"})}),(0,L.jsx)(b.b,{children:(0,L.jsxs)(v.r,{columns:{base:1,md:3},spacing:4,children:[(0,L.jsxs)(h.a,{children:[(0,L.jsxs)(H.E,{fontSize:"sm",color:ae,fontWeight:"medium",mb:2,children:["Monthly Target: $",(te.monthly||0).toLocaleString()]}),(0,L.jsx)(k.k,{value:te.currentMonthProgress||0,colorScheme:"green",size:"sm",borderRadius:"full"}),(0,L.jsxs)(H.E,{fontSize:"xs",color:de,mt:1,children:[te.currentMonthProgress||0,"% achieved"]}),(0,L.jsxs)(H.E,{fontSize:"xs",color:ce,children:["Need ",(null===(e=te.requiredOpportunities)||void 0===e?void 0:e.monthly)||0," more opportunities"]})]}),(0,L.jsxs)(h.a,{children:[(0,L.jsxs)(H.E,{fontSize:"sm",color:ae,fontWeight:"medium",mb:2,children:["Quarterly Target: $",(te.quarterly||0).toLocaleString()]}),(0,L.jsx)(k.k,{value:te.currentQuarterProgress||0,colorScheme:"blue",size:"sm",borderRadius:"full"}),(0,L.jsxs)(H.E,{fontSize:"xs",color:de,mt:1,children:[te.currentQuarterProgress||0,"% achieved"]}),(0,L.jsxs)(H.E,{fontSize:"xs",color:ce,children:["Need ",(null===(r=te.requiredOpportunities)||void 0===r?void 0:r.quarterly)||0," more opportunities"]})]}),(0,L.jsxs)(h.a,{children:[(0,L.jsxs)(H.E,{fontSize:"sm",color:ae,fontWeight:"medium",mb:2,children:["Yearly Target: $",(te.yearly||0).toLocaleString()]}),(0,L.jsx)(k.k,{value:te.currentYearProgress||0,colorScheme:"purple",size:"sm",borderRadius:"full"}),(0,L.jsxs)(H.E,{fontSize:"xs",color:de,mt:1,children:[te.currentYearProgress||0,"% achieved"]}),(0,L.jsxs)(H.E,{fontSize:"xs",color:ce,children:["Need ",(null===(o=te.requiredOpportunities)||void 0===o?void 0:o.yearly)||0," more opportunities"]})]})]})})]}),(0,L.jsxs)(v.r,{columns:{base:1,lg:3},spacing:6,children:[(0,L.jsx)(V,{score:(null===ie||void 0===ie?void 0:ie.healthScore)||0}),(null===ie||void 0===ie?void 0:ie.stageMetrics)&&(0,L.jsx)(K,{stageMetrics:ie.stageMetrics}),(0,L.jsx)(X,{onCreateTask:async e=>{try{await oe({variables:{input:{title:e.title,description:e.description,priority:e.priority,dueDate:new Date(Date.now()+2592e5).toISOString()}}}),t({title:"Task created",description:'"'.concat(e.title,'" has been added to your tasks'),status:"success",duration:3e3,isClosable:!0}),W()}catch(r){t({title:"Failed to create task",description:r.message||"An error occurred",status:"error",duration:5e3,isClosable:!0})}}})]}),(null===ie||void 0===ie?void 0:ie.suggestedActions)&&ie.suggestedActions.length>0&&(0,L.jsxs)(g.Z,{bg:se,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:le,borderRadius:"lg",children:[(0,L.jsx)(j.a,{children:(0,L.jsxs)(z.z,{children:[(0,L.jsx)(f.I,{as:O.x_j,color:"#FFA500"}),(0,L.jsx)(H.E,{fontWeight:"bold",color:ae,children:"Recommended Actions"})]})}),(0,L.jsx)(b.b,{children:(0,L.jsx)(w.T,{spacing:3,align:"stretch",children:ie.suggestedActions.map((e,r)=>(0,L.jsxs)(z.z,{align:"start",spacing:3,children:[(0,L.jsx)(f.I,{as:"HIGH"===e.priority?O.y3G:O.A3x,color:"HIGH"===e.priority?"red.500":"green.500",mt:1}),(0,L.jsxs)(w.T,{align:"start",spacing:0,flex:"1",children:[(0,L.jsx)(H.E,{fontWeight:"medium",color:ae,children:e.title}),(0,L.jsx)(H.E,{fontSize:"sm",color:ce,children:e.description})]}),(0,L.jsx)(x.E,{colorScheme:"HIGH"===e.priority?"red":"yellow",children:e.priority})]},r))})})]})]})}),(0,L.jsx)(N.n,{})]})}}}]);
//# sourceMappingURL=748.d1ebee0b.chunk.js.map