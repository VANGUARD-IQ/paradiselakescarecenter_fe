{"version":3,"file":"static/js/3952.01cf2553.chunk.js","mappings":"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","sources":["pages/companyknowledge/SharedArticleViewer.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport {\n    Box,\n    Container,\n    Heading,\n    Text,\n    HStack,\n    VStack,\n    Badge,\n    useColorMode,\n    Spinner,\n    Alert,\n    AlertIcon,\n    Divider,\n    Tag,\n    TagLabel,\n    Card,\n    CardBody,\n    Flex,\n    Button,\n} from \"@chakra-ui/react\";\nimport { NavbarWithCallToAction } from \"../../components/chakra/NavbarWithCallToAction/NavbarWithCallToAction\";\nimport { FooterWithFourColumns } from \"../../components/chakra/FooterWithFourColumns/FooterWithFourColumns\";\nimport { UnifiedLoginModal } from \"../authentication/components/UnifiedLoginModal\";\nimport { usePageTitle } from \"../../hooks/useDocumentTitle\";\nimport { getColor, brandConfig } from \"../../brandConfig\";\nimport { format } from \"date-fns\";\nimport DOMPurify from \"dompurify\";\n\nconst GET_SHARED_ARTICLE = gql`\n    query GetSharedArticle($token: String!) {\n        sharedCompanyKnowledgeArticle(token: $token) {\n            id\n            title\n            content\n            category\n            tags\n            viewCount\n            createdAt\n            updatedAt\n        }\n    }\n`;\n\nconst SharedArticleViewer: React.FC = () => {\n    const { token } = useParams<{ token: string }>();\n    const { colorMode } = useColorMode();\n    usePageTitle(\"Shared Knowledge Article\");\n\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [showLoginModal, setShowLoginModal] = useState(false);\n\n    const bgMain = getColor(\"background.main\", colorMode);\n    const cardGradientBg = getColor(\"background.cardGradient\", colorMode);\n    const cardBorder = getColor(\"border.darkCard\", colorMode);\n    const textPrimary = getColor(colorMode === 'light' ? \"text.primary\" : \"text.primaryDark\", colorMode);\n    const textSecondary = getColor(colorMode === 'light' ? \"text.secondary\" : \"text.secondaryDark\", colorMode);\n\n    // Check if user is already authenticated\n    useEffect(() => {\n        const authToken = localStorage.getItem('auth_token');\n        if (authToken) {\n            setIsAuthenticated(true);\n        } else {\n            setShowLoginModal(true);\n        }\n    }, []);\n\n    const { data, loading, error } = useQuery(GET_SHARED_ARTICLE, {\n        variables: { token },\n        skip: !token || !isAuthenticated,\n    });\n\n    const handleLoginSuccess = (authToken: string) => {\n        localStorage.setItem('auth_token', authToken);\n        setIsAuthenticated(true);\n        setShowLoginModal(false);\n    };\n\n    // Show login modal if not authenticated\n    if (!isAuthenticated) {\n        return (\n            <Box bg={bgMain} minH=\"100vh\" display=\"flex\" flexDirection=\"column\">\n                <NavbarWithCallToAction />\n\n                <Container maxW=\"container.lg\" py={8} flex=\"1\">\n                    <VStack spacing={6} align=\"center\" py={12}>\n                        <Badge colorScheme=\"blue\" fontSize=\"md\" px={4} py={2}>\n                            üîê SHARED ARTICLE - Login Required\n                        </Badge>\n                        <Heading color={textPrimary} fontFamily={brandConfig.fonts.heading} textAlign=\"center\">\n                            Authentication Required\n                        </Heading>\n                        <Text color={textSecondary} textAlign=\"center\" maxW=\"md\">\n                            This is a shared knowledge article. Please log in to view the content.\n                        </Text>\n                        <Button colorScheme=\"blue\" onClick={() => setShowLoginModal(true)} size=\"lg\">\n                            Sign In to Continue\n                        </Button>\n                    </VStack>\n                </Container>\n\n                <FooterWithFourColumns />\n\n                <UnifiedLoginModal\n                    isOpen={showLoginModal}\n                    onClose={() => setShowLoginModal(false)}\n                    onSuccess={handleLoginSuccess}\n                />\n            </Box>\n        );\n    }\n\n    if (loading) {\n        return (\n            <Box bg={bgMain} minH=\"100vh\" display=\"flex\" flexDirection=\"column\">\n                <NavbarWithCallToAction />\n                <Container maxW=\"container.xl\" py={8} flex=\"1\">\n                    <Flex justify=\"center\" align=\"center\" minH=\"400px\">\n                        <Spinner size=\"xl\" />\n                    </Flex>\n                </Container>\n                <FooterWithFourColumns />\n            </Box>\n        );\n    }\n\n    if (error || !data?.sharedCompanyKnowledgeArticle) {\n        return (\n            <Box bg={bgMain} minH=\"100vh\" display=\"flex\" flexDirection=\"column\">\n                <NavbarWithCallToAction />\n                <Container maxW=\"container.xl\" py={8} flex=\"1\">\n                    <Alert status=\"error\">\n                        <AlertIcon />\n                        {error?.message || \"Article not found or share link expired\"}\n                    </Alert>\n                </Container>\n                <FooterWithFourColumns />\n            </Box>\n        );\n    }\n\n    const article = data.sharedCompanyKnowledgeArticle;\n    const sanitizedContent = DOMPurify.sanitize(article.content);\n\n    return (\n        <Box bg={bgMain} minH=\"100vh\" display=\"flex\" flexDirection=\"column\">\n            <NavbarWithCallToAction />\n\n            <Container maxW=\"container.lg\" py={8} flex=\"1\">\n                <VStack align=\"stretch\" spacing={6}>\n                    {/* Shared Badge */}\n                    <Badge colorScheme=\"blue\" alignSelf=\"start\" fontSize=\"sm\" px={3} py={1}>\n                        üîê SHARED ARTICLE - Login Required\n                    </Badge>\n\n                    {/* Title */}\n                    <Heading color={textPrimary} fontFamily={brandConfig.fonts.heading} size=\"2xl\">\n                        {article.title}\n                    </Heading>\n\n                    {/* Metadata */}\n                    <Card bg={cardGradientBg} border=\"1px\" borderColor={cardBorder}>\n                        <CardBody>\n                            <HStack justify=\"space-between\" wrap=\"wrap\" spacing={4}>\n                                {article.category && (\n                                    <HStack>\n                                        <Text fontSize=\"sm\" color={textSecondary}>Category:</Text>\n                                        <Badge colorScheme=\"cyan\">{article.category}</Badge>\n                                    </HStack>\n                                )}\n                                <Text fontSize=\"sm\" color={textSecondary}>\n                                    üëÅÔ∏è {article.viewCount || 0} views\n                                </Text>\n                                <Text fontSize=\"sm\" color={textSecondary}>\n                                    Last updated: {format(new Date(article.updatedAt), 'MMM dd, yyyy')}\n                                </Text>\n                            </HStack>\n                        </CardBody>\n                    </Card>\n\n                    {/* Tags */}\n                    {article.tags && article.tags.length > 0 && (\n                        <HStack wrap=\"wrap\" spacing={2}>\n                            <Text fontSize=\"sm\" color={textSecondary}>Tags:</Text>\n                            {article.tags.map((tag: string) => (\n                                <Tag key={tag} colorScheme=\"blue\">\n                                    <TagLabel>{tag}</TagLabel>\n                                </Tag>\n                            ))}\n                        </HStack>\n                    )}\n\n                    <Divider />\n\n                    {/* Article Content */}\n                    <Card bg={cardGradientBg} border=\"1px\" borderColor={cardBorder}>\n                        <CardBody>\n                            <Box\n                                className=\"article-content\"\n                                dangerouslySetInnerHTML={{ __html: sanitizedContent }}\n                                sx={{\n                                    '& h1': { fontSize: '2xl', fontWeight: 'bold', mb: 4, mt: 6, color: textPrimary },\n                                    '& h2': { fontSize: 'xl', fontWeight: 'bold', mb: 3, mt: 5, color: textPrimary },\n                                    '& h3': { fontSize: 'lg', fontWeight: 'bold', mb: 2, mt: 4, color: textPrimary },\n                                    '& p': { mb: 4, lineHeight: '1.8', color: textPrimary },\n                                    '& ul, & ol': { ml: 6, mb: 4, color: textPrimary },\n                                    '& li': { mb: 2, lineHeight: '1.6' },\n                                    '& a': { color: 'blue.500', textDecoration: 'underline', _hover: { color: 'blue.700' } },\n                                    '& code': { bg: 'gray.100', px: 2, py: 1, borderRadius: 'md', fontSize: 'sm', fontFamily: 'mono' },\n                                    '& pre': { bg: 'gray.800', color: 'white', p: 4, borderRadius: 'md', overflowX: 'auto', mb: 4 },\n                                    '& img': { maxW: '100%', borderRadius: 'md', my: 4, boxShadow: 'md' },\n                                    '& blockquote': {\n                                        borderLeft: '4px solid',\n                                        borderColor: 'blue.500',\n                                        pl: 4,\n                                        py: 2,\n                                        fontStyle: 'italic',\n                                        mb: 4,\n                                        bg: colorMode === 'light' ? 'blue.50' : 'rgba(66, 153, 225, 0.1)'\n                                    },\n                                    '& table': { width: '100%', mb: 4, borderCollapse: 'collapse' },\n                                    '& th': { bg: 'gray.100', p: 2, border: '1px solid', borderColor: 'gray.300', fontWeight: 'bold' },\n                                    '& td': { p: 2, border: '1px solid', borderColor: 'gray.300' },\n                                }}\n                            />\n                        </CardBody>\n                    </Card>\n\n                    {/* Footer Info */}\n                    <Card bg={cardGradientBg} border=\"1px\" borderColor={cardBorder}>\n                        <CardBody>\n                            <Text fontSize=\"sm\" color={textSecondary} textAlign=\"center\">\n                                This is a shared knowledge article. Authentication required to view.\n                            </Text>\n                        </CardBody>\n                    </Card>\n                </VStack>\n            </Container>\n\n            <FooterWithFourColumns />\n        </Box>\n    );\n};\n\nexport default SharedArticleViewer;\n"],"names":["GET_SHARED_ARTICLE","gql","_templateObject","_taggedTemplateLiteral","SharedArticleViewer","token","useParams","colorMode","useColorMode","usePageTitle","isAuthenticated","setIsAuthenticated","useState","showLoginModal","setShowLoginModal","bgMain","getColor","cardGradientBg","cardBorder","textPrimary","textSecondary","useEffect","localStorage","getItem","data","loading","error","useQuery","variables","skip","handleLoginSuccess","authToken","setItem","_jsxs","Box","bg","minH","display","flexDirection","children","_jsx","NavbarWithCallToAction","Container","maxW","py","flex","VStack","spacing","align","Badge","colorScheme","fontSize","px","Heading","color","fontFamily","brandConfig","fonts","heading","textAlign","Text","Button","onClick","size","FooterWithFourColumns","UnifiedLoginModal","isOpen","onClose","onSuccess","Flex","justify","Spinner","sharedCompanyKnowledgeArticle","Alert","status","AlertIcon","message","article","sanitizedContent","DOMPurify","sanitize","content","alignSelf","title","Card","border","borderColor","CardBody","HStack","wrap","category","viewCount","format","Date","updatedAt","tags","length","map","tag","Tag","TagLabel","Divider","className","dangerouslySetInnerHTML","__html","sx","fontWeight","mb","mt","lineHeight","ml","textDecoration","_hover","borderRadius","p","overflowX","my","boxShadow","borderLeft","pl","fontStyle","width","borderCollapse"],"sourceRoot":""}