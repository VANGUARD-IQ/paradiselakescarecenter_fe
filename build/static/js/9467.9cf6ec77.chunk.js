"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[9467],{59467:(e,o,i)=>{i.r(o),i.d(o,{default:()=>ee});var n,s,l=i(57528),r=i(65043),t=i(96870),a=i(87139),c=i(22107),d=i(98662),h=i(42703),x=i(83169),p=i(24330),g=i(68659),j=i(44093),u=i(98939),f=i(82459),m=i(35699),v=i(45973),y=i(29244),b=i(7189),S=i(67516),E=i(35929),I=i(56529),w=i(15071),k=i(11054),P=i(78460),U=i(25722),O=i(76659),V=i(96148),D=i(10202),z=i(94217),F=i(53332),C=i(78149),H=i(48239),T=i(30502),L=i(28846),W=i(39081),R=i(58861),A=i(1009),B=i(73216),M=i(10585),_=i(70459),N=i(52003),$=i(63295),G=i(95214),J=i(93128),Y=i(74204),q=i(66037),Z=i(73212),K=i(70579);const Q=(0,_.J1)(n||(n=(0,l.A)(["\n  query IPFSVideo($id: String!) {\n    ipfsVideo(id: $id) {\n      id\n      title\n      description\n      ipfsHash\n      ipfsUrl\n      thumbnailUrl\n      source\n      fileSize\n      mimeType\n      uploadedBy\n      uploadedByName\n      tags\n      viewCount\n      isPublic\n      isPrivateFile\n      createdAt\n      updatedAt\n    }\n  }\n"]))),X=(0,_.J1)(s||(s=(0,l.A)(["\n  query IPFSVideoByHash($ipfsHash: String!) {\n    ipfsVideoByHash(ipfsHash: $ipfsHash) {\n      id\n      title\n      description\n      ipfsHash\n      ipfsUrl\n      thumbnailUrl\n      source\n      fileSize\n      mimeType\n      uploadedBy\n      uploadedByName\n      tags\n      viewCount\n      isPublic\n      isPrivateFile\n      createdAt\n      updatedAt\n    }\n  }\n"]))),ee=()=>{(0,q.H)("Video Viewer");const e=(0,B.Zp)(),{id:o}=(0,B.g)(),i=(0,T.d)(),{colorMode:n,setColorMode:s}=(0,j.G6)(),l=(0,j.dU)("gray.50","gray.900"),_=(0,j.dU)("white","gray.800"),ee=(0,j.dU)("gray.200","gray.700"),oe=(0,j.dU)("gray.800","white"),ie=(0,j.dU)("gray.600","gray.400"),ne=(0,j.dU)("gray.100","whiteAlpha.100"),{isOpen:se,onOpen:le,onClose:re}=(0,t.j)(),[te,ae]=(0,r.useState)(""),[ce,de]=(0,r.useState)(!0),he=!!localStorage.getItem("auth_token");(0,r.useEffect)(()=>{he||"dark"===n||s("dark")},[he,n,s]);const xe=null===o||void 0===o?void 0:o.startsWith("Qm"),{data:pe,loading:ge,error:je}=(0,M.IT)(xe?X:Q,{variables:xe?{ipfsHash:o}:{id:o},skip:!o}),ue=(null===pe||void 0===pe?void 0:pe.ipfsVideo)||(null===pe||void 0===pe?void 0:pe.ipfsVideoByHash),fe=(e,o)=>{navigator.clipboard.writeText(e),i({title:"".concat(o," copied to clipboard"),status:"success",duration:2e3})};if(ge)return(0,K.jsxs)(c.a,{bg:l,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,K.jsx)(N.m,{}),(0,K.jsx)(c.a,{flex:"1",children:(0,K.jsx)(u.m,{maxW:"6xl",py:8,children:(0,K.jsx)(g.o,{children:(0,K.jsx)(O.y,{size:"xl",color:oe})})})}),(0,K.jsx)($.n,{})]});if(je||!ue)return(0,K.jsxs)(c.a,{bg:l,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,K.jsx)(N.m,{}),(0,K.jsx)(c.a,{flex:"1",children:(0,K.jsx)(u.m,{maxW:"6xl",py:8,children:(0,K.jsx)(g.o,{children:(0,K.jsxs)(D.T,{spacing:4,children:[(0,K.jsx)(W.E,{fontSize:"xl",color:ie,children:je?"Error loading video":"Video not found"}),!(null!==ue&&void 0!==ue&&ue.isPublic)&&!he&&(0,K.jsx)(W.E,{fontSize:"md",color:ie,children:"This video is private. Please log in to view it."}),he?(0,K.jsx)(d.$,{onClick:()=>e("/youtubetoipfs"),children:"Back to Gallery"}):(0,K.jsx)(d.$,{onClick:()=>e("/login"),children:"Log In"})]})})})}),(0,K.jsx)($.n,{})]});if(!ue.isPublic&&!he)return(0,K.jsxs)(c.a,{bg:l,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,K.jsx)(N.m,{}),(0,K.jsx)(c.a,{flex:"1",children:(0,K.jsx)(u.m,{maxW:"6xl",py:8,children:(0,K.jsx)(g.o,{children:(0,K.jsxs)(D.T,{spacing:4,children:[(0,K.jsx)(W.E,{fontSize:"xl",color:ie,children:"This video is private"}),(0,K.jsx)(W.E,{fontSize:"md",color:ie,children:"Please log in to view this content."}),(0,K.jsx)(d.$,{onClick:()=>e("/login"),children:"Log In"})]})})})}),(0,K.jsx)($.n,{})]});const me=ue.uploadedBy===localStorage.getItem("userId");return(0,K.jsxs)(c.a,{bg:l,minH:"100vh",display:"flex",flexDirection:"column",children:[(0,K.jsx)(N.m,{}),he&&(0,K.jsx)(G.y,{moduleConfig:J.default}),(0,K.jsx)(c.a,{flex:"1",children:(0,K.jsxs)(u.m,{maxW:ce?"100%":"6xl",px:ce?0:6,py:ce?0:8,children:[ce&&(0,K.jsx)(c.a,{bg:"black",position:"relative",mb:4,children:(0,K.jsx)(c.a,{maxW:"1920px",mx:"auto",position:"relative",children:(0,K.jsx)(c.a,{position:"relative",paddingTop:"56.25%",bg:"black",children:(0,K.jsxs)("video",{controls:!0,autoPlay:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain"},onLoadStart:()=>{console.log("\ud83c\udfac [VIDEO] Load started - Theater Mode")},onLoadedMetadata:e=>{const o=e.target;console.log("\ud83d\udcca [VIDEO] Metadata loaded:",JSON.stringify({duration:o.duration,videoWidth:o.videoWidth,videoHeight:o.videoHeight,readyState:o.readyState,networkState:o.networkState},null,2))},onCanPlay:()=>{console.log("\u25b6\ufe0f [VIDEO] Can play")},onError:e=>{var o,i;const n=e.target;console.error("\u274c [VIDEO] Error occurred:",JSON.stringify({error:n.error,errorCode:null===(o=n.error)||void 0===o?void 0:o.code,errorMessage:null===(i=n.error)||void 0===i?void 0:i.message,networkState:n.networkState,readyState:n.readyState,currentSrc:n.currentSrc},null,2))},onProgress:e=>{const o=e.target;if(o.buffered.length>0){const e=o.buffered.end(o.buffered.length-1)/o.duration*100;console.log("\u23f3 [VIDEO] Buffering: ".concat(e.toFixed(1),"%"))}},onStalled:()=>{console.warn("\u26a0\ufe0f [VIDEO] Playback stalled")},onWaiting:()=>{console.log("\u23f8\ufe0f [VIDEO] Waiting for data...")},children:[(0,K.jsx)("source",{src:(e=>{const o=localStorage.getItem("auth_token");let i="";if(console.log("\ud83c\udfa5 [VIDEO] Building video URL for Theater Mode"),console.log("\ud83c\udfa5 [VIDEO] Details:",JSON.stringify({isPrivateFile:ue.isPrivateFile,ipfsHash:ue.ipfsHash,ipfsUrl:ue.ipfsUrl,hasToken:!!o,tokenLength:(null===o||void 0===o?void 0:o.length)||0},null,2)),ue.isPrivateFile){const e=encodeURIComponent(o||""),n="localhost"!==window.location.hostname;i="".concat(n?"https://api.tommillerservices.com":"http://localhost:4000","/api/ipfs/proxy/").concat(ue.ipfsHash,"?token=").concat(e),console.log("\ud83d\udd12 [VIDEO] Private file - Using proxy URL with encoded token"),console.log("\ud83c\udf0d [VIDEO] Environment:",n?"Production":"Development"),console.log("\ud83d\udd17 [VIDEO] Full URL:",i.substring(0,150)+"..."),console.log("\ud83d\udd11 [VIDEO] Token present:",!!o,"Length:",(null===o||void 0===o?void 0:o.length)||0)}else null!==(e=ue.ipfsUrl)&&void 0!==e&&e.startsWith("http")?(i=ue.ipfsUrl,console.log("\ud83c\udf10 [VIDEO] Public file - Using direct URL:",i)):(i=Y.O.getIPFSUrl(ue.ipfsHash||ue.ipfsUrl,!1),console.log("\ud83d\udce1 [VIDEO] Using IPFS gateway URL:",i));return i})(),type:ue.mimeType||"video/mp4"}),"Your browser does not support the video tag."]})})})}),(0,K.jsx)(u.m,{maxW:"6xl",py:ce?4:0,children:(0,K.jsxs)(D.T,{spacing:6,align:"stretch",children:[(0,K.jsxs)(V.z,{justify:"space-between",wrap:"wrap",spacing:2,children:[he?(0,K.jsx)(d.$,{leftIcon:(0,K.jsx)(A.kRp,{}),variant:"ghost",onClick:()=>e("/youtubetoipfs"),size:"md",children:"Back to Gallery"}):(0,K.jsx)(c.a,{}),(0,K.jsxs)(V.z,{spacing:2,children:[(0,K.jsx)(d.$,{leftIcon:ce?(0,K.jsx)(A.SE2,{}):(0,K.jsx)(A.KFS,{}),variant:"outline",onClick:()=>de(!ce),size:"md",title:ce?"Exit Theater Mode":"Enter Theater Mode",children:ce?"Normal View":"Theater Mode"}),me&&he&&(0,K.jsx)(d.$,{leftIcon:(0,K.jsx)(A.SG1,{}),variant:"outline",onClick:()=>e("/youtubetoipfs/video/".concat(ue.id,"/edit")),size:"md",children:"Edit"}),(0,K.jsx)(d.$,{leftIcon:(0,K.jsx)(A.Pum,{}),onClick:()=>{const e="".concat(window.location.origin,"/youtubetoipfs/video/").concat(ue.ipfsHash);ae(e),le()},colorScheme:"blue",size:"md",children:"Share"})]})]}),!ce&&(0,K.jsx)(x.Z,{bg:_,border:"1px solid",borderColor:ee,boxShadow:"xl",overflow:"hidden",children:(0,K.jsx)(p.b,{p:0,children:(0,K.jsx)(c.a,{bg:"black",position:"relative",children:(0,K.jsxs)("video",{controls:!0,autoPlay:!0,width:"100%",style:{maxHeight:"600px",display:"block"},onLoadStart:()=>{console.log("\ud83c\udfac [VIDEO] Load started - Normal Mode")},onLoadedMetadata:e=>{const o=e.target;console.log("\ud83d\udcca [VIDEO] Metadata loaded:",JSON.stringify({duration:o.duration,videoWidth:o.videoWidth,videoHeight:o.videoHeight,readyState:o.readyState,networkState:o.networkState},null,2))},onCanPlay:()=>{console.log("\u25b6\ufe0f [VIDEO] Can play")},onError:e=>{var o,i;const n=e.target;console.error("\u274c [VIDEO] Error occurred:",JSON.stringify({error:n.error,errorCode:null===(o=n.error)||void 0===o?void 0:o.code,errorMessage:null===(i=n.error)||void 0===i?void 0:i.message,networkState:n.networkState,readyState:n.readyState,currentSrc:n.currentSrc},null,2))},onProgress:e=>{const o=e.target;if(o.buffered.length>0){const e=o.buffered.end(o.buffered.length-1)/o.duration*100;console.log("\u23f3 [VIDEO] Buffering: ".concat(e.toFixed(1),"%"))}},onStalled:()=>{console.warn("\u26a0\ufe0f [VIDEO] Playback stalled")},onWaiting:()=>{console.log("\u23f8\ufe0f [VIDEO] Waiting for data...")},children:[(0,K.jsx)("source",{src:(e=>{const o=localStorage.getItem("auth_token");let i="";if(console.log("\ud83c\udfa5 [VIDEO] Building video URL for Normal Mode"),console.log("\ud83c\udfa5 [VIDEO] Details:",JSON.stringify({isPrivateFile:ue.isPrivateFile,ipfsHash:ue.ipfsHash,ipfsUrl:ue.ipfsUrl,hasToken:!!o,tokenLength:(null===o||void 0===o?void 0:o.length)||0},null,2)),ue.isPrivateFile){const e=encodeURIComponent(o||""),n="localhost"!==window.location.hostname;i="".concat(n?"https://api.tommillerservices.com":"http://localhost:4000","/api/ipfs/proxy/").concat(ue.ipfsHash,"?token=").concat(e),console.log("\ud83d\udd12 [VIDEO] Private file - Using proxy URL with encoded token"),console.log("\ud83c\udf0d [VIDEO] Environment:",n?"Production":"Development"),console.log("\ud83d\udd17 [VIDEO] Full URL:",i.substring(0,150)+"..."),console.log("\ud83d\udd11 [VIDEO] Token present:",!!o,"Length:",(null===o||void 0===o?void 0:o.length)||0)}else null!==(e=ue.ipfsUrl)&&void 0!==e&&e.startsWith("http")?(i=ue.ipfsUrl,console.log("\ud83c\udf10 [VIDEO] Public file - Using direct URL:",i)):(i=Y.O.getIPFSUrl(ue.ipfsHash||ue.ipfsUrl,!1),console.log("\ud83d\udce1 [VIDEO] Using IPFS gateway URL:",i));return i})(),type:ue.mimeType||"video/mp4"}),"Your browser does not support the video tag."]})})})}),(0,K.jsx)(x.Z,{bg:_,border:"1px solid",borderColor:ee,boxShadow:"md",backdropFilter:"blur(10px)",children:(0,K.jsx)(p.b,{p:6,children:(0,K.jsxs)(D.T,{align:"stretch",spacing:5,children:[(0,K.jsxs)(V.z,{justify:"space-between",align:"start",children:[(0,K.jsxs)(D.T,{align:"start",spacing:2,flex:"1",children:[(0,K.jsx)(L.D,{size:"lg",color:oe,children:ue.title}),(0,K.jsxs)(V.z,{spacing:4,children:[(0,K.jsx)(a.E,{colorScheme:ue.isPublic?"green":"gray",children:ue.isPublic?(0,K.jsxs)(V.z,{spacing:1,children:[(0,K.jsx)(A.VeH,{size:12}),(0,K.jsx)(W.E,{children:"Public"})]}):(0,K.jsxs)(V.z,{spacing:1,children:[(0,K.jsx)(A.F5$,{size:12}),(0,K.jsx)(W.E,{children:"Private"})]})}),(0,K.jsxs)(V.z,{color:ie,children:[(0,K.jsx)(A.Vap,{}),(0,K.jsxs)(W.E,{fontSize:"sm",children:[ue.viewCount," views"]})]}),(0,K.jsxs)(V.z,{color:ie,children:[(0,K.jsx)(A.wIk,{}),(0,K.jsx)(W.E,{fontSize:"sm",children:new Date(ue.createdAt).toLocaleDateString()})]})]})]}),(0,K.jsx)(D.T,{align:"end",spacing:2,children:(0,K.jsxs)(W.E,{fontSize:"sm",color:ie,children:["Uploaded by ",ue.uploadedByName||"Anonymous"]})})]}),ue.description&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(f.c,{borderColor:ee}),(0,K.jsxs)(c.a,{children:[(0,K.jsx)(W.E,{fontWeight:"bold",mb:2,color:oe,children:"Description"}),(0,K.jsx)(W.E,{color:ie,children:ue.description})]})]}),ue.tags&&ue.tags.length>0&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(f.c,{borderColor:ee}),(0,K.jsxs)(c.a,{children:[(0,K.jsx)(W.E,{fontWeight:"bold",mb:2,color:oe,children:"Tags"}),(0,K.jsx)(R.B,{children:ue.tags.map(e=>(0,K.jsx)(R.Q,{children:(0,K.jsx)(H.vw,{colorScheme:"blue",children:e})},e))})]})]}),(0,K.jsx)(f.c,{borderColor:ee}),(0,K.jsxs)(c.a,{children:[(0,K.jsx)(W.E,{fontWeight:"bold",mb:3,color:oe,children:"Technical Details"}),(0,K.jsxs)(Z.r,{columns:{base:1,md:2},spacing:4,children:[(0,K.jsxs)(z.r,{children:[(0,K.jsx)(F.v,{color:ie,children:"IPFS Hash"}),(0,K.jsxs)(V.z,{children:[(0,K.jsx)(W.E,{fontSize:"sm",fontFamily:"mono",noOfLines:1,color:oe,children:ue.ipfsHash}),(0,K.jsx)(h.K,{icon:(0,K.jsx)(A.nxz,{}),"aria-label":"Copy IPFS hash",size:"xs",variant:"ghost",onClick:()=>fe(ue.ipfsHash,"IPFS hash")})]})]}),(0,K.jsxs)(z.r,{children:[(0,K.jsx)(F.v,{color:ie,children:"File Size"}),(0,K.jsx)(C.k,{fontSize:"md",color:oe,children:(0,K.jsxs)(V.z,{children:[(0,K.jsx)(A.nOB,{}),(0,K.jsx)(W.E,{children:(e=>{if(!e)return"Unknown";return"".concat((e/1048576).toFixed(2)," MB")})(ue.fileSize)})]})})]}),(0,K.jsxs)(z.r,{children:[(0,K.jsx)(F.v,{color:ie,children:"MIME Type"}),(0,K.jsx)(C.k,{fontSize:"md",color:oe,children:ue.mimeType||"video/mp4"})]}),(0,K.jsxs)(z.r,{children:[(0,K.jsx)(F.v,{color:ie,children:"Source"}),(0,K.jsx)(C.k,{fontSize:"md",color:oe,children:ue.source})]})]})]}),(0,K.jsx)(f.c,{borderColor:ee}),(0,K.jsxs)(c.a,{children:[(0,K.jsx)(W.E,{fontWeight:"bold",mb:3,color:oe,children:"IPFS Gateways"}),(0,K.jsx)(D.T,{align:"stretch",spacing:2,children:ue.isPrivateFile?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(V.z,{children:(0,K.jsxs)(b.N,{href:Y.O.getIPFSUrl(ue.ipfsHash,!0),isExternal:!0,color:"blue.500",children:["Private Pinata Gateway (Authenticated) ",(0,K.jsx)(A.HaR,{style:{display:"inline"}})]})}),(0,K.jsx)(W.E,{fontSize:"sm",color:ie,children:"This is a private file and requires authentication to access via other gateways."})]}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(V.z,{children:(0,K.jsxs)(b.N,{href:Y.O.getIPFSUrl(ue.ipfsHash,!1),isExternal:!0,color:"blue.500",children:["Public Pinata Gateway ",(0,K.jsx)(A.HaR,{style:{display:"inline"}})]})}),(0,K.jsx)(V.z,{children:(0,K.jsxs)(b.N,{href:"https://ipfs.io/ipfs/".concat(ue.ipfsHash),isExternal:!0,color:"blue.500",children:["IPFS.io Gateway ",(0,K.jsx)(A.HaR,{style:{display:"inline"}})]})}),(0,K.jsx)(V.z,{children:(0,K.jsxs)(b.N,{href:"https://gateway.ipfs.io/ipfs/".concat(ue.ipfsHash),isExternal:!0,color:"blue.500",children:["Gateway.ipfs.io ",(0,K.jsx)(A.HaR,{style:{display:"inline"}})]})})]})})]})]})})})]})})]})}),(0,K.jsxs)(P.aF,{isOpen:se,onClose:re,children:[(0,K.jsx)(k.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),(0,K.jsxs)(U.$,{bg:_,border:"1px solid",borderColor:ee,children:[(0,K.jsx)(w.r,{color:oe,children:"Share Video"}),(0,K.jsx)(E.s,{color:oe}),(0,K.jsx)(S.c,{children:(0,K.jsxs)(D.T,{spacing:4,align:"stretch",children:[(0,K.jsx)(W.E,{color:oe,children:"Share this video using the link below:"}),(0,K.jsxs)(v.M,{children:[(0,K.jsx)(m.p,{value:te,isReadOnly:!0,bg:ne,border:"1px solid",borderColor:ee,color:oe}),(0,K.jsx)(y.t,{width:"4.5rem",children:(0,K.jsx)(d.$,{h:"1.75rem",size:"sm",onClick:()=>fe(te,"Share link"),children:"Copy"})})]}),(0,K.jsx)(W.E,{fontSize:"sm",color:ie,children:"Anyone with this link can view the video on IPFS"})]})}),(0,K.jsx)(I.j,{children:(0,K.jsx)(d.$,{variant:"ghost",onClick:re,color:oe,children:"Close"})})]})]}),(0,K.jsx)($.n,{})]})}},74204:(e,o,i)=>{i.d(o,{O:()=>n});const n={PRIVATE_GATEWAY_URL:"https://scarlet-professional-perch-484.mypinata.cloud/ipfs",PUBLIC_GATEWAY_URL:"https://gateway.pinata.cloud/ipfs",getIPFSUrl:function(e){const o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?n.PRIVATE_GATEWAY_URL:n.PUBLIC_GATEWAY_URL;return"".concat(o,"/").concat(e)}}}}]);
//# sourceMappingURL=9467.9cf6ec77.chunk.js.map