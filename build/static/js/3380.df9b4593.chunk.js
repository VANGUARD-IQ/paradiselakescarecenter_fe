"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[3380],{13380:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Oe});var n,l=o(57528),i=o(65043),r=o(70459),a=o(31881),s=o(10585),d=o(73216),c=o(52003),g=o(63295),h=o(95214),p=o(60319),u=o(66037),x=o(44093),m=o(96870),j=o(30502),b=o(22107),f=o(10202),y=o(5371),S=o(96148),E=o(39081),D=o(98662),T=o(87139),C=o(42703),v=o(55182),I=o(73225),z=o(76668),L=o(98481),O=o(45973),k=o(29244),A=o(35699),w=o(12730),F=o(26602),N=o(1009),G=o(39985),R=o(89379),U=o(78460),P=o(11054),M=o(25722),W=o(15071),Y=o(35929),$=o(67516),_=o(19077),B=o(61724),X=o(82459),H=o(44860),J=o(57371),Q=o(88787),V=o(85871),q=o(33171),K=o(23913),Z=o(62468),ee=o(68655),te=o(59218),oe=o(56529),ne=o(82497),le=o(99032),ie=o(34946),re=o(12733),ae=o(70579);const se=(0,r.J1)(n||(n=(0,l.A)(["\n  query GetOpportunities($status: OpportunityStatus, $stage: String) {\n    opportunities(status: $status, stage: $stage) {\n      id\n      title\n      description\n      clientName\n      value\n      stage\n      status\n      priority\n      probability\n      expectedRevenue\n      expectedCloseDate\n      assignedToName\n    }\n  }\n"]))),de=e=>{let{selectedOpportunities:t,onOpportunitiesChange:o}=e;const{colorMode:n}=(0,x.G6)(),l=(0,G.oU)("light"===n?"text.primary":"text.primaryDark",n),r=(0,G.oU)("light"===n?"text.secondary":"text.secondaryDark",n),a=(0,G.oU)("light"===n?"text.muted":"text.mutedDark",n),d=(0,G.oU)("light"===n?"background.light":"background.taskCard",n),c=(0,G.oU)("border.darkCard",n),[g,h]=(0,i.useState)(""),{loading:p,error:u,data:m}=(0,s.IT)(se,{variables:{},context:{headers:{"x-tenant-id":localStorage.getItem("tenantId")||""}}}),j=(null===m||void 0===m?void 0:m.opportunities)||[],y=j.filter(e=>(e.title||"").toLowerCase().includes(g.toLowerCase())),D=e=>{t.includes(e)?o(t.filter(t=>t!==e)):o([...t,e])},C=j.filter(e=>t.includes(e.id)),v=C.reduce((e,t)=>e+(t.value||0),0),I=C.reduce((e,t)=>e+(t.value||0)*((t.probability||0)/100),0),z=(C.reduce((e,t)=>e+(t.expectedRevenue||0),0),e=>({LEAD:"Lead",QUALIFIED:"Qualified",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",WON:"Won",LOST:"Lost",PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",CLOSED_WON:"Won",CLOSED_LOST:"Lost"}[e]||e));return u?(0,ae.jsxs)(Q.F,{status:"error",children:[(0,ae.jsx)(V._,{}),(0,ae.jsxs)(E.E,{fontSize:"sm",children:["Failed to load opportunities: ",u.message]})]}):(0,ae.jsxs)(f.T,{spacing:3,align:"stretch",children:[(0,ae.jsxs)(O.M,{children:[(0,ae.jsx)(k.W,{pointerEvents:"none",children:(0,ae.jsx)(re.W,{color:a})}),(0,ae.jsx)(A.p,{value:g,onChange:e=>h(e.target.value),placeholder:"Search opportunities...",bg:d,color:l,borderColor:c,_placeholder:{color:a}})]}),t.length>0&&(0,ae.jsx)(b.a,{p:3,bg:d,borderRadius:"md",borderWidth:"1px",borderColor:c,children:(0,ae.jsxs)(f.T,{align:"stretch",spacing:2,children:[(0,ae.jsx)(S.z,{justify:"space-between",children:(0,ae.jsxs)(E.E,{fontSize:"sm",fontWeight:"medium",color:l,children:["Selected: ",t.length," opportunities"]})}),(0,ae.jsxs)(S.z,{spacing:4,fontSize:"sm",children:[(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(N.z8N,{color:"#10B981"}),(0,ae.jsxs)(E.E,{color:r,children:["Total: ",(0,ae.jsxs)("strong",{children:["$",v.toLocaleString()]})]})]}),(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(N.ARf,{color:"#F59E0B"}),(0,ae.jsxs)(E.E,{color:r,children:["Weighted: ",(0,ae.jsxs)("strong",{children:["$",Math.round(I).toLocaleString()]})]})]})]})]})}),(0,ae.jsx)(b.a,{maxH:"300px",overflowY:"auto",borderWidth:"1px",borderColor:c,borderRadius:"md",p:2,children:p?(0,ae.jsx)(f.T,{spacing:2,children:[1,2,3].map(e=>(0,ae.jsx)(le.E,{height:"50px"},e))}):0===y.length?(0,ae.jsx)(E.E,{color:a,fontSize:"sm",textAlign:"center",py:4,children:g?"No opportunities match your search":"No opportunities available"}):(0,ae.jsx)(f.T,{spacing:2,align:"stretch",children:y.map(e=>{var o,n;return(0,ae.jsx)(b.a,{p:3,borderWidth:"1px",borderColor:c,borderRadius:"md",bg:t.includes(e.id)?"".concat(d):"transparent",cursor:"pointer",transition:"all 0.2s",_hover:{bg:d,transform:"translateX(2px)"},onClick:()=>D(e.id),children:(0,ae.jsxs)(S.z,{spacing:3,justify:"space-between",children:[(0,ae.jsxs)(S.z,{flex:"1",minW:"0",children:[(0,ae.jsx)(ie.S,{isChecked:t.includes(e.id),onChange:()=>D(e.id),onClick:e=>e.stopPropagation()}),(0,ae.jsxs)(f.T,{align:"start",spacing:0,flex:"1",minW:"0",children:[(0,ae.jsx)(E.E,{fontSize:"sm",fontWeight:"medium",color:l,noOfLines:1,children:e.title}),(0,ae.jsxs)(S.z,{spacing:2,fontSize:"xs",children:[(0,ae.jsx)(T.E,{colorScheme:(n=e.stage,{LEAD:"gray",QUALIFIED:"blue",PROPOSAL:"purple",NEGOTIATION:"orange",WON:"green",LOST:"red",PROSPECTING:"gray",QUALIFICATION:"blue",CLOSED_WON:"green",CLOSED_LOST:"red"}[n]||"gray"),fontSize:"xs",children:z(e.stage)}),e.probability>0&&(0,ae.jsxs)(E.E,{color:a,children:[e.probability,"% probability"]}),e.clientName&&(0,ae.jsxs)(E.E,{color:a,children:["\u2022 ",e.clientName]})]})]})]}),(0,ae.jsxs)(f.T,{align:"end",spacing:0,children:[(0,ae.jsxs)(E.E,{fontSize:"sm",fontWeight:"bold",color:"green.500",children:["$",(null===(o=e.value)||void 0===o?void 0:o.toLocaleString())||"0"]}),e.expectedCloseDate&&(0,ae.jsx)(E.E,{fontSize:"xs",color:a,children:new Date(e.expectedCloseDate).toLocaleDateString()})]})]})},e.id)})})}),(0,ae.jsxs)(E.E,{fontSize:"xs",color:a,children:[(0,ae.jsx)("strong",{children:"Tip:"})," Link opportunities that contribute to this goal. The system will track their progress and calculate how many more opportunities you need to close."]})]})},ce=[{value:"CAREER",label:"Career",color:"#3B82F6"},{value:"FINANCIAL",label:"Financial",color:"#10B981"},{value:"HEALTH",label:"Health",color:"#EF4444"},{value:"RELATIONSHIP",label:"Relationship",color:"#EC4899"},{value:"LEARNING",label:"Learning",color:"#8B5CF6"},{value:"LEGACY",label:"Legacy",color:"#F59E0B"}],ge=e=>{let{isOpen:t,onClose:o,goal:n,initialDates:l,onSave:r,onDelete:a}=e;const{colorMode:s}=(0,x.G6)(),d=(0,G.oU)("light"===s?"background.card":"background.darkSurface",s),c=(0,G.oU)("light"===s?"background.light":"background.taskCard",s),g=(0,G.oU)("light"===s?"text.primary":"text.primaryDark",s),h=(0,G.oU)("light"===s?"text.secondary":"text.secondaryDark",s),p=(0,G.oU)("light"===s?"text.muted":"text.mutedDark",s),u=(0,G.oU)("border.darkCard",s),[m,j]=(0,i.useState)({title:"",description:"",goalType:"FINANCIAL",startDate:"",endDate:"",financialTarget:0,linkedOpportunities:[],parentGoalId:null,dependencies:[]}),[y,C]=(0,i.useState)({totalValue:0,closedValue:0,remainingNeeded:0,opportunitiesNeeded:0});(0,i.useEffect)(()=>{var e,t,o,i,r;n?j({title:n.title||"",description:n.description||"",goalType:(null===(e=n.metadata)||void 0===e?void 0:e["X-LIFE-GOAL-TYPE"])||"FINANCIAL",startDate:n.startTime?new Date(n.startTime).toISOString().split("T")[0]:"",endDate:n.endTime?new Date(n.endTime).toISOString().split("T")[0]:"",financialTarget:(null===(t=n.metadata)||void 0===t?void 0:t["X-FINANCIAL-TARGET"])||0,linkedOpportunities:(null===(o=n.metadata)||void 0===o?void 0:o["X-OPPORTUNITY-IDS"])||[],parentGoalId:(null===(i=n.metadata)||void 0===i?void 0:i["X-PARENT-GOAL-ID"])||null,dependencies:(null===(r=n.metadata)||void 0===r?void 0:r["X-DEPENDENCIES"])||[]}):l&&j(e=>(0,R.A)((0,R.A)({},e),{},{startDate:l.startDate,endDate:l.endDate}))},[n,l]),(0,i.useEffect)(()=>{v()},[m.linkedOpportunities,m.financialTarget]);const v=()=>{const e=5e4*m.linkedOpportunities.length,t=.3*e,o=m.financialTarget-t,n=o>0?Math.ceil(o/5e4):0;C({totalValue:e,closedValue:t,remainingNeeded:Math.max(0,o),opportunitiesNeeded:n})},L=(e,t)=>{j(o=>(0,R.A)((0,R.A)({},o),{},{[e]:t}))},O=m.financialTarget>0?Math.min(100,y.closedValue/m.financialTarget*100):0;return(0,ae.jsxs)(U.aF,{isOpen:t,onClose:o,size:"2xl",children:[(0,ae.jsx)(P.m,{}),(0,ae.jsxs)(M.$,{bg:d,color:g,children:[(0,ae.jsx)(W.r,{children:(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(N.x_j,{}),(0,ae.jsxs)(E.E,{children:[n?"Edit":"Create"," Life Goal"]})]})}),(0,ae.jsx)(Y.s,{}),(0,ae.jsx)($.c,{children:(0,ae.jsxs)(f.T,{spacing:4,align:"stretch",children:[(0,ae.jsxs)(I.MJ,{isRequired:!0,children:[(0,ae.jsx)(z.l,{color:g,children:"Goal Title"}),(0,ae.jsx)(A.p,{value:m.title,onChange:e=>L("title",e.target.value),placeholder:"e.g., Get approved for house loan",bg:c,color:g,borderColor:u,_placeholder:{color:p}})]}),(0,ae.jsxs)(I.MJ,{children:[(0,ae.jsx)(z.l,{color:g,children:"Description"}),(0,ae.jsx)(_.T,{value:m.description,onChange:e=>L("description",e.target.value),placeholder:"Describe your long-term goal and why it matters...",rows:3,bg:c,color:g,borderColor:u,_placeholder:{color:p}})]}),(0,ae.jsxs)(I.MJ,{isRequired:!0,children:[(0,ae.jsx)(z.l,{color:g,children:"Goal Type"}),(0,ae.jsx)(B.l,{value:m.goalType,onChange:e=>L("goalType",e.target.value),bg:c,color:g,borderColor:u,children:ce.map(e=>(0,ae.jsx)("option",{value:e.value,style:{backgroundColor:"light"===s?"#FFFFFF":"#1A202C",color:"light"===s?"#1A202C":"#FFFFFF"},children:e.label},e.value))})]}),(0,ae.jsxs)(S.z,{spacing:4,children:[(0,ae.jsxs)(I.MJ,{isRequired:!0,children:[(0,ae.jsx)(z.l,{color:g,children:"Start Date"}),(0,ae.jsx)(A.p,{type:"date",value:m.startDate,onChange:e=>L("startDate",e.target.value),bg:c,color:g,borderColor:u})]}),(0,ae.jsxs)(I.MJ,{isRequired:!0,children:[(0,ae.jsx)(z.l,{color:g,children:"Target Date"}),(0,ae.jsx)(A.p,{type:"date",value:m.endDate,onChange:e=>L("endDate",e.target.value),bg:c,color:g,borderColor:u})]})]}),"FINANCIAL"===m.goalType&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(X.c,{borderColor:u}),(0,ae.jsxs)(I.MJ,{children:[(0,ae.jsx)(z.l,{color:g,children:(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(N.z8N,{}),(0,ae.jsx)(E.E,{children:"Financial Target"})]})}),(0,ae.jsxs)(H.Q7,{value:m.financialTarget,onChange:(e,t)=>L("financialTarget",t),min:0,children:[(0,ae.jsx)(H.OO,{bg:c,color:g,borderColor:u,placeholder:"e.g., 160000 for down payment"}),(0,ae.jsxs)(H.lw,{children:[(0,ae.jsx)(H.Q0,{}),(0,ae.jsx)(H.Sh,{})]})]}),(0,ae.jsx)(E.E,{fontSize:"xs",color:p,mt:1,children:"Amount needed to achieve this goal"})]}),m.financialTarget>0&&(0,ae.jsx)(b.a,{p:4,bg:c,borderRadius:"md",borderWidth:"1px",borderColor:u,children:(0,ae.jsxs)(f.T,{align:"stretch",spacing:3,children:[(0,ae.jsxs)(S.z,{justify:"space-between",children:[(0,ae.jsx)(E.E,{fontWeight:"bold",color:g,children:"Progress Tracker"}),(0,ae.jsxs)(T.E,{colorScheme:O>=100?"green":"blue",children:[O.toFixed(0),"%"]})]}),(0,ae.jsx)(J.k,{value:O,colorScheme:O>=100?"green":"blue",size:"lg",borderRadius:"md"}),(0,ae.jsxs)(f.T,{align:"stretch",spacing:1,fontSize:"sm",children:[(0,ae.jsxs)(S.z,{justify:"space-between",children:[(0,ae.jsx)(E.E,{color:h,children:"Target:"}),(0,ae.jsxs)(E.E,{color:g,fontWeight:"medium",children:["$",m.financialTarget.toLocaleString()]})]}),(0,ae.jsxs)(S.z,{justify:"space-between",children:[(0,ae.jsx)(E.E,{color:h,children:"Closed Value:"}),(0,ae.jsxs)(E.E,{color:"green.500",fontWeight:"medium",children:["$",y.closedValue.toLocaleString()]})]}),(0,ae.jsxs)(S.z,{justify:"space-between",children:[(0,ae.jsx)(E.E,{color:h,children:"Remaining:"}),(0,ae.jsxs)(E.E,{color:y.remainingNeeded>0?"orange.500":"green.500",fontWeight:"medium",children:["$",y.remainingNeeded.toLocaleString()]})]})]}),y.opportunitiesNeeded>0&&(0,ae.jsxs)(Q.F,{status:"info",borderRadius:"md",children:[(0,ae.jsx)(V._,{}),(0,ae.jsxs)(E.E,{fontSize:"sm",children:["You need to close ",(0,ae.jsxs)("strong",{children:[y.opportunitiesNeeded," more opportunities"]})," to reach this goal"]})]})]})})]}),(0,ae.jsx)(X.c,{}),(0,ae.jsx)(q.n,{allowToggle:!0,children:(0,ae.jsxs)(K.A,{border:"none",children:[(0,ae.jsxs)(Z.J,{bg:c,borderRadius:"md",_expanded:{bg:c},children:[(0,ae.jsx)(b.a,{flex:"1",textAlign:"left",children:(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(N.ARf,{}),(0,ae.jsx)(E.E,{fontWeight:"medium",color:g,children:"Link Opportunities"}),(0,ae.jsx)(T.E,{colorScheme:"blue",children:m.linkedOpportunities.length})]})}),(0,ae.jsx)(ee.Q,{})]}),(0,ae.jsx)(te.v,{children:(0,ae.jsx)(de,{selectedOpportunities:m.linkedOpportunities,onOpportunitiesChange:e=>L("linkedOpportunities",e)})})]})}),(0,ae.jsx)(q.n,{allowToggle:!0,children:(0,ae.jsxs)(K.A,{border:"none",children:[(0,ae.jsxs)(Z.J,{bg:c,borderRadius:"md",_expanded:{bg:c},children:[(0,ae.jsx)(b.a,{flex:"1",textAlign:"left",children:(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(ne.m,{}),(0,ae.jsx)(E.E,{fontWeight:"medium",color:g,children:"Dependencies & Parent Goals"})]})}),(0,ae.jsx)(ee.Q,{})]}),(0,ae.jsx)(te.v,{children:(0,ae.jsxs)(f.T,{align:"stretch",spacing:3,children:[(0,ae.jsxs)(I.MJ,{children:[(0,ae.jsx)(z.l,{color:g,fontSize:"sm",children:"Parent Goal"}),(0,ae.jsx)(B.l,{value:m.parentGoalId||"",onChange:e=>L("parentGoalId",e.target.value||null),bg:c,color:g,borderColor:u,placeholder:"Select parent goal (optional)",children:(0,ae.jsx)("option",{value:"",style:{backgroundColor:"light"===s?"#FFFFFF":"#1A202C",color:"light"===s?"#1A202C":"#FFFFFF"},children:"None - This is a top-level goal"})}),(0,ae.jsx)(E.E,{fontSize:"xs",color:p,mt:1,children:"Break down larger goals into sub-goals"})]}),(0,ae.jsx)(E.E,{fontSize:"sm",color:h,children:"Goal dependencies will be added in the next phase"})]})})]})})]})}),(0,ae.jsxs)(oe.j,{justifyContent:"space-between",children:[n&&a?(0,ae.jsx)(D.$,{colorScheme:"red",variant:"outline",onClick:()=>{n&&a&&(a(n),o())},children:"Delete"}):(0,ae.jsx)(b.a,{}),(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(D.$,{variant:"ghost",onClick:o,children:"Cancel"}),(0,ae.jsxs)(D.$,{colorScheme:"blue",onClick:()=>{const e={id:null===n||void 0===n?void 0:n.id,title:m.title,description:m.description,startDate:m.startDate,endDate:m.endDate,goalType:m.goalType,financialTarget:m.financialTarget,opportunityIds:m.linkedOpportunities,parentGoalId:m.parentGoalId,dependencies:m.dependencies};r(e)},isDisabled:!m.title||!m.startDate||!m.endDate,children:[n?"Update":"Create"," Goal"]})]})]})]})]})};var he=o(47726),pe=o(68455),ue=o(99973),xe=o(58584);const me={CAREER:"#3B82F6",FINANCIAL:"#10B981",HEALTH:"#EF4444",RELATIONSHIP:"#EC4899",LEARNING:"#8B5CF6",LEGACY:"#F59E0B"},je=e=>{var t,o,n;let{goal:l,birthDate:r,zoomConfig:a,onEdit:s,onResize:d,onDelete:c}=e;const{colorMode:g}=(0,x.G6)(),[h,p]=(0,i.useState)(null),[u,j]=(0,i.useState)(null),[y,T]=(0,i.useState)(null),{isOpen:v,onOpen:I,onClose:z}=(0,m.j)(),L=(0,i.useRef)(null);(0,i.useEffect)(()=>{j(null),T(null)},[l.id]);const O=(0,G.oU)("light"===g?"text.primary":"text.primaryDark",g),k=(0,G.oU)("light"===g?"text.secondary":"text.secondaryDark",g),A=(0,G.oU)("border.darkCard",g),w=u||new Date(l.startTime),F=y||new Date(l.endTime),R=Math.floor((w.getTime()-r.getTime())/864e5),U=Math.floor((F.getTime()-w.getTime())/864e5),M=R*a.pixelsPerDay,Y=Math.max(U*a.pixelsPerDay,30),_=(null===(t=l.metadata)||void 0===t?void 0:t["X-LIFE-GOAL-TYPE"])||"CAREER",B=me[_]||"#3B82F6",X=(null===(o=l.metadata)||void 0===o?void 0:o["X-FINANCIAL-TARGET"])||0,H=(null===(n=l.metadata)||void 0===n?void 0:n["X-COMPLETION-PERCENTAGE"])||0,Q=(e,t)=>{e.stopPropagation(),e.preventDefault(),console.log("\ud83c\udfaf Starting resize from",t),p(t);const o=e.clientY,n=new Date(l.startTime),i=new Date(l.endTime);let r=null,s=null;const c=e=>{e.preventDefault();const l=e.clientY-o,d=Math.round(l/a.pixelsPerDay);if(console.log("\ud83d\udccf Resize delta:",d,"days"),"top"===t){const e=new Date(n);e.setDate(n.getDate()+d),e<i&&(r=e,s=null,j(e),T(null))}else{const e=new Date(i);e.setDate(i.getDate()+d),e>n&&(s=e,r=null,T(e),j(null))}},g=()=>{console.log("\ud83d\uded1 Ending resize"),console.log("Current temp dates:",{currentTempStartDate:r,currentTempEndDate:s});const e=r||n,t=s||i;(e.getTime()!==n.getTime()||t.getTime()!==i.getTime())&&d?(console.log("\ud83d\udcbe Calling onResize with changed dates:",{originalStart:n.toISOString(),originalEnd:i.toISOString(),finalStart:e.toISOString(),finalEnd:t.toISOString()}),d(l,e,t)):console.log("\u23ed\ufe0f No date changes, skipping resize"),p(null),j(null),T(null),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",g)},V=a.pixelsPerDay>=.5,q=a.pixelsPerDay>=2;return(0,ae.jsxs)(b.a,{position:"absolute",top:"".concat(M,"px"),left:"10px",right:"10px",minH:"".concat(Y,"px"),bg:"".concat(B,"15"),borderLeft:"4px solid",borderLeftColor:B,borderRadius:"md",borderWidth:"1px",borderColor:A,cursor:h?"ns-resize":"pointer",transition:h?"none":"all 0.2s",_hover:h?{}:{transform:"translateX(5px)",boxShadow:"lg",bg:"".concat(B,"25")},onClick:()=>!h&&s(l),children:[(0,ae.jsx)(b.a,{position:"absolute",top:"0",left:"0",right:"0",h:"10px",cursor:"ns-resize",bg:"top"===h?"".concat(B,"50"):"transparent",_hover:{bg:"".concat(B,"50")},onMouseDown:e=>Q(e,"top"),onClick:e=>e.stopPropagation(),zIndex:10}),(0,ae.jsx)(b.a,{position:"absolute",bottom:"0",left:"0",right:"0",h:"10px",cursor:"ns-resize",bg:"bottom"===h?"".concat(B,"50"):"transparent",_hover:{bg:"".concat(B,"50")},onMouseDown:e=>Q(e,"bottom"),onClick:e=>e.stopPropagation(),zIndex:10}),(0,ae.jsx)(b.a,{p:q?3:1,children:q?(0,ae.jsxs)(f.T,{align:"stretch",spacing:2,h:"100%",children:[(0,ae.jsxs)(S.z,{justify:"space-between",children:[(0,ae.jsxs)(S.z,{spacing:2,children:[(0,ae.jsx)(N.x_j,{color:B}),(0,ae.jsx)(E.E,{fontSize:"sm",fontWeight:"bold",color:O,noOfLines:2,children:l.title})]}),(0,ae.jsxs)(S.z,{spacing:0,children:[(0,ae.jsx)(C.K,{"aria-label":"Edit goal",icon:(0,ae.jsx)(ue.q,{}),size:"xs",variant:"ghost",onClick:e=>{e.stopPropagation(),s(l)}}),c&&(0,ae.jsx)(C.K,{"aria-label":"Delete goal",icon:(0,ae.jsx)(xe.d,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:e=>{e.stopPropagation(),I()}})]})]}),l.description&&(0,ae.jsx)(E.E,{fontSize:"xs",color:k,noOfLines:3,children:l.description}),X>0&&(0,ae.jsxs)(S.z,{spacing:2,fontSize:"xs",children:[(0,ae.jsx)(N.z8N,{color:B}),(0,ae.jsxs)(E.E,{color:k,children:["$",X.toLocaleString()," target"]})]}),H>0&&(0,ae.jsxs)(b.a,{children:[(0,ae.jsx)(J.k,{value:H,size:"sm",colorScheme:"green",borderRadius:"full"}),(0,ae.jsxs)(E.E,{fontSize:"xs",color:k,mt:1,children:[H,"% complete"]})]}),(0,ae.jsx)(S.z,{fontSize:"xs",color:k,mt:"auto",children:(0,ae.jsxs)(E.E,{children:[w.toLocaleDateString()," - ",F.toLocaleDateString()]})})]}):V?(0,ae.jsxs)(S.z,{justify:"space-between",h:"100%",children:[(0,ae.jsxs)(S.z,{spacing:1,flex:"1",minW:"0",children:[(0,ae.jsx)(N.x_j,{color:B,size:12}),(0,ae.jsx)(E.E,{fontSize:"xs",color:O,noOfLines:1,fontWeight:"medium",children:l.title})]}),X>0&&(0,ae.jsx)(he.m,{label:"$".concat(X.toLocaleString()," target"),children:(0,ae.jsx)(b.a,{children:(0,ae.jsx)(N.z8N,{color:B,size:12})})})]}):(0,ae.jsx)(S.z,{h:"100%",px:1,align:"center",children:(0,ae.jsx)(E.E,{fontSize:"xs",color:O,noOfLines:1,fontWeight:"semibold",textShadow:"light"===g?"0 1px 2px rgba(255, 255, 255, 0.8)":"0 1px 2px rgba(0, 0, 0, 0.8)",children:l.title})})}),(0,ae.jsx)(pe.Lt,{isOpen:v,leastDestructiveRef:L,onClose:z,children:(0,ae.jsx)(P.m,{children:(0,ae.jsxs)(pe.EO,{children:[(0,ae.jsx)(W.r,{fontSize:"lg",fontWeight:"bold",children:"Delete Life Goal"}),(0,ae.jsxs)($.c,{children:['Are you sure you want to delete "',l.title,'"? This action cannot be undone.']}),(0,ae.jsxs)(oe.j,{children:[(0,ae.jsx)(D.$,{ref:L,onClick:z,children:"Cancel"}),(0,ae.jsx)(D.$,{colorScheme:"red",onClick:()=>{z(),c&&c(l)},ml:3,children:"Delete"})]})]})})})]})},be=e=>{let{birthDate:t,endDate:o,zoomConfig:n,totalHeight:l}=e;const{colorMode:i}=(0,x.G6)(),r=(0,G.oU)("light"===i?"text.primary":"text.primaryDark",i),a=(0,G.oU)("light"===i?"text.muted":"text.mutedDark",i),s=(0,G.oU)("border.darkCard",i);return(0,ae.jsxs)(b.a,{display:"flex",children:[(0,ae.jsxs)(b.a,{position:"relative",w:"60px",minH:"".concat(l,"px"),borderRight:"1px solid",borderColor:s,bg:"light"===i?"gray.100":"gray.950",children:[(0,ae.jsx)(E.E,{position:"sticky",top:"0",fontSize:"2xs",fontWeight:"bold",color:a,textAlign:"center",py:1,bg:"light"===i?"gray.100":"gray.950",borderBottom:"1px solid",borderColor:s,zIndex:10,children:"AGE"}),(()=>{const e=[],o=(new Date).getFullYear(),l=t.getFullYear();for(let d=0;d<=120;d++){const c=new Date(t);c.setFullYear(t.getFullYear()+d);const g=Math.floor((c.getTime()-t.getTime())/864e5)*n.pixelsPerDay,h=d%10===0,p=d%5===0&&!h,u=l+d===o,x=h||n.pixelsPerDay>=.1&&p||u;(x||h)&&e.push((0,ae.jsx)(b.a,{position:"absolute",top:"".concat(g,"px"),left:"0",right:"0",borderTop:"1px solid",borderColor:u?"blue.500":h?s:"".concat(s,"30"),children:x&&(0,ae.jsx)(E.E,{position:"absolute",right:"4px",top:"-10px",fontSize:h?"xs":"2xs",fontWeight:h||u?"bold":"normal",color:u?"blue.500":h?r:a,bg:"light"===i?"white":"gray.800",px:1,children:d})},d))}return e})()]}),(0,ae.jsxs)(b.a,{position:"relative",w:"100px",minH:"".concat(l,"px"),borderRight:"2px solid",borderColor:s,bg:"light"===i?"gray.50":"gray.900",children:[(0,ae.jsx)(E.E,{position:"sticky",top:"0",fontSize:"2xs",fontWeight:"bold",color:a,textAlign:"center",py:1,bg:"light"===i?"gray.50":"gray.900",borderBottom:"1px solid",borderColor:s,zIndex:10,children:"DATE"}),(()=>{const e=[],{rulerUnit:l}=n;let d=new Date(t),c=0;for(;d<=o;){const o=Math.floor((d.getTime()-t.getTime())/864e5)*n.pixelsPerDay;let g="",h=!1;const p=new Date(d);switch(l){case"decade":d.getFullYear()%10===0&&(g=d.getFullYear().toString(),h=!0),p.setFullYear(d.getFullYear()+1);break;case"year":g=d.getFullYear().toString(),h=d.getFullYear()%5===0,p.setFullYear(d.getFullYear()+1);break;case"quarter":const e=Math.floor(d.getMonth()/3)+1;g="Q".concat(e," ").concat(d.getFullYear()),h=1===e,p.setMonth(d.getMonth()+3);break;case"month":g=d.toLocaleDateString("en-US",{month:"short",year:"numeric"}),h=0===d.getMonth(),p.setMonth(d.getMonth()+1);break;case"week":g=d.toLocaleDateString("en-US",{month:"short",day:"numeric"}),h=1===d.getDate(),p.setDate(d.getDate()+7);break;case"day":g=d.toLocaleDateString("en-US",{month:"short",day:"numeric"}),h=1===d.getDate(),p.setDate(d.getDate()+1)}g&&e.push((0,ae.jsx)(b.a,{position:"absolute",top:"".concat(o,"px"),left:"0",right:"0",borderTop:"1px solid",borderColor:h?s:"".concat(s,"50"),children:(0,ae.jsx)(E.E,{position:"absolute",left:"4px",top:"-10px",fontSize:h?"xs":"2xs",fontWeight:h?"bold":"normal",color:h?r:a,bg:"light"===i?"white":"gray.800",px:1,children:g})},c)),d=p,c++}return e})()]})]})};var fe,ye,Se,Ee,De;const Te=(0,r.J1)(fe||(fe=(0,l.A)(["\n  mutation CreateLifeGoal($input: CalendarEventInput!) {\n    createEvent(input: $input) {\n      id\n      title\n      description\n      startTime\n      endTime\n      metadata\n      calendarId\n    }\n  }\n"]))),Ce=(0,r.J1)(ye||(ye=(0,l.A)(["\n  mutation UpdateLifeGoal($id: String!, $input: CalendarEventInput!) {\n    updateEvent(id: $id, input: $input) {\n      id\n      title\n      description\n      startTime\n      endTime\n      metadata\n      calendarId\n    }\n  }\n"]))),ve=(0,r.J1)(Se||(Se=(0,l.A)(["\n  mutation DeleteLifeGoal($id: String!) {\n    deleteEvent(id: $id) {\n      success\n      message\n    }\n  }\n"]))),Ie=(0,r.J1)(Ee||(Ee=(0,l.A)(["\n  query GetLifeGoals($calendarId: String!, $startDate: String!, $endDate: String!) {\n    calendarEvents(\n      calendarId: $calendarId\n      startDate: $startDate\n      endDate: $endDate\n    ) {\n      id\n      title\n      description\n      startTime\n      endTime\n      metadata\n      calendarId\n      organizerId\n    }\n  }\n"]))),ze=(0,r.J1)(De||(De=(0,l.A)(["\n  query GetMyCalendars {\n    myCalendars {\n      id\n      name\n      type\n    }\n  }\n"]))),Le=[{level:"120years",label:"120 Years",pixelsPerDay:.008,rulerUnit:"decade",displayUnit:"Decades"},{level:"80years",label:"80 Years",pixelsPerDay:.012,rulerUnit:"decade",displayUnit:"Decades"},{level:"40years",label:"40 Years",pixelsPerDay:.025,rulerUnit:"decade",displayUnit:"Decades"},{level:"20years",label:"20 Years",pixelsPerDay:.05,rulerUnit:"year",displayUnit:"Years"},{level:"10years",label:"10 Years",pixelsPerDay:.1,rulerUnit:"year",displayUnit:"Years"},{level:"5years",label:"5 Years",pixelsPerDay:.2,rulerUnit:"year",displayUnit:"Years"},{level:"1year",label:"1 Year",pixelsPerDay:1,rulerUnit:"quarter",displayUnit:"Quarters"},{level:"6months",label:"6 Months",pixelsPerDay:2,rulerUnit:"month",displayUnit:"Months"},{level:"3months",label:"3 Months",pixelsPerDay:4,rulerUnit:"month",displayUnit:"Months"},{level:"1month",label:"1 Month",pixelsPerDay:10,rulerUnit:"week",displayUnit:"Weeks"},{level:"1week",label:"1 Week",pixelsPerDay:50,rulerUnit:"day",displayUnit:"Days"},{level:"1day",label:"1 Day",pixelsPerDay:100,rulerUnit:"day",displayUnit:"Hours"}],Oe=()=>{const{colorMode:e}=(0,x.G6)(),{isOpen:t,onOpen:o,onClose:n}=(0,m.j)(),l=(0,j.d)();(0,d.Zp)();(0,u.H)("Life Goals Timeline");const r=(0,G.oU)("background.main",e),R=(0,G.oU)("light"===e?"background.card":"background.darkSurface",e),U=(0,G.oU)("light"===e?"text.primary":"text.primaryDark",e),P=(0,G.oU)("light"===e?"text.secondary":"text.secondaryDark",e),M=(0,G.oU)("border.darkCard",e),[W,Y]=(0,i.useState)(4),[$,_]=(0,i.useState)(!1),[B,X]=(0,i.useState)(!0),[H,J]=(0,i.useState)([]),[Q,V]=(0,i.useState)(null),[q,K]=(0,i.useState)(null),[Z,ee]=(0,i.useState)(!1),[te,oe]=(0,i.useState)(null),[ne,le]=(0,i.useState)(null),[ie,re]=(0,i.useState)(null),[se,de]=(0,i.useState)(()=>{const e=localStorage.getItem("lifeGoalsBirthDate");return e||"1986-03-14"}),ce=(0,i.useRef)(null),he=Le[W],pe=new Date,ue=new Date(se),xe=new Date(ue.getFullYear()+120,11,31),me=Math.floor((xe.getTime()-ue.getTime())/864e5),fe=me*he.pixelsPerDay,[ye]=(0,a.n)(Te),[Se]=(0,a.n)(Ce),[Ee]=(0,a.n)(ve),{data:De,loading:Oe}=(0,s.IT)(ze),{data:ke,loading:Ae,refetch:we}=(0,s.IT)(Ie,{variables:{calendarId:q||"",startDate:ue.toISOString(),endDate:xe.toISOString()},skip:!q});(0,i.useEffect)(()=>{if(null!==De&&void 0!==De&&De.myCalendars){console.log("\ud83d\udd0d Looking for Life Goals calendar in:",De.myCalendars);const e=De.myCalendars.find(e=>"Life Goals"===e.name||"Life Goals Timeline"===e.name);if(e)console.log("\u2705 Found Life Goals calendar:",e.id),K(e.id);else{const e=De.myCalendars[0];e&&(console.log("\u26a0\ufe0f Using first calendar as fallback:",e.id),K(e.id),l({title:"Using default calendar",description:'Create a "Life Goals" calendar for better organization',status:"info",duration:5e3}))}}},[De,l]),(0,i.useEffect)(()=>{if(null!==ke&&void 0!==ke&&ke.calendarEvents){console.log("\ud83d\udcc5 Loaded calendar events:",ke.calendarEvents);const e=ke.calendarEvents.filter(e=>e.metadata&&"LIFE"===e.metadata["X-GOAL-TIER"]);console.log("\ud83c\udfaf Filtered life goals:",e),J(e)}},[ke]),(0,i.useEffect)(()=>{const e=Math.floor((pe.getTime()-ue.getTime())/864e5)*he.pixelsPerDay;window.scrollTo({top:e+300-200,behavior:"smooth"})},[]);const Fe=()=>{V(null),o()},Ne=e=>{console.log("\ud83d\udd8a\ufe0f Editing goal:",e),V(e),o()},Ge=async(e,t,o)=>{console.log("\ud83d\udccf Resizing goal:",e.title,{oldStart:e.startTime,oldEnd:e.endTime,newStart:t.toISOString(),newEnd:o.toISOString()});try{const n={calendarId:q,title:e.title,description:e.description||"",startTime:t.toISOString(),endTime:o.toISOString(),isAllDay:!0,type:"EVENT",status:"CONFIRMED",visibility:"PRIVATE",metadata:e.metadata,categories:e.categories||["LIFE_GOAL"]},{data:i}=await Se({variables:{id:e.id,input:n}});console.log("\u2705 Goal resized:",i.updateEvent),await we(),l({title:"Goal updated",description:'"'.concat(e.title,'" dates have been adjusted'),status:"success",duration:2e3,isClosable:!0})}catch(n){console.error("\u274c Error resizing goal:",n),l({title:"Error resizing goal",description:"Failed to update goal dates",status:"error",duration:3e3})}},Re=async e=>{console.log("\ud83d\uddd1\ufe0f Deleting goal:",e.title);try{await Ee({variables:{id:e.id}}),console.log("\u2705 Goal deleted"),await we(),l({title:"Goal deleted",description:'"'.concat(e.title,'" has been removed'),status:"success",duration:2e3,isClosable:!0})}catch(t){console.error("\u274c Error deleting goal:",t),l({title:"Error deleting goal",description:"Failed to delete goal",status:"error",duration:3e3})}},Ue=e=>{const t=Math.floor(e/he.pixelsPerDay),o=new Date(ue);return o.setDate(o.getDate()+t),o},Pe=()=>{if(!Z||!te||!ne)return ee(!1),oe(null),le(null),void re(null);const e=te.date<ne.date?te.date:ne.date,t=te.date<ne.date?ne.date:te.date;if(Math.abs(t.getTime()-e.getTime())<864e5)return ee(!1),oe(null),le(null),void re(null);V(null);const n={startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]};V(n),o(),ee(!1),oe(null),le(null),re(null)};return(0,ae.jsxs)(b.a,{bg:r,minH:"100vh",children:[(0,ae.jsx)(c.m,{}),(0,ae.jsx)(h.y,{moduleConfig:p.calendarsModuleConfig}),(0,ae.jsx)(b.a,{position:"sticky",top:"0",zIndex:100,bg:r,borderBottom:"1px solid",borderColor:M,boxShadow:"sm",children:(0,ae.jsx)(b.a,{px:4,py:3,children:(0,ae.jsxs)(f.T,{spacing:3,align:"stretch",children:[(0,ae.jsxs)(y.s,{justify:"space-between",align:"center",children:[(0,ae.jsxs)(f.T,{align:"start",spacing:1,children:[(0,ae.jsxs)(S.z,{children:[(0,ae.jsx)(N.x_j,{size:24,color:U}),(0,ae.jsx)(E.E,{fontSize:"2xl",fontWeight:"bold",color:U,children:"Life Goals Timeline"})]}),(0,ae.jsx)(E.E,{fontSize:"sm",color:P,children:"Plan your life from years to days. Link goals to opportunities."})]}),(0,ae.jsx)(D.$,{leftIcon:(0,ae.jsx)(w.R,{}),colorScheme:"blue",onClick:Fe,children:"Add Life Goal"})]}),(0,ae.jsx)(b.a,{p:3,bg:R,borderRadius:"md",borderWidth:"1px",borderColor:M,children:(0,ae.jsxs)(f.T,{spacing:3,align:"stretch",children:[(0,ae.jsxs)(S.z,{spacing:4,flexWrap:"wrap",children:[(0,ae.jsx)(E.E,{fontSize:"sm",fontWeight:"medium",color:U,children:"Zoom Level:"}),(0,ae.jsx)(T.E,{colorScheme:"blue",fontSize:"sm",children:he.label}),(0,ae.jsx)(C.K,{"aria-label":"Zoom out",icon:(0,ae.jsx)(N.lIm,{}),size:"sm",onClick:()=>{W>0&&Y(W-1)},isDisabled:0===W}),(0,ae.jsxs)(v.Ap,{value:W,min:0,max:Le.length-1,step:1,onChange:e=>{Y(e)},flex:"1",maxW:"300px",children:[(0,ae.jsx)(v.hB,{children:(0,ae.jsx)(v.hJ,{})}),(0,ae.jsx)(v.OQ,{})]}),(0,ae.jsx)(C.K,{"aria-label":"Zoom in",icon:(0,ae.jsx)(N._wx,{}),size:"sm",onClick:()=>{W<Le.length-1&&Y(W+1)},isDisabled:W===Le.length-1}),(0,ae.jsx)(D.$,{onClick:()=>{console.log("\ud83d\udd50 Scroll to Now button clicked");const e=Math.floor((pe.getTime()-ue.getTime())/864e5)*he.pixelsPerDay;window.scrollTo({top:e+300-200,behavior:"smooth"}),l({title:"\ud83d\udd50 Scrolled to today",status:"success",duration:2e3,isClosable:!0})},variant:"ghost",colorScheme:"blue",leftIcon:(0,ae.jsx)(F.b,{}),size:"sm",fontWeight:"medium",title:"Scroll to today",children:"Now"})]}),(0,ae.jsxs)(S.z,{spacing:6,children:[(0,ae.jsxs)(I.MJ,{display:"flex",alignItems:"center",children:[(0,ae.jsx)(z.l,{htmlFor:"show-life-goals",mb:"0",fontSize:"sm",color:U,children:"Show Life Goals"}),(0,ae.jsx)(L.d,{id:"show-life-goals",isChecked:B,onChange:e=>X(e.target.checked),colorScheme:"blue"})]}),(0,ae.jsxs)(I.MJ,{display:"flex",alignItems:"center",children:[(0,ae.jsx)(z.l,{htmlFor:"show-events",mb:"0",fontSize:"sm",color:U,children:"Show Calendar Events"}),(0,ae.jsx)(L.d,{id:"show-events",isChecked:$,onChange:e=>_(e.target.checked),colorScheme:"green"})]})]}),(0,ae.jsxs)(S.z,{spacing:4,children:[(0,ae.jsx)(E.E,{fontSize:"sm",fontWeight:"medium",color:U,children:"Your Birthdate:"}),(0,ae.jsxs)(O.M,{maxW:"200px",children:[(0,ae.jsx)(k.W,{pointerEvents:"none",children:(0,ae.jsx)(N.wIk,{color:P})}),(0,ae.jsx)(A.p,{type:"date",value:se,onChange:e=>{const t=e.target.value;de(t),localStorage.setItem("lifeGoalsBirthDate",t)},size:"sm",bg:R,borderColor:M,color:U,_hover:{borderColor:(0,G.oU)("primary.500",e)},_focus:{borderColor:(0,G.oU)("primary.500",e),boxShadow:"0 0 0 1px "+(0,G.oU)("primary.500",e)}})]}),(0,ae.jsx)(E.E,{fontSize:"xs",color:P,children:"Timeline spans 120 years from birth"})]}),(0,ae.jsxs)(S.z,{spacing:4,fontSize:"xs",color:P,children:[(0,ae.jsxs)(E.E,{children:["Timeline: ",he.displayUnit]}),(0,ae.jsx)(E.E,{children:"\u2022"}),(0,ae.jsxs)(E.E,{children:["Total: ",me.toLocaleString()," days"]}),(0,ae.jsx)(E.E,{children:"\u2022"}),(0,ae.jsxs)(E.E,{children:["Height: ",Math.round(fe),"px"]}),(0,ae.jsx)(E.E,{children:"\u2022"}),(0,ae.jsx)(E.E,{fontWeight:"medium",color:(0,G.oU)("primary.500",e),children:"\ud83d\udca1 Click and drag on timeline to create a goal"})]})]})})]})})}),(0,ae.jsx)(b.a,{px:4,py:4,children:(0,ae.jsx)(f.T,{spacing:4,align:"stretch",children:(0,ae.jsx)(b.a,{ref:ce,position:"relative",bg:R,borderRadius:"md",borderWidth:"1px",borderColor:M,children:(0,ae.jsxs)(y.s,{children:[(0,ae.jsx)(be,{birthDate:ue,endDate:xe,zoomConfig:he,totalHeight:fe}),(0,ae.jsxs)(b.a,{flex:"1",position:"relative",minH:"".concat(fe,"px"),onMouseDown:e=>{if(e.target.closest(".life-goal-card"))return;const t=e.currentTarget.getBoundingClientRect(),o=e.clientY-t.top+e.currentTarget.scrollTop,n=Ue(o);ee(!0),oe({y:o,date:n}),re({top:o,height:0})},onMouseMove:e=>{if(!Z||!te)return;const t=e.currentTarget.getBoundingClientRect(),o=e.clientY-t.top+e.currentTarget.scrollTop,n=Ue(o);le({y:o,date:n});const l=Math.min(te.y,o),i=Math.abs(o-te.y);re({top:l,height:i})},onMouseUp:Pe,onMouseLeave:Pe,cursor:Z?"grabbing":"crosshair",userSelect:"none",children:[(0,ae.jsx)(b.a,{position:"absolute",top:"".concat(Math.floor((pe.getTime()-ue.getTime())/864e5)*he.pixelsPerDay,"px"),left:"0",right:"0",h:"2px",bg:"red.500",zIndex:100,children:(0,ae.jsx)(T.E,{position:"absolute",left:"10px",top:"-12px",colorScheme:"red",fontSize:"xs",children:"TODAY"})}),ie&&(0,ae.jsx)(b.a,{position:"absolute",top:"".concat(ie.top,"px"),left:"0",right:"0",height:"".concat(ie.height,"px"),bg:"blue.500",opacity:.2,borderWidth:"2px",borderColor:"blue.500",borderRadius:"md",pointerEvents:"none",zIndex:50}),B&&H.map(e=>(0,ae.jsx)(b.a,{className:"life-goal-card",children:(0,ae.jsx)(je,{goal:e,birthDate:ue,zoomConfig:he,onEdit:Ne,onResize:Ge,onDelete:Re})},e.id)),$&&(0,ae.jsx)(E.E,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:P,fontSize:"sm",children:"Regular events display coming soon..."}),Oe||Ae?(0,ae.jsx)(y.s,{direction:"column",align:"center",justify:"center",h:"100%",color:P,children:(0,ae.jsx)(E.E,{fontSize:"lg",children:"Loading your life goals..."})}):0===H.length&&(0,ae.jsxs)(y.s,{direction:"column",align:"center",justify:"center",h:"100%",color:P,children:[(0,ae.jsx)(N.x_j,{size:48}),(0,ae.jsx)(E.E,{mt:4,fontSize:"lg",fontWeight:"medium",children:"No life goals yet"}),(0,ae.jsx)(E.E,{fontSize:"sm",mt:2,children:"Start by adding your first long-term goal"}),(0,ae.jsx)(D.$,{mt:4,leftIcon:(0,ae.jsx)(w.R,{}),colorScheme:"blue",variant:"outline",onClick:Fe,children:"Add Your First Goal"})]})]})]})})})}),(0,ae.jsx)(g.n,{}),(0,ae.jsx)(ge,{isOpen:t,onClose:()=>{V(null),n()},goal:Q&&Q.id?Q:null,initialDates:Q&&!Q.id?{startDate:Q.startDate,endDate:Q.endDate}:void 0,onSave:async e=>{if(q){console.log("\ud83d\udcbe Saving life goal with data:",e),console.log("\ud83d\udcdd Is editing?",!!e.id,"Goal ID:",e.id);try{const t={"X-GOAL-TIER":"LIFE","X-LIFE-GOAL-TYPE":e.goalType,"X-FINANCIAL-TARGET":e.financialTarget||0,"X-OPPORTUNITY-IDS":e.opportunityIds||[],"X-PARENT-GOAL-ID":e.parentGoalId||null,"X-DEPENDENCIES":e.dependencies||[],"X-COMPLETION-PERCENTAGE":0,"X-CREATED-BY":"life-goals-timeline","X-ICAL-VERSION":"RFC5545"},o=e.startDate?new Date(e.startDate):new Date,i=e.endDate?new Date(e.endDate):new Date(o.getTime()+31536e6),r=["LIFE_GOAL"];e.goalType&&r.push(e.goalType);const a={calendarId:q,title:e.title||"Untitled Goal",description:e.description||"",startTime:o.toISOString(),endTime:i.toISOString(),isAllDay:!0,type:"EVENT",status:"CONFIRMED",visibility:"PRIVATE",metadata:t,categories:r};if(console.log("\ud83d\udce4 Sending GraphQL mutation with input:",a),e.id){console.log("\ud83d\udd04 Updating goal with ID:",e.id);const{data:t}=await Se({variables:{id:e.id,input:a}});console.log("\u2705 Goal updated:",t.updateEvent),l({title:"Life goal updated",description:'"'.concat(e.title,'" has been updated'),status:"success",duration:3e3})}else{console.log("\u2795 Creating new goal");const{data:t}=await ye({variables:{input:a}});console.log("\u2705 Goal created:",t.createEvent),l({title:"Life goal created",description:'"'.concat(e.title,'" has been added to your timeline'),status:"success",duration:3e3})}V(null),await we(),n()}catch(t){console.error("\u274c Error saving life goal:",t),l({title:"Error saving goal",description:t instanceof Error?t.message:"An error occurred",status:"error",duration:5e3})}}else l({title:"No calendar available",description:"Please create a calendar first",status:"error",duration:5e3})},onDelete:Re})]})}}}]);
//# sourceMappingURL=3380.df9b4593.chunk.js.map