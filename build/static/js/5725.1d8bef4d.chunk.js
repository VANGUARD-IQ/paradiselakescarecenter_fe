"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[5725],{35725:(e,o,s)=>{s.r(o),s.d(o,{default:()=>Qe});var l,r=s(89379),n=s(57528),i=s(65043),a=s(30502),t=s(44093),d=s(83169),c=s(24330),m=s(10202),h=s(96148),x=s(22107),u=s(34946),b=s(87139),g=s(25011),p=s(39081),j=s(47726),f=s(28846),v=s(58861),y=s(48239),E=s(42703),A=s(57371),C=s(96870),S=s(98939),z=s(98662),I=s(76659),k=s(3109),w=s(31411),U=s(14566),D=s(45973),T=s(29244),B=s(35699),M=s(61724),L=s(53407),_=s(51794),P=s(10227),N=s(68659),F=s(96351),R=s(68455),$=s(11054),O=s(15071),G=s(67516),W=s(56529),Z=s(78460),H=s(25722),Y=s(35929),K=s(73216),J=s(70459),Q=s(10585),q=s(31881),V=s(1009),X=s(94399),ee=s(40319),oe=s(58756),se=s(20563),le=s(80454),re=s(52003),ne=s(63295),ie=s(39985),ae=s(66037),te=s(95214),de=s(95393);const ce=(0,J.J1)(l||(l=(0,n.A)(["\n    query MyEmailAccounts {\n        myEmailAddresses {\n            id\n            email\n            name\n            type\n            isVerified\n            associatedClients\n        }\n        hasAssignedEmailAddress\n    }\n"])));var me,he,xe,ue,be,ge,pe,je,fe,ve,ye,Ee,Ae,Ce,Se,ze,Ie,ke,we=s(70579);const Ue=(0,J.J1)(me||(me=(0,n.A)(["\n    query GetMeWithEmail {\n        me {\n            id\n            fName\n            lName\n        }\n    }\n"]))),De=(0,J.J1)(he||(he=(0,n.A)(["\n    query GetMyAccessibleEmailAddresses {\n        myAccessibleEmailAddresses {\n            email\n            displayName\n            type\n            unreadCount\n            totalCount\n            isDefault\n            recordId\n        }\n    }\n"]))),Te=(0,J.J1)(xe||(xe=(0,n.A)(["\n    query GetInboundEmailsByAddress($emailAddress: String, $limit: Int, $offset: Int) {\n        emailInboxPaginated(emailAddress: $emailAddress, limit: $limit, offset: $offset) {\n            emails {\n                id\n                from\n                fromName\n                fromFull\n                to\n                toFull\n                subject\n                date\n                textBody\n                htmlBody\n                isRead\n                isStarred\n                isSpam\n                attachments {\n                    name\n                    contentType\n                    contentLength\n                    ipfsUrl\n                }\n                labels\n                folder\n                isAssigned\n                assignedClients\n                isArchived\n                tasks {\n                    id\n                    status\n                    priority\n                    dueDate\n                }\n            }\n            totalCount\n            hasMore\n            currentPage\n            totalPages\n        }\n    }\n"]))),Be=(0,J.J1)(ue||(ue=(0,n.A)(["\n    query GetInboundEmailsOnly {\n        inboundEmails {\n            id\n            from\n            fromName\n            fromFull\n            to\n            toFull\n            subject\n            date\n            textBody\n            htmlBody\n            isRead\n            isStarred\n            isSpam\n            attachments {\n                name\n                contentType\n                contentLength\n                ipfsUrl\n            }\n            labels\n            folder\n            isAssigned\n            assignedClients\n            isArchived\n            tasks {\n                id\n                status\n                priority\n                dueDate\n            }\n        }\n    }\n"]))),Me=(0,J.J1)(be||(be=(0,n.A)(["\n    query GetOutboundEmailsOnly {\n        emails {\n            id\n            subject\n            to\n            from\n            status\n            createdAt\n            sentAt\n            opens\n            clicks\n            attachments {\n                name\n            }\n        }\n    }\n"]))),Le=(0,J.J1)(ge||(ge=(0,n.A)(["\n    query GetDraftEmails {\n        emailsDraft {\n            id\n            subject\n            to\n            from\n            status\n            createdAt\n            attachments {\n                name\n            }\n        }\n    }\n"]))),_e=(0,J.J1)(pe||(pe=(0,n.A)(["\n    query GetSentEmails {\n        emailsSent {\n            id\n            subject\n            to\n            from\n            status\n            sentAt\n            opens\n            clicks\n            messageId\n            attachments {\n                name\n            }\n        }\n    }\n"]))),Pe=(0,J.J1)(je||(je=(0,n.A)(["\n    query GetInboundEmails($folder: String) {\n        inboundEmails(folder: $folder) {\n            id\n            subject\n            from\n            fromFull\n            to\n            date\n            textBody\n            htmlBody\n            isRead\n            isStarred\n            folder\n            labels\n            attachments {\n                name\n            }\n            tasks {\n                id\n                status\n                priority\n                dueDate\n            }\n        }\n    }\n"]))),Ne=(0,J.J1)(fe||(fe=(0,n.A)(["\n    query GetUnreadCount {\n        unreadInboundEmailCount\n    }\n"]))),Fe=(0,J.J1)(ve||(ve=(0,n.A)(["\n    mutation AddInboundEmailLabel($emailId: String!, $label: String!) {\n        addInboundEmailLabel(emailId: $emailId, label: $label) {\n            id\n            labels\n        }\n    }\n"]))),Re=(0,J.J1)(ye||(ye=(0,n.A)(["\n    mutation RemoveInboundEmailLabel($emailId: String!, $label: String!) {\n        removeInboundEmailLabel(emailId: $emailId, label: $label) {\n            id\n            labels\n        }\n    }\n"]))),$e=(0,J.J1)(Ee||(Ee=(0,n.A)(["\n    query AvailableInboundEmailLabels {\n        availableInboundEmailLabels\n    }\n"]))),Oe=(0,J.J1)(Ae||(Ae=(0,n.A)(["\n    mutation DeleteEmail($id: ID!) {\n        deleteEmail(id: $id)\n    }\n"]))),Ge=(0,J.J1)(Ce||(Ce=(0,n.A)(["\n    mutation DuplicateEmail($id: ID!) {\n        duplicateEmail(id: $id) {\n            id\n        }\n    }\n"]))),We=(0,J.J1)(Se||(Se=(0,n.A)(['\n    mutation ArchiveInboundEmail($id: ID!) {\n        moveInboundEmailToFolder(id: $id, folder: "Archived") {\n            id\n            folder\n        }\n    }\n']))),Ze=(0,J.J1)(ze||(ze=(0,n.A)(['\n    mutation UnarchiveInboundEmail($id: ID!) {\n        moveInboundEmailToFolder(id: $id, folder: "Inbox") {\n            id\n            folder\n        }\n    }\n']))),He=(0,J.J1)(Ie||(Ie=(0,n.A)(["\n    mutation ArchiveMultipleEmails($ids: [String!]!) {\n        archiveMultipleInboundEmails(ids: $ids)\n    }\n"]))),Ye=(0,J.J1)(ke||(ke=(0,n.A)(["\n    mutation UnarchiveMultipleEmails($ids: [String!]!) {\n        unarchiveMultipleInboundEmails(ids: $ids)\n    }\n"]))),Ke=e=>{let{email:o,onArchive:s,onManageTags:l,isSelected:r,onSelectChange:n}=e;const i=(0,K.Zp)(),{colorMode:C}=((0,a.d)(),(0,t.G6)()),S=(0,ie.oU)("background.cardGradient",C),z=(0,ie.oU)("border.darkCard",C),I=(0,ie.oU)("light"===C?"text.primary":"text.primaryDark",C),k=(0,ie.oU)("light"===C?"text.secondary":"text.secondaryDark",C),w=(0,ie.oU)("light"===C?"text.muted":"text.mutedDark",C),U=(0,t.dU)("blue.50","blue.900");return(0,we.jsx)(d.Z,{bg:r?U:S,border:"1px solid",borderColor:r?(0,ie.oU)("primaryBlue"):o.isRead?z:(0,ie.oU)("primaryBlue"),borderRadius:"xl",overflow:"hidden",mx:{base:0,md:0},transition:"all 0.3s ease",_hover:{transform:"translateY(-4px)",boxShadow:(0,ie.QQ)("card","hoverShadow"),borderColor:(0,ie.oU)("primaryBlue")},cursor:"pointer",onClick:e=>{e.target.closest(".checkbox-wrapper")||i("/inbox/".concat(o.id))},opacity:o.isRead?.8:1,position:"relative",children:(0,we.jsx)(c.b,{p:{base:3,md:4},children:(0,we.jsxs)(m.T,{align:"stretch",spacing:{base:3,md:4},children:[(0,we.jsxs)(h.z,{justify:"space-between",children:[(0,we.jsxs)(h.z,{spacing:3,align:"start",children:[(0,we.jsx)(x.a,{className:"checkbox-wrapper",onClick:e=>e.stopPropagation(),children:(0,we.jsx)(u.S,{isChecked:r,onChange:e=>{e.stopPropagation(),n&&n(o.id,e.target.checked)},size:"lg",colorScheme:"blue"})}),(0,we.jsxs)(m.T,{align:"start",spacing:1,flex:1,children:[(0,we.jsxs)(h.z,{children:[!o.isRead&&(0,we.jsx)(b.E,{colorScheme:"blue",size:"sm",children:"NEW"}),o.isStarred&&(0,we.jsx)(g.I,{as:V.usP,color:(0,ie.oU)("starYellow")}),o.attachments&&o.attachments.length>0&&(0,we.jsxs)(h.z,{spacing:1,children:[(0,we.jsx)(g.I,{as:V._mV,color:w,boxSize:4}),(0,we.jsx)(p.E,{fontSize:"xs",color:w,children:o.attachments.length})]}),(()=>{if(o.tasks&&0!==o.tasks.length){const e=o.tasks.length,s=o.tasks.filter(e=>"COMPLETED"===e.status).length,l=s<e,r=o.tasks.some(e=>"URGENT"===e.priority&&"COMPLETED"!==e.status),n=o.tasks.some(e=>e.dueDate&&new Date(e.dueDate)<new Date&&"COMPLETED"!==e.status);return(0,we.jsx)(j.m,{label:"".concat(s,"/").concat(e," tasks completed").concat(n?" (overdue!)":""),placement:"top",children:(0,we.jsxs)(h.z,{spacing:1,children:[(0,we.jsx)(g.I,{as:l?V.y3G:V.A3x,color:n?"red.500":l?r?"orange.500":"yellow.500":"green.500",boxSize:4}),(0,we.jsxs)(p.E,{fontSize:"xs",color:n?"red.500":l?r?"orange.500":"yellow.500":"green.500",fontWeight:"bold",children:[s,"/",e]})]})})}return(0,we.jsx)(j.m,{label:"No tasks assigned",placement:"top",children:(0,we.jsx)(b.E,{variant:"subtle",colorScheme:"gray",fontSize:"xs",children:"0/0"})})})(),(0,we.jsx)(f.D,{size:{base:"sm",md:"md"},color:I,noOfLines:1,fontWeight:o.isRead?"normal":"bold",children:o.subject})]}),o.labels&&o.labels.length>0&&(0,we.jsx)(v.B,{spacing:1,mt:1,children:o.labels.map(e=>(0,we.jsx)(v.Q,{children:(0,we.jsx)(y.vw,{size:"sm",bg:"rgba(168, 85, 247, 0.2)",color:"#A855F7",border:"1px solid",borderColor:"rgba(168, 85, 247, 0.3)",children:(0,we.jsx)(y.d1,{fontSize:"xs",children:e})})},e))}),(0,we.jsxs)(p.E,{fontSize:{base:"xs",md:"sm"},color:w,noOfLines:1,children:["From: ",o.fromFull||o.from]}),(0,we.jsxs)(p.E,{fontSize:{base:"xs",md:"xs"},color:w,noOfLines:1,children:["To: ",Array.isArray(o.to)?o.to.join(", "):o.to]})]})]}),(0,we.jsxs)(m.T,{align:"end",spacing:2,display:{base:"none",md:"flex"},children:[(0,we.jsx)(p.E,{fontSize:"xs",color:w,children:(0,X.m)(new Date(o.date),{addSuffix:!0})}),(0,we.jsxs)(h.z,{spacing:1,children:[(0,we.jsx)(j.m,{label:"Manage tags",placement:"left",bg:(0,ie.oU)("primaryBlue"),color:"white",fontSize:"sm",px:3,py:2,borderRadius:"md",hasArrow:!0,children:(0,we.jsx)(E.K,{"aria-label":"Manage tags",icon:(0,we.jsx)(V.cnX,{}),size:"sm",variant:"ghost",color:w,_hover:{bg:S,color:(0,ie.oU)("primaryBlue"),transform:"scale(1.1)"},onClick:e=>{e.stopPropagation(),l&&l(o)}})}),(0,we.jsx)(j.m,{label:"Archived"===o.folder?"Move back to Inbox if tasks are not completed":"Archive email when all tasks are done",placement:"left",bg:(0,ie.oU)("primaryBlue"),color:"white",fontSize:"sm",px:3,py:2,borderRadius:"md",hasArrow:!0,children:(0,we.jsx)(E.K,{"aria-label":"Archived"===o.folder?"Unarchive":"Archive",icon:(0,we.jsx)(V.OZ2,{}),size:"sm",variant:"ghost",color:"Archived"===o.folder?(0,ie.oU)("primaryBlue"):w,_hover:{bg:S,color:(0,ie.oU)("primaryBlue"),transform:"scale(1.1)"},onClick:e=>{e.stopPropagation(),s&&s(o.id)}})})]})]})]}),o.textBody&&(0,we.jsx)(p.E,{fontSize:{base:"xs",md:"sm"},color:k,noOfLines:2,children:o.textBody}),o.tasks&&o.tasks.length>0&&(()=>{const e=o.tasks.length,s=o.tasks.filter(e=>"COMPLETED"===e.status).length,l=s/e*100,r=o.tasks.some(e=>e.dueDate&&new Date(e.dueDate)<new Date&&"COMPLETED"!==e.status);return(0,we.jsxs)(x.a,{mt:{base:2,md:3},children:[(0,we.jsxs)(h.z,{justify:"space-between",mb:1,children:[(0,we.jsx)(p.E,{fontSize:"xs",color:w,fontWeight:"medium",display:{base:"none",sm:"block"},children:"Task Progress"}),(0,we.jsxs)(p.E,{fontSize:"xs",color:r?"red.500":w,children:[s," of ",e," complete",r&&" \u26a0\ufe0f"]})]}),(0,we.jsx)(A.k,{value:l,size:"xs",colorScheme:r?"red":100===l?"green":"blue",borderRadius:"full",bg:z})]})})()]})})})},Je=e=>{var o;let{email:s,isInbound:l=!1,isSelected:r=!1,onSelect:n}=e;const i=(0,K.Zp)(),{colorMode:a}=(0,t.G6)(),u=(0,ie.oU)("background.cardGradient",a),j=(0,ie.oU)("border.darkCard",a),E=(0,ie.oU)("light"===a?"text.primary":"text.primaryDark",a),C=(0,ie.oU)("light"===a?"text.secondary":"text.secondaryDark",a),S=(0,ie.oU)("light"===a?"text.muted":"text.mutedDark",a),z=e=>({DRAFT:(0,ie.oU)("status.draft"),SENT:(0,ie.oU)("status.sent"),FAILED:(0,ie.oU)("status.failed"),SCHEDULED:(0,ie.oU)("status.scheduled"),INBOUND:(0,ie.oU)("status.inbound")}[e]||(0,ie.oU)("status.draft")),I=l?s.date:s.sentAt||s.createdAt,k=l?"INBOUND":s.status,w=(0,t.dU)("".concat((0,ie.oU)("primaryBlue"),"10"),"".concat((0,ie.oU)("primaryBlue"),"15")),U=(0,t.dU)("".concat((0,ie.oU)("primaryBlue"),"15"),"".concat((0,ie.oU)("primaryBlue"),"20"));return(0,we.jsx)(d.Z,{bg:r?w:u,border:"2px solid",borderColor:r||l&&!s.isRead?(0,ie.oU)("primaryBlue"):j,borderRadius:"xl",overflow:"hidden",transition:"all 0.3s ease",_hover:{transform:"translateY(-2px)",boxShadow:(0,ie.QQ)("card","hoverShadow"),borderColor:(0,ie.oU)("primaryBlue"),bg:r?U:"".concat((0,ie.oU)("primaryBlue"),"05")},cursor:"pointer",onClick:()=>{n&&n(s.id),i(l?"/inbox/".concat(s.id):"/email/".concat(s.id))},opacity:l&&s.isRead&&!r?.8:1,width:"100%",children:(0,we.jsx)(c.b,{p:{base:3,md:4},children:(0,we.jsxs)(h.z,{spacing:{base:3,md:4},align:"start",children:[(0,we.jsxs)(m.T,{spacing:1,children:[(0,we.jsx)(g.I,{as:l?V._Y7:V.kGk,color:l&&!s.isRead?(0,ie.oU)("primaryBlue"):S,boxSize:{base:5,md:6}}),(0,we.jsx)(b.E,{size:"sm",bg:"".concat(z(k),"20"),color:z(k),border:"1px solid",borderColor:"".concat(z(k),"30"),px:2,py:.5,borderRadius:"full",fontSize:"xs",children:k})]}),(0,we.jsxs)(m.T,{align:"start",spacing:{base:1,md:2},flex:1,children:[(0,we.jsxs)(h.z,{width:"100%",justify:"space-between",children:[(0,we.jsxs)(m.T,{align:"start",spacing:0,flex:1,children:[(0,we.jsxs)(h.z,{children:[l&&!s.isRead&&(0,we.jsx)(b.E,{colorScheme:"blue",size:"sm",children:"NEW"}),l&&s.isStarred&&(0,we.jsx)(g.I,{as:V.usP,color:(0,ie.oU)("starYellow"),boxSize:4}),s.attachments&&s.attachments.length>0&&(0,we.jsxs)(h.z,{spacing:1,children:[(0,we.jsx)(g.I,{as:V._mV,color:S,boxSize:3}),(0,we.jsx)(p.E,{fontSize:"xs",color:S,children:s.attachments.length})]}),(0,we.jsx)(f.D,{size:{base:"sm",md:"md"},color:E,noOfLines:1,fontWeight:l&&!s.isRead?"bold":"normal",children:s.subject})]}),s.labels&&s.labels.length>0&&(0,we.jsx)(v.B,{spacing:1,mt:1,children:s.labels.map(e=>(0,we.jsx)(v.Q,{children:(0,we.jsx)(y.vw,{size:"sm",bg:"rgba(168, 85, 247, 0.2)",color:"#A855F7",border:"1px solid",borderColor:"rgba(168, 85, 247, 0.3)",children:(0,we.jsx)(y.d1,{fontSize:"xs",children:e})})},e))}),(0,we.jsx)(p.E,{fontSize:{base:"xs",md:"sm"},color:S,noOfLines:1,children:l?"From: ".concat(s.fromFull||s.from):"To: ".concat(Array.isArray(s.to)?s.to.join(", "):s.to)})]}),(0,we.jsx)(p.E,{fontSize:"xs",color:S,display:{base:"none",md:"block"},children:(0,X.m)(new Date(I),{addSuffix:!0})})]}),(s.textBody||s.htmlBody)&&(0,we.jsx)(p.E,{fontSize:{base:"xs",md:"sm"},color:C,noOfLines:{base:1,md:2},children:s.textBody||(null===(o=s.htmlBody)||void 0===o?void 0:o.replace(/<[^>]*>/g,""))}),(0,we.jsx)(p.E,{fontSize:"xs",color:S,display:{base:"block",md:"none"},children:(0,X.m)(new Date(I),{addSuffix:!0})}),l&&s.tasks&&s.tasks.length>0&&(()=>{const e=s.tasks.length,o=s.tasks.filter(e=>"COMPLETED"===e.status).length,l=o/e*100,r=s.tasks.some(e=>e.dueDate&&new Date(e.dueDate)<new Date&&"COMPLETED"!==e.status);return(0,we.jsxs)(x.a,{mt:{base:2,md:3},width:"100%",children:[(0,we.jsxs)(h.z,{justify:"space-between",mb:1,children:[(0,we.jsx)(p.E,{fontSize:"xs",color:S,fontWeight:"medium",children:"Tasks"}),(0,we.jsxs)(p.E,{fontSize:"xs",color:r?"red.500":S,children:[o,"/",e,r&&" \u26a0\ufe0f"]})]}),(0,we.jsx)(A.k,{value:l,size:"xs",colorScheme:r?"red":100===l?"green":"blue",borderRadius:"full",bg:j})]})})()]}),!l&&"SENT"===s.status&&(0,we.jsxs)(h.z,{spacing:3,display:{base:"none",lg:"flex"},children:[(0,we.jsxs)(m.T,{spacing:0,children:[(0,we.jsx)(g.I,{as:V.Vap,color:(0,ie.oU)("successGreen"),boxSize:4}),(0,we.jsx)(p.E,{fontWeight:"bold",fontSize:"sm",color:E,children:s.opens||0}),(0,we.jsx)(p.E,{fontSize:"xs",color:S,children:"Opens"})]}),(0,we.jsxs)(m.T,{spacing:0,children:[(0,we.jsx)(g.I,{as:V.A3x,color:(0,ie.oU)("purpleAccent"),boxSize:4}),(0,we.jsx)(p.E,{fontWeight:"bold",fontSize:"sm",color:E,children:s.clicks||0}),(0,we.jsx)(p.E,{fontSize:"xs",color:S,children:"Clicks"})]})]})]})})})},Qe=()=>{var e,o,s;(0,ae.H)("Emails");const l=(0,K.Zp)(),n=(0,a.d)(),{colorMode:J}=(0,t.G6)(),{isOpen:X,onOpen:me,onClose:he}=(0,C.j)(),{isOpen:xe,onToggle:ue}=(0,C.j)(),[be,ge]=(0,i.useState)(null),pe=i.useRef(null),[je,fe]=(0,i.useState)(null),[ve,ye]=(0,i.useState)(0),[Ee,Ae]=(0,i.useState)(null),[Ce,Se]=(0,i.useState)(new Set),[ze,Ie]=(0,i.useState)(0),{hasEmailAccounts:ke,loading:Qe}=function(){var e;const{data:o,loading:s,error:l}=(0,Q.IT)(ce,{fetchPolicy:"network-only"});console.log("\ud83d\udce7 useEmailAccounts hook:",{loading:s,error:null===l||void 0===l?void 0:l.message,errorDetails:l,data:o,emailAddresses:null===o||void 0===o?void 0:o.myEmailAddresses,count:null===o||void 0===o||null===(e=o.myEmailAddresses)||void 0===e?void 0:e.length,hasAssigned:null===o||void 0===o?void 0:o.hasAssignedEmailAddress}),l&&console.error("\ud83d\udce7 useEmailAccounts error details:",l);const r=!s&&!l&&((null===o||void 0===o?void 0:o.myEmailAddresses)&&o.myEmailAddresses.length>0||!0===(null===o||void 0===o?void 0:o.hasAssignedEmailAddress)),n=(null===o||void 0===o?void 0:o.myEmailAddresses)||[];return{emailAccounts:n,defaultAccount:n[0],hasEmailAccounts:r,loading:s,error:l}}(),{data:qe,loading:Ve,refetch:Xe,error:eo}=(0,Q.IT)(De);null!==qe&&void 0!==qe&&qe.myAccessibleEmailAddresses&&console.log("\ud83d\udce7 [MY_EMAIL_ADDRESSES_QUERY] Full data structure:",JSON.stringify(qe.myAccessibleEmailAddresses,null,2)),console.log("\ud83d\udce7 [MY_EMAIL_ADDRESSES_QUERY] Result:",{loading:Ve,error:eo,data:qe,addresses:null===qe||void 0===qe?void 0:qe.myAccessibleEmailAddresses,firstAddress:null===qe||void 0===qe||null===(e=qe.myAccessibleEmailAddresses)||void 0===e?void 0:e[0],secondAddress:null===qe||void 0===qe||null===(o=qe.myAccessibleEmailAddresses)||void 0===o?void 0:o[1]});const{data:oo,loading:so,refetch:lo}=(0,Q.IT)(Ue);(0,i.useEffect)(()=>{if(null!==qe&&void 0!==qe&&qe.myAccessibleEmailAddresses&&qe.myAccessibleEmailAddresses.length>0&&!je){const e=qe.myAccessibleEmailAddresses.find(e=>"PERSONAL"===e.type);if(e){fe(e.email);const o=qe.myAccessibleEmailAddresses.indexOf(e);ye(o),console.log("\ud83d\udce7 [AUTO-SELECT] Selected personal inbox by default:",e.email)}else{const e=qe.myAccessibleEmailAddresses[0];fe(e.email),ye(0),console.log("\ud83d\udce7 [AUTO-SELECT] Selected first shared inbox by default:",e.email)}}},[qe,je]);window.location.hostname.replace("localhost","tommillerservices.com");i.useEffect(()=>{!so&&oo&&console.log("\ud83d\udce7 [EmailsList] ME_WITH_EMAIL query result:",{hasData:!!oo.me,user:oo.me?{id:oo.me.id,email:oo.me.email,personalEmail:oo.me.personalEmail||"NOT SET",fName:oo.me.fName,lName:oo.me.lName}:"NO USER"})},[oo,so]);const[ro,no]=(0,i.useState)(""),[io,ao]=(0,i.useState)("all"),[to,co]=(0,i.useState)(""),[mo,ho]=(0,i.useState)(""),[xo,uo]=(0,i.useState)(20),[bo,go]=(0,i.useState)([]),[po,jo]=(0,i.useState)(""),[fo,vo]=(0,i.useState)(null),{isOpen:yo,onOpen:Eo,onClose:Ao}=(0,C.j)(),[Co,So]=(0,i.useState)({inbox:1,sent:1,drafts:1,all:1,archived:1}),zo=(0,ie.oU)("background.main",J),Io=(0,ie.oU)("background.cardGradient",J),ko=(0,ie.oU)("border.darkCard",J),wo=(0,ie.oU)("light"===J?"text.primary":"text.primaryDark",J),Uo=(0,ie.oU)("light"===J?"text.secondary":"text.secondaryDark",J),Do=(0,ie.oU)("light"===J?"text.muted":"text.mutedDark",J);console.log("\ud83d\udce7 [EMAIL FILTERING] Selected email address:",je),console.log("\ud83d\udce7 [EMAIL FILTERING] Using query:",je?"INBOUND_EMAILS_BY_ADDRESS_QUERY":"INBOUND_EMAILS_ONLY_QUERY");const{data:To,loading:Bo,refetch:Mo,error:Lo}=(0,Q.IT)(je?Te:Be,{variables:je?{emailAddress:je,limit:xo,offset:(Co.inbox-1)*xo}:{},skip:!1,fetchPolicy:"cache-and-network",onCompleted:e=>{var o,s;console.log("\u2705 [EMAIL FILTERING] Query completed successfully");const l=je?(null===e||void 0===e||null===(o=e.emailInboxPaginated)||void 0===o?void 0:o.emails)||[]:(null===e||void 0===e?void 0:e.inboundEmails)||[],r=je?(null===e||void 0===e||null===(s=e.emailInboxPaginated)||void 0===s?void 0:s.totalCount)||0:l.length;console.log("\ud83d\udcca [EMAIL FILTERING] Loaded ".concat(l.length," of ").concat(r," emails for ").concat(je||"all inboxes")),je&&null!==e&&void 0!==e&&e.emailInboxPaginated&&console.log("\ud83d\udcc4 [EMAIL FILTERING] Pagination info:",{currentPage:e.emailInboxPaginated.currentPage,totalPages:e.emailInboxPaginated.totalPages,totalCount:e.emailInboxPaginated.totalCount,hasMore:e.emailInboxPaginated.hasMore})},onError:e=>{console.error("\u274c [EMAIL FILTERING] Query error:",e),console.error("\u274c [EMAIL FILTERING] Error details:",e.graphQLErrors)}});Lo&&console.error("\u274c [EMAIL FILTERING] Inbound query error:",Lo);const[_o,Po]=(0,i.useState)(!1),{data:No,loading:Fo,refetch:Ro}=(0,Q.IT)(Me,{skip:!_o,fetchPolicy:"cache-and-network"}),$o=(0,i.useMemo)(()=>{var e;if(!To&&!No)return null;const o=je?(null===To||void 0===To||null===(e=To.emailInboxPaginated)||void 0===e?void 0:e.emails)||[]:(null===To||void 0===To?void 0:To.inboundEmails)||[];return{emails:(null===No||void 0===No?void 0:No.emails)||[],inboundEmails:o}},[To,No,je]),Oo=Bo||_o&&Fo,Go=()=>{Mo(),_o&&Ro()},{data:Wo,loading:Zo,refetch:Ho}=(0,Q.IT)(Le,{skip:!je}),{data:Yo,loading:Ko,refetch:Jo}=(0,Q.IT)(_e,{skip:!je}),{data:Qo,loading:qo,refetch:Vo}=(0,Q.IT)(Pe,{variables:{folder:"Inbox"},fetchPolicy:"network-only",skip:!0}),{data:Xo,loading:es,refetch:os}=(0,Q.IT)(Pe,{variables:{folder:"Archived"},skip:3!==ze}),{data:ss}=(0,Q.IT)(Ne,{skip:!je}),{data:ls}=(0,Q.IT)($e),[rs]=(0,q.n)(Fe,{onCompleted:()=>{n({title:"Label added",status:"success",duration:2e3}),Vo(),Go(),jo("")}}),[ns]=(0,q.n)(Re,{onCompleted:()=>{n({title:"Label removed",status:"success",duration:2e3}),Vo(),Go()}}),[is]=(0,q.n)(Oe,{onCompleted:()=>{n({title:"Email deleted",status:"success",duration:3e3,isClosable:!0}),Go(),Ho(),he()},onError:e=>{n({title:"Error deleting email",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),[as]=(0,q.n)(He,{onCompleted:e=>{n({title:"Archived ".concat(e.archiveMultipleInboundEmails," emails"),status:"success",duration:3e3,isClosable:!0}),Mo(),Se(new Set)},onError:e=>{n({title:"Error archiving emails",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),[ts]=(0,q.n)(Ye,{onCompleted:e=>{n({title:"Unarchived ".concat(e.unarchiveMultipleInboundEmails," emails"),status:"success",duration:3e3,isClosable:!0}),os(),Se(new Set)},onError:e=>{n({title:"Error unarchiving emails",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),[ds]=(0,q.n)(Ge,{onCompleted:e=>{n({title:"Email duplicated",status:"success",duration:3e3,isClosable:!0}),Go(),Ho(),l("/email/".concat(e.duplicateEmail.id))},onError:e=>{n({title:"Error duplicating email",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),cs=e=>{vo(e),Eo()},ms=async()=>{po&&fo&&(await rs({variables:{emailId:fo.id,label:po}}),jo(""))},[hs]=(0,q.n)(We,{onCompleted:()=>{n({title:"Email archived",description:"Email has been moved to archive",status:"success",duration:2e3,isClosable:!0}),Vo(),os(),Mo(),Xe()},onError:e=>{n({title:"Error archiving email",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),[xs]=(0,q.n)(Ze,{onCompleted:()=>{n({title:"Email restored",description:"Email has been moved back to inbox",status:"success",duration:2e3,isClosable:!0}),Vo(),os(),Mo(),Xe()},onError:e=>{n({title:"Error restoring email",description:e.message,status:"error",duration:5e3,isClosable:!0})}}),us=e=>{if(!e)return[];let o=[...e];if(ro){const e=ro.toLowerCase();o=o.filter(o=>{const s=(o.subject||"").toLowerCase(),l=(o.from||"").toLowerCase(),r=(o.fromFull||"").toLowerCase(),n=Array.isArray(o.to)?o.to.join(" ").toLowerCase():(o.to||"").toLowerCase(),i=(o.textBody||"").toLowerCase()+(o.htmlBody||"").toLowerCase();return s.includes(e)||l.includes(e)||r.includes(e)||n.includes(e)||i.includes(e)})}if(bo.length>0&&(o=o.filter(e=>e.labels&&bo.some(o=>e.labels.includes(o)))),"all"!==io){const e=new Date;let s,l=e;switch(io){case"today":s=new Date(e.setHours(0,0,0,0));break;case"yesterday":s=new Date(e.setDate(e.getDate()-1)),s.setHours(0,0,0,0),l=new Date(s),l.setHours(23,59,59,999);break;case"lastWeek":s=(0,ee.k)(e,1);break;case"last7Days":s=(0,oe.e)(e,7);break;case"last30Days":s=(0,oe.e)(e,30);break;case"thisMonth":s=new Date(e.getFullYear(),e.getMonth(),1);break;case"lastMonth":s=new Date(e.getFullYear(),e.getMonth()-1,1),l=new Date(e.getFullYear(),e.getMonth(),0);break;case"custom":if(!to||!mo)return o;s=new Date(to),l=new Date(mo),l.setHours(23,59,59,999);break;default:return o}o=o.filter(e=>{const o=new Date(e.date||e.sentAt||e.createdAt);return(0,se.v)(o,{start:s,end:l})})}return o},bs=(e,o)=>{const s=(o-1)*xo,l=s+xo;return{paginatedEmails:e.slice(s,l),totalCount:e.length,totalPages:Math.ceil(e.length/xo),hasMore:l<e.length,currentPage:o}},gs=()=>{So({inbox:1,sent:1,drafts:1,all:1,archived:1})},ps=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?xs({variables:{id:e}}):hs({variables:{id:e}})},js=(e,o)=>{const s=new Set(Ce);o?s.add(e):s.delete(e),Se(s)},fs=e=>{const o=new Set(e.map(e=>e.id));Se(o)},vs=()=>{Se(new Set)},ys=()=>{Ce.size>0&&as({variables:{ids:Array.from(Ce)}})},Es=()=>{Ce.size>0&&ts({variables:{ids:Array.from(Ce)}})};return(0,we.jsxs)(x.a,{minH:"100vh",bg:zo,display:"flex",flexDirection:"column",overflowX:"hidden",children:[(0,we.jsx)(re.m,{}),(0,we.jsx)(te.y,{moduleConfig:de.default}),(0,we.jsx)(S.m,{maxW:{base:"100%",md:"container.md",lg:"container.xl"},px:{base:3,md:8},py:{base:4,md:8},flex:"1",children:(0,we.jsxs)(m.T,{spacing:{base:4,md:8},align:"stretch",children:[(0,we.jsxs)(m.T,{align:"stretch",spacing:{base:3,md:0},children:[(0,we.jsxs)(m.T,{align:"start",spacing:1,children:[(0,we.jsx)(f.D,{size:{base:"lg",md:"xl",lg:"2xl"},color:wo,children:"Email"}),(0,we.jsx)(p.E,{fontSize:{base:"sm",md:"md"},color:Do,children:Qe||ke?"Compose and send branded emails to your clients":"Email access not configured - Please contact your administrator"})]}),(0,we.jsx)(x.a,{display:"flex",justifyContent:{base:"stretch",md:"flex-end"},mt:{base:3,md:0},children:(0,we.jsx)(z.$,{colorScheme:"blue",onClick:()=>l("/emails/new"),size:{base:"md",md:"lg"},bg:(0,ie.oU)("primaryBlue"),_hover:{bg:(0,ie.oU)("primaryBlueHover")},width:{base:"100%",md:"auto"},children:"Compose Email"})})]}),(Ve||Bo)&&(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,mb:4,children:(0,we.jsx)(c.b,{children:(0,we.jsxs)(m.T,{spacing:4,align:"stretch",children:[(0,we.jsxs)(m.T,{align:"stretch",spacing:2,children:[(0,we.jsxs)(h.z,{justify:"space-between",children:[(0,we.jsx)(p.E,{color:wo,fontWeight:"medium",children:Ve?"\ud83d\udce7 Querying your email accounts...":"\u2705 Email accounts loaded"}),Ve&&(0,we.jsx)(I.y,{size:"sm",color:(0,ie.oU)("primaryBlue")}),!Ve&&(0,we.jsx)(p.E,{color:"green.500",children:"\u2713"})]}),(0,we.jsx)(A.k,{value:Ve?50:100,size:"sm",colorScheme:"blue",isIndeterminate:Ve,borderRadius:"full"})]}),!Ve&&(0,we.jsxs)(m.T,{align:"stretch",spacing:2,children:[(0,we.jsxs)(h.z,{justify:"space-between",children:[(0,we.jsx)(p.E,{color:wo,fontWeight:"medium",children:Bo?"\ud83d\udcec Loading most recent emails...":"\u2705 Emails loaded"}),Bo&&(0,we.jsx)(I.y,{size:"sm",color:(0,ie.oU)("primaryBlue")}),!Bo&&(0,we.jsx)(p.E,{color:"green.500",children:"\u2713"})]}),(0,we.jsx)(A.k,{value:Bo?50:100,size:"sm",colorScheme:"green",isIndeterminate:Bo,borderRadius:"full"})]})]})})}),!Qe&&!ke&&(0,we.jsx)(d.Z,{bg:"orange.50",border:"1px solid",borderColor:"orange.200",_dark:{bg:"orange.900",borderColor:"orange.700"},children:(0,we.jsx)(c.b,{children:(0,we.jsxs)(h.z,{spacing:3,align:"start",children:[(0,we.jsx)(g.I,{as:V.eHT,color:"orange.500",boxSize:5,mt:.5}),(0,we.jsxs)(m.T,{align:"start",spacing:2,flex:1,children:[(0,we.jsx)(p.E,{fontWeight:"bold",color:"orange.800",_dark:{color:"orange.200"},children:"No Email Address Assigned"}),(0,we.jsx)(p.E,{fontSize:"sm",color:"orange.700",_dark:{color:"orange.300"},children:"You don't have any email addresses assigned to your account on the Email List page."}),(0,we.jsx)(p.E,{fontSize:"sm",color:"orange.700",_dark:{color:"orange.300"},children:"Please contact your system administrator to have an email address assigned to you before you can send or receive emails."})]})]})})}),!Ve&&(null===qe||void 0===qe?void 0:qe.myAccessibleEmailAddresses)&&qe.myAccessibleEmailAddresses.length>0&&(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,mb:4,children:(0,we.jsx)(c.b,{children:(0,we.jsxs)(m.T,{spacing:4,align:"stretch",children:[(0,we.jsxs)(h.z,{justify:"space-between",children:[(0,we.jsx)(f.D,{size:"md",color:wo,children:"\ud83d\udce7 Your Email Inboxes"}),(0,we.jsxs)(b.E,{colorScheme:"blue",variant:"subtle",fontSize:"md",px:3,py:1,children:[qe.myAccessibleEmailAddresses.length," ",1===qe.myAccessibleEmailAddresses.length?"Inbox":"Inboxes"]})]}),(0,we.jsx)(k.t,{index:ve,onChange:e=>{console.log("\ud83d\udd04 [TAB CHANGE] Tab clicked - Index: ".concat(e)),ye(e);const o=qe.myAccessibleEmailAddresses[e];console.log("\ud83d\udce7 [TAB CHANGE] Selected specific inbox:",{email:o.email,displayName:o.displayName,type:o.type,recordId:o.recordId}),fe(o.email),console.log("\ud83d\udcc4 [TAB CHANGE] Resetting pagination to page 1"),So(e=>(0,r.A)((0,r.A)({},e),{},{inbox:1})),console.log("\ud83d\udd04 [TAB CHANGE] Triggering email refetch..."),Mo()},variant:"soft-rounded",children:(0,we.jsx)(w.w,{flexWrap:"wrap",sx:{"& .chakra-tabs__tab[aria-selected=true]":{bg:"".concat((0,ie.oU)("primaryBlue"),"20"),color:(0,ie.oU)("primaryBlue"),fontWeight:"bold",borderColor:(0,ie.oU)("primaryBlue"),border:"2px solid"},"& .chakra-tabs__tab":{color:Do,border:"1px solid",borderColor:"transparent",_hover:{bg:"".concat((0,ie.oU)("primaryBlue"),"10"),color:(0,ie.oU)("primaryBlue")}}},children:qe.myAccessibleEmailAddresses.map((e,o)=>{var s;return(0,we.jsx)(j.m,{label:(0,we.jsxs)(m.T,{align:"start",spacing:1,children:[(0,we.jsxs)(p.E,{fontSize:"xs",children:[(0,we.jsx)("strong",{children:"Source:"})," ","PERSONAL"===e.type?null!==(s=e.recordId)&&void 0!==s&&s.startsWith("client_")?"Client Record":"Email Account":"Email Address Collection"]}),(0,we.jsxs)(p.E,{fontSize:"xs",children:[(0,we.jsx)("strong",{children:"ID:"})," ",e.recordId]})]}),placement:"bottom",hasArrow:!0,children:(0,we.jsx)(U.o,{children:(0,we.jsxs)(m.T,{spacing:0,align:"center",children:[(0,we.jsxs)(h.z,{spacing:2,children:[(0,we.jsx)(p.E,{fontSize:"md",fontWeight:"medium",children:e.displayName}),e.unreadCount>0&&(0,we.jsx)(b.E,{colorScheme:"red",variant:"solid",fontSize:"sm",children:e.unreadCount})]}),(0,we.jsx)(p.E,{fontSize:"sm",color:Do,children:e.email})]})})},e.email)})})}),je&&(0,we.jsx)(x.a,{p:3,bg:zo,borderRadius:"md",border:"1px solid",borderColor:ko,children:(0,we.jsxs)(p.E,{fontSize:"sm",color:Uo,children:[(0,we.jsx)("strong",{children:"Currently viewing:"})," ",je]})}),!je&&(0,we.jsx)(x.a,{p:3,bg:zo,borderRadius:"md",border:"1px solid",borderColor:ko,children:(0,we.jsxs)(p.E,{fontSize:"sm",color:Uo,children:[(0,we.jsx)("strong",{children:"Currently viewing:"})," All accessible email inboxes"]})})]})})}),(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsxs)(m.T,{width:"100%",spacing:{base:3,md:4},align:"stretch",children:[(0,we.jsxs)(D.M,{width:"100%",children:[(0,we.jsx)(T.W,{pointerEvents:"none",children:(0,we.jsx)(g.I,{as:V.CKj,color:Do})}),(0,we.jsx)(B.p,{placeholder:"Search emails...",value:ro,onChange:e=>no(e.target.value),bg:zo,border:"1px solid",borderColor:ko,color:wo,_placeholder:{color:Do},_hover:{borderColor:(0,ie.oU)("primaryBlue")},_focus:{borderColor:(0,ie.oU)("primaryBlue"),boxShadow:"0 0 0 1px #3B82F6"},fontSize:{base:"sm",md:"md"}})]}),(0,we.jsxs)(h.z,{width:"100%",spacing:{base:2,md:4},children:[(0,we.jsxs)(M.l,{flex:{base:1,md:"none"},width:{base:"100%",md:"200px"},value:io,onChange:e=>{ao(e.target.value),gs()},bg:zo,border:"1px solid",borderColor:ko,color:wo,_hover:{borderColor:(0,ie.oU)("primaryBlue")},_focus:{borderColor:(0,ie.oU)("primaryBlue"),boxShadow:"0 0 0 1px #3B82F6"},children:[(0,we.jsx)("option",{value:"all",children:"All Time"}),(0,we.jsx)("option",{value:"today",children:"Today"}),(0,we.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,we.jsx)("option",{value:"last7Days",children:"Last 7 Days"}),(0,we.jsx)("option",{value:"lastWeek",children:"Last Week"}),(0,we.jsx)("option",{value:"last30Days",children:"Last 30 Days"}),(0,we.jsx)("option",{value:"thisMonth",children:"This Month"}),(0,we.jsx)("option",{value:"lastMonth",children:"Last Month"}),(0,we.jsx)("option",{value:"custom",children:"Custom Range"})]}),(0,we.jsxs)(M.l,{flex:{base:1,md:"none"},width:{base:"100%",md:"120px"},value:xo,onChange:e=>{uo(Number(e.target.value)),gs()},bg:zo,border:"1px solid",borderColor:ko,color:wo,_hover:{borderColor:(0,ie.oU)("primaryBlue")},_focus:{borderColor:(0,ie.oU)("primaryBlue"),boxShadow:"0 0 0 1px #3B82F6"},children:[(0,we.jsx)("option",{value:"5",children:"5 per page"}),(0,we.jsx)("option",{value:"10",children:"10 per page"}),(0,we.jsx)("option",{value:"20",children:"20 per page"}),(0,we.jsx)("option",{value:"50",children:"50 per page"}),(0,we.jsx)("option",{value:"100",children:"100 per page"})]})]}),(0,we.jsxs)(z.$,{leftIcon:(0,we.jsx)(V.K7R,{}),variant:"outline",onClick:ue,borderColor:ko,color:wo,_hover:{bg:Io},width:{base:"100%",md:"auto"},size:{base:"sm",md:"md"},children:[xe?"Hide":"Show"," Filters"]})]}),(0,we.jsx)(L.S,{in:xe,animateOpacity:!0,children:(0,we.jsxs)(m.T,{spacing:4,width:"100%",align:"stretch",children:[(0,we.jsxs)(x.a,{children:[(0,we.jsx)(p.E,{fontSize:"sm",color:Uo,mb:2,fontWeight:"medium",children:"Filter by Tags:"}),(0,we.jsxs)(v.B,{spacing:2,children:[null===ls||void 0===ls||null===(s=ls.availableInboundEmailLabels)||void 0===s?void 0:s.map(e=>(0,we.jsx)(v.Q,{children:(0,we.jsxs)(y.vw,{size:"md",cursor:"pointer",bg:bo.includes(e)?"rgba(168, 85, 247, 0.3)":"rgba(168, 85, 247, 0.1)",color:"#A855F7",border:"1px solid",borderColor:bo.includes(e)?"#A855F7":"rgba(168, 85, 247, 0.3)",onClick:()=>{bo.includes(e)?go(bo.filter(o=>o!==e)):go([...bo,e])},_hover:{bg:"rgba(168, 85, 247, 0.2)"},children:[(0,we.jsx)(y.d1,{children:e}),bo.includes(e)&&(0,we.jsx)(y.TV,{})]})},e)),(!(null!==ls&&void 0!==ls&&ls.availableInboundEmailLabels)||0===ls.availableInboundEmailLabels.length)&&(0,we.jsx)(p.E,{fontSize:"sm",color:Do,children:"No tags available yet"})]})]}),"custom"===io&&(0,we.jsxs)(h.z,{spacing:4,width:"100%",children:[(0,we.jsxs)(D.M,{size:"md",children:[(0,we.jsx)(T.W,{pointerEvents:"none",children:(0,we.jsx)(g.I,{as:V.wIk,color:Do})}),(0,we.jsx)(B.p,{type:"date",placeholder:"Start Date",value:to,onChange:e=>co(e.target.value),bg:zo,border:"1px solid",borderColor:ko,color:wo,_hover:{borderColor:(0,ie.oU)("primaryBlue")},_focus:{borderColor:(0,ie.oU)("primaryBlue"),boxShadow:"0 0 0 1px #3B82F6"}})]}),(0,we.jsx)(p.E,{color:Do,children:"to"}),(0,we.jsxs)(D.M,{size:"md",children:[(0,we.jsx)(T.W,{pointerEvents:"none",children:(0,we.jsx)(g.I,{as:V.wIk,color:Do})}),(0,we.jsx)(B.p,{type:"date",placeholder:"End Date",value:mo,onChange:e=>ho(e.target.value),bg:zo,border:"1px solid",borderColor:ko,color:wo,_hover:{borderColor:(0,ie.oU)("primaryBlue")},_focus:{borderColor:(0,ie.oU)("primaryBlue"),boxShadow:"0 0 0 1px #3B82F6"}})]})]})]})}),(ro||"all"!==io||bo.length>0)&&(0,we.jsxs)(h.z,{width:"100%",justify:"space-between",children:[(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Filtering emails",ro&&' containing "'.concat(ro,'"'),ro&&("all"!==io||bo.length>0)&&" and ",bo.length>0&&"tagged with ".concat(bo.join(", ")),bo.length>0&&"all"!==io&&" and ","all"!==io&&"custom"!==io&&"from ".concat(io.replace(/([A-Z])/g," $1").toLowerCase()),"custom"===io&&to&&mo&&"from ".concat((0,le.GP)(new Date(to),"MMM dd, yyyy")," to ").concat((0,le.GP)(new Date(mo),"MMM dd, yyyy"))]}),(0,we.jsx)(z.$,{size:"sm",variant:"ghost",onClick:()=>{no(""),ao("all"),co(""),ho(""),go([])},color:Do,_hover:{color:wo},children:"Clear Filters"})]})]})})}),(0,we.jsxs)(k.t,{variant:"soft-rounded",colorScheme:"blue",index:ze,onChange:e=>{Ie(e),3!==e||_o||Po(!0)},children:[(0,we.jsxs)(w.w,{bg:Io,p:{base:1,md:2},borderRadius:"lg",border:"1px solid",borderColor:ko,overflowX:"auto",whiteSpace:"nowrap",children:[(0,we.jsx)(U.o,{color:Do,_selected:{bg:(0,ie.oU)("primaryBlue"),color:"white"},fontSize:{base:"xs",md:"sm"},px:{base:2,md:3},children:(0,we.jsxs)(h.z,{spacing:1,children:[(0,we.jsx)(p.E,{children:je?je.split("@")[0]:"Inbox"}),((e,o)=>{if((null===qe||void 0===qe||!qe.myAccessibleEmailAddresses)&&!ss)return null;const s=je?null===qe||void 0===qe||null===(e=qe.myAccessibleEmailAddresses)||void 0===e||null===(o=e.find(e=>e.email===je))||void 0===o?void 0:o.unreadCount:null===ss||void 0===ss?void 0:ss.unreadInboundEmailCount;return s&&s>0?(0,we.jsx)(b.E,{colorScheme:"red",borderRadius:"full",size:"sm",children:s}):null})()]})}),(0,we.jsx)(U.o,{color:Do,_selected:{bg:(0,ie.oU)("primaryBlue"),color:"white"},fontSize:{base:"xs",md:"sm"},px:{base:2,md:3},children:"Sent"}),(0,we.jsx)(U.o,{color:Do,_selected:{bg:(0,ie.oU)("primaryBlue"),color:"white"},fontSize:{base:"xs",md:"sm"},px:{base:2,md:3},children:"Drafts"}),(0,we.jsx)(j.m,{label:"Completed emails - Move back to Inbox if tasks are incomplete",placement:"top",bg:(0,ie.oU)("darkCardBg"),color:"white",fontSize:"sm",px:4,py:2,borderRadius:"md",hasArrow:!0,border:"1px solid",borderColor:(0,ie.oU)("primaryBlue"),children:(0,we.jsx)(U.o,{color:Do,_selected:{bg:(0,ie.oU)("primaryBlue"),color:"white"},fontSize:{base:"xs",md:"sm"},px:{base:2,md:3},children:(0,we.jsxs)(h.z,{spacing:1,children:[(0,we.jsx)(g.I,{as:V.OZ2,boxSize:{base:3,md:4}}),(0,we.jsx)(p.E,{children:"Archived"})]})})}),(0,we.jsx)(U.o,{color:Do,_selected:{bg:(0,ie.oU)("primaryBlue"),color:"white"},fontSize:{base:"xs",md:"sm"},px:{base:2,md:3},children:"All"})]}),(0,we.jsxs)(_.T,{children:[(0,we.jsx)(P.K,{px:0,children:qo?(0,we.jsx)(N.o,{py:10,children:(0,we.jsx)(I.y,{size:"xl",color:(0,ie.oU)("primaryBlue")})}):(0,we.jsx)(we.Fragment,{children:((e,o,s,l)=>{const n=je?(null===To||void 0===To||null===(e=To.emailInboxPaginated)||void 0===e?void 0:e.emails)||[]:(null===To||void 0===To?void 0:To.inboundEmails)||[],i=je?(null===To||void 0===To||null===(o=To.emailInboxPaginated)||void 0===o?void 0:o.totalCount)||0:n.length,a=je?(null===To||void 0===To||null===(s=To.emailInboxPaginated)||void 0===s?void 0:s.totalPages)||1:Math.ceil(i/xo),t=us(n);return t.length>0?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(h.z,{spacing:3,mb:4,p:4,bg:Io,borderRadius:"lg",border:"1px solid",borderColor:ko,children:Ce.size>0?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)(p.E,{fontSize:"sm",fontWeight:"bold",color:wo,children:[Ce.size," email",Ce.size>1?"s":""," selected"]}),(0,we.jsxs)(F.e,{size:"sm",children:[(0,we.jsx)(z.$,{onClick:vs,variant:"outline",borderColor:ko,children:"Unselect All"}),(0,we.jsx)(z.$,{leftIcon:(0,we.jsx)(V.OZ2,{}),onClick:ys,colorScheme:"blue",bg:(0,ie.oU)("primaryBlue"),_hover:{bg:(0,ie.oU)("primaryBlueHover")},children:"Archive Selected"})]})]}):(0,we.jsxs)(z.$,{onClick:()=>fs(t),size:"sm",variant:"outline",borderColor:ko,leftIcon:(0,we.jsx)(u.S,{size:"sm"}),children:["Select All (",t.length,")"]})}),(0,we.jsx)(m.T,{spacing:4,align:"stretch",children:t.map(e=>(0,we.jsx)(Ke,{email:e,onManageTags:cs,onArchive:e=>ps(e,!1),isSelected:Ce.has(e.id),onSelectChange:js},e.id))}),a>1&&(0,we.jsxs)(h.z,{justify:"space-between",mt:6,p:4,bg:Io,borderRadius:"lg",border:"1px solid",borderColor:ko,children:[(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Showing ",(Co.inbox-1)*xo+1,"-",Math.min(Co.inbox*xo,i)," of ",i," emails"]}),(0,we.jsxs)(h.z,{spacing:2,children:[(0,we.jsx)(E.K,{"aria-label":"Previous page",icon:(0,we.jsx)(V.irw,{}),size:"sm",isDisabled:1===Co.inbox,onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{inbox:e.inbox-1})),variant:"outline",borderColor:ko,color:wo,_hover:{bg:Io}}),Array.from({length:Math.min(5,a)},(e,o)=>{const s=Math.max(1,Math.min(Co.inbox-2+o,a-4))+o;return s>a?null:(0,we.jsx)(z.$,{size:"sm",onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{inbox:s})),variant:Co.inbox===s?"solid":"outline",bg:Co.inbox===s?(0,ie.oU)("primaryBlue"):"transparent",color:Co.inbox===s?"white":wo,borderColor:ko,_hover:{bg:Co.inbox===s?(0,ie.oU)("primaryBlueHover"):Io},children:s},s)}).filter(Boolean),(0,we.jsx)(E.K,{"aria-label":"Next page",icon:(0,we.jsx)(V.fOo,{}),size:"sm",isDisabled:Co.inbox===a,onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{inbox:e.inbox+1})),variant:"outline",borderColor:ko,color:wo,_hover:{bg:Io}})]}),(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Page ",Co.inbox," of ",a]})]})]}):0===t.length&&(null===Qo||void 0===Qo||null===(l=Qo.inboundEmails)||void 0===l?void 0:l.length)>0?(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.CKj,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No emails match your search criteria."}),(0,we.jsx)(z.$,{variant:"ghost",onClick:()=>{no(""),ao("all"),gs()},color:(0,ie.oU)("primaryBlue"),children:"Clear Filters"})]})})})}):(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V._Y7,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:Qe||ke?"No incoming emails found.":"No Email Address Assigned"}),!Qe&&!ke&&(0,we.jsx)(p.E,{color:Do,fontSize:"sm",textAlign:"center",maxW:"md",children:"Please contact your system administrator to have an email address assigned before you can receive emails."})]})})})})})()})}),(0,we.jsx)(P.K,{px:0,children:Ko?(0,we.jsx)(N.o,{py:10,children:(0,we.jsx)(I.y,{size:"xl",color:(0,ie.oU)("primaryBlue")})}):(0,we.jsx)(we.Fragment,{children:(e=>{const o=us((null===Yo||void 0===Yo?void 0:Yo.emailsSent)||[]);return o.length>0?(0,we.jsx)(m.T,{spacing:4,align:"stretch",children:o.map(e=>(0,we.jsx)(Je,{email:e,isInbound:!1,isSelected:Ee===e.id,onSelect:Ae},e.id))}):(null===Yo||void 0===Yo||null===(e=Yo.emailsSent)||void 0===e?void 0:e.length)>0?(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.CKj,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No emails match your search criteria."}),(0,we.jsx)(z.$,{variant:"ghost",onClick:()=>{no(""),ao("all")},color:(0,ie.oU)("primaryBlue"),children:"Clear Filters"})]})})})}):null})()||(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.kGk,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No sent emails found."})]})})})})})}),(0,we.jsx)(P.K,{px:0,children:Zo?(0,we.jsx)(N.o,{py:10,children:(0,we.jsx)(I.y,{size:"xl",color:(0,ie.oU)("primaryBlue")})}):(0,we.jsx)(we.Fragment,{children:(e=>{const o=us((null===Wo||void 0===Wo?void 0:Wo.emailsDraft)||[]);return o.length>0?(0,we.jsx)(m.T,{spacing:4,align:"stretch",children:o.map(e=>(0,we.jsx)(Je,{email:e,isInbound:!1,isSelected:Ee===e.id,onSelect:Ae},e.id))}):(null===Wo||void 0===Wo||null===(e=Wo.emailsDraft)||void 0===e?void 0:e.length)>0?(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.CKj,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No emails match your search criteria."}),(0,we.jsx)(z.$,{variant:"ghost",onClick:()=>{no(""),ao("all")},color:(0,ie.oU)("primaryBlue"),children:"Clear Filters"})]})})})}):null})()||(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.SG1,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No draft emails found."})]})})})})})}),(0,we.jsx)(P.K,{px:0,children:es?(0,we.jsx)(N.o,{py:10,children:(0,we.jsx)(I.y,{size:"xl",color:(0,ie.oU)("primaryBlue")})}):(0,we.jsx)(we.Fragment,{children:(e=>{const o=us((null===Xo||void 0===Xo?void 0:Xo.inboundEmails)||[]),s=bs(o,Co.archived);return s.paginatedEmails.length>0?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(h.z,{spacing:3,mb:4,p:4,bg:Io,borderRadius:"lg",border:"1px solid",borderColor:ko,children:Ce.size>0?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)(p.E,{fontSize:"sm",fontWeight:"bold",color:wo,children:[Ce.size," email",Ce.size>1?"s":""," selected"]}),(0,we.jsxs)(F.e,{size:"sm",children:[(0,we.jsx)(z.$,{onClick:vs,variant:"outline",borderColor:ko,children:"Unselect All"}),(0,we.jsx)(z.$,{leftIcon:(0,we.jsx)(V._Y7,{}),onClick:Es,colorScheme:"green",bg:"green.500",_hover:{bg:"green.600"},children:"Unarchive Selected"})]})]}):(0,we.jsxs)(z.$,{onClick:()=>fs(s.paginatedEmails),size:"sm",variant:"outline",borderColor:ko,leftIcon:(0,we.jsx)(u.S,{size:"sm"}),children:["Select All (",s.paginatedEmails.length,")"]})}),(0,we.jsx)(m.T,{spacing:4,align:"stretch",children:s.paginatedEmails.map(e=>(0,we.jsx)(Ke,{email:e,onManageTags:cs,onArchive:e=>ps(e,!0),isSelected:Ce.has(e.id),onSelectChange:js},e.id))}),s.totalPages>1&&(0,we.jsxs)(h.z,{justify:"space-between",mt:6,p:4,bg:Io,borderRadius:"lg",border:"1px solid",borderColor:ko,children:[(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Showing ",(Co.archived-1)*xo+1,"-",Math.min(Co.archived*xo,s.totalCount)," of ",s.totalCount," emails"]}),(0,we.jsxs)(h.z,{spacing:2,children:[(0,we.jsx)(E.K,{"aria-label":"Previous page",icon:(0,we.jsx)(V.irw,{}),size:"sm",isDisabled:1===Co.archived,onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{archived:e.archived-1})),variant:"outline",borderColor:ko,color:wo,_hover:{bg:Io}}),Array.from({length:Math.min(5,s.totalPages)},(e,o)=>{const l=Math.max(1,Math.min(Co.archived-2+o,s.totalPages-4))+o;return l>s.totalPages?null:(0,we.jsx)(z.$,{size:"sm",onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{archived:l})),variant:Co.archived===l?"solid":"outline",bg:Co.archived===l?(0,ie.oU)("primaryBlue"):"transparent",color:Co.archived===l?"white":wo,borderColor:ko,_hover:{bg:Co.archived===l?(0,ie.oU)("primaryBlueHover"):Io},children:l},l)}).filter(Boolean),(0,we.jsx)(E.K,{"aria-label":"Next page",icon:(0,we.jsx)(V.fOo,{}),size:"sm",isDisabled:Co.archived===s.totalPages,onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{archived:e.archived+1})),variant:"outline",borderColor:ko,color:wo,_hover:{bg:Io}})]}),(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Page ",Co.archived," of ",s.totalPages]})]})]}):0===o.length&&(null===Xo||void 0===Xo||null===(e=Xo.inboundEmails)||void 0===e?void 0:e.length)>0?(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.CKj,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No archived emails match your search criteria."}),(0,we.jsx)(z.$,{variant:"ghost",onClick:()=>{no(""),ao("all"),gs()},color:(0,ie.oU)("primaryBlue"),children:"Clear Filters"})]})})})}):(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.OZ2,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No archived emails yet."}),(0,we.jsx)(p.E,{color:Do,fontSize:"sm",children:"Archived emails will appear here after you archive them from your inbox."})]})})})})})()})}),(0,we.jsx)(P.K,{px:0,children:Oo?(0,we.jsx)(N.o,{py:10,children:(0,we.jsx)(I.y,{size:"xl",color:(0,ie.oU)("primaryBlue")})}):(0,we.jsx)(we.Fragment,{children:(()=>{const e=[...((null===$o||void 0===$o?void 0:$o.emails)||[]).map(e=>(0,r.A)((0,r.A)({},e),{},{isInbound:!1})),...((null===$o||void 0===$o?void 0:$o.inboundEmails)||[]).map(e=>(0,r.A)((0,r.A)({},e),{},{isInbound:!0}))],o=us(e);if(o.length>0){const e=o.sort((e,o)=>{const s=new Date(e.isInbound?e.date:e.sentAt||e.createdAt);return new Date(o.isInbound?o.date:o.sentAt||o.createdAt).getTime()-s.getTime()}),s=bs(e,Co.all);return(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(m.T,{spacing:4,align:"stretch",children:s.paginatedEmails.map(e=>(0,we.jsx)(Je,{email:e,isInbound:e.isInbound,isSelected:Ee===e.id,onSelect:Ae},"".concat(e.isInbound?"inbound":"outbound","-").concat(e.id)))}),s.totalPages>1&&(0,we.jsxs)(h.z,{justify:"space-between",mt:6,p:4,bg:Io,borderRadius:"lg",border:"1px solid",borderColor:ko,children:[(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Showing ",(Co.all-1)*xo+1,"-",Math.min(Co.all*xo,s.totalCount)," of ",s.totalCount," emails"]}),(0,we.jsxs)(h.z,{spacing:2,children:[(0,we.jsx)(E.K,{"aria-label":"Previous page",icon:(0,we.jsx)(V.irw,{}),size:"sm",isDisabled:1===Co.all,onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{all:e.all-1})),variant:"outline",borderColor:ko,color:wo,_hover:{bg:Io}}),Array.from({length:Math.min(5,s.totalPages)},(e,o)=>{const l=Math.max(1,Math.min(Co.all-2+o,s.totalPages-4))+o;return l>s.totalPages?null:(0,we.jsx)(z.$,{size:"sm",onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{all:l})),variant:Co.all===l?"solid":"outline",bg:Co.all===l?(0,ie.oU)("primaryBlue"):"transparent",color:Co.all===l?"white":wo,borderColor:ko,_hover:{bg:Co.all===l?(0,ie.oU)("primaryBlueHover"):Io},children:l},l)}),(0,we.jsx)(E.K,{"aria-label":"Next page",icon:(0,we.jsx)(V.fOo,{}),size:"sm",isDisabled:Co.all===s.totalPages,onClick:()=>So(e=>(0,r.A)((0,r.A)({},e),{},{all:e.all+1})),variant:"outline",borderColor:ko,color:wo,_hover:{bg:Io}})]}),(0,we.jsxs)(p.E,{fontSize:"sm",color:Do,children:["Page ",Co.all," of ",s.totalPages]})]})]})}return e.length>0?(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.CKj,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No emails match your search criteria."}),(0,we.jsx)(z.$,{variant:"ghost",onClick:()=>{no(""),ao("all")},color:(0,ie.oU)("primaryBlue"),children:"Clear Filters"})]})})})}):null})()||(0,we.jsx)(d.Z,{bg:Io,border:"1px solid",borderColor:ko,children:(0,we.jsx)(c.b,{children:(0,we.jsx)(N.o,{py:10,children:(0,we.jsxs)(m.T,{spacing:4,children:[(0,we.jsx)(g.I,{as:V.pHD,boxSize:12,color:Do}),(0,we.jsx)(p.E,{color:Do,fontSize:"lg",children:"No emails found. Create your first email to get started."}),(0,we.jsx)(z.$,{colorScheme:"blue",onClick:()=>l("/emails/new"),bg:(0,ie.oU)("primaryBlue"),_hover:{bg:(0,ie.oU)("primaryBlueHover")},children:"Compose Your First Email"})]})})})})})})]})]})]})}),(0,we.jsx)(ne.n,{}),(0,we.jsx)(R.Lt,{isOpen:X,leastDestructiveRef:pe,onClose:he,children:(0,we.jsx)($.m,{children:(0,we.jsxs)(R.EO,{bg:Io,border:"1px solid",borderColor:ko,children:[(0,we.jsx)(O.r,{fontSize:"lg",fontWeight:"bold",color:wo,children:"Delete Email"}),(0,we.jsx)(G.c,{color:Uo,children:"Are you sure you want to delete this email? This action cannot be undone."}),(0,we.jsxs)(W.j,{children:[(0,we.jsx)(z.$,{ref:pe,onClick:he,variant:"ghost",children:"Cancel"}),(0,we.jsx)(z.$,{colorScheme:"red",onClick:()=>{be&&is({variables:{id:be}})},ml:3,children:"Delete"})]})]})})}),(0,we.jsxs)(Z.aF,{isOpen:yo,onClose:Ao,size:"md",children:[(0,we.jsx)($.m,{bg:"blackAlpha.800",backdropFilter:"blur(5px)"}),(0,we.jsxs)(H.$,{bg:Io,border:"1px solid",borderColor:ko,children:[(0,we.jsx)(O.r,{color:wo,children:"Manage Tags for Email"}),(0,we.jsx)(Y.s,{color:Do}),(0,we.jsx)(G.c,{children:(0,we.jsx)(m.T,{spacing:4,align:"stretch",children:fo&&(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)(p.E,{fontSize:"sm",color:Uo,noOfLines:2,children:[(0,we.jsx)("strong",{children:"Subject:"})," ",fo.subject]}),fo.labels&&fo.labels.length>0&&(0,we.jsxs)(x.a,{children:[(0,we.jsx)(p.E,{fontSize:"sm",color:Do,mb:2,children:"Current tags:"}),(0,we.jsx)(v.B,{spacing:2,children:fo.labels.map(e=>(0,we.jsx)(v.Q,{children:(0,we.jsxs)(y.vw,{size:"md",bg:"rgba(168, 85, 247, 0.2)",color:"#A855F7",border:"1px solid",borderColor:"rgba(168, 85, 247, 0.3)",children:[(0,we.jsx)(y.d1,{children:e}),(0,we.jsx)(y.TV,{onClick:()=>(async e=>{fo&&await ns({variables:{emailId:fo.id,label:e}})})(e)})]})},e))})]}),(0,we.jsxs)(x.a,{children:[(0,we.jsx)(p.E,{fontSize:"sm",color:Do,mb:2,children:"Add new tag:"}),(0,we.jsxs)(h.z,{children:[(0,we.jsx)(B.p,{value:po,onChange:e=>jo(e.target.value),placeholder:"Enter tag name",size:"sm",bg:zo,color:wo,borderColor:ko,_placeholder:{color:Do},onKeyPress:e=>{"Enter"===e.key&&ms()}}),(0,we.jsx)(z.$,{size:"sm",onClick:ms,bg:(0,ie.oU)("primaryBlue"),color:"white",_hover:{bg:(0,ie.oU)("primaryBlueHover")},isDisabled:!po.trim(),children:"Add"})]})]}),(null===ls||void 0===ls?void 0:ls.availableInboundEmailLabels)&&ls.availableInboundEmailLabels.length>0&&(0,we.jsxs)(x.a,{children:[(0,we.jsx)(p.E,{fontSize:"sm",color:Do,mb:2,children:"Quick add from existing tags:"}),(0,we.jsx)(v.B,{spacing:2,children:ls.availableInboundEmailLabels.filter(e=>{var o;return!(null!==(o=fo.labels)&&void 0!==o&&o.includes(e))}).map(e=>(0,we.jsx)(v.Q,{children:(0,we.jsx)(y.vw,{size:"sm",cursor:"pointer",bg:ko,color:Uo,_hover:{bg:"rgba(168, 85, 247, 0.2)",color:"#A855F7"},onClick:()=>{jo(e),ms()},children:(0,we.jsx)(y.d1,{children:e})})},e))})]})]})})}),(0,we.jsx)(W.j,{children:(0,we.jsx)(z.$,{variant:"ghost",onClick:Ao,color:Do,children:"Done"})})]})]})]})}}}]);
//# sourceMappingURL=5725.1d8bef4d.chunk.js.map