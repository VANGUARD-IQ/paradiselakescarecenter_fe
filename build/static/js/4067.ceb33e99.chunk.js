"use strict";(self.webpackChunkbusiness_builder_master_frontend=self.webpackChunkbusiness_builder_master_frontend||[]).push([[4067],{68331:(e,r,o)=>{o.r(r),o.d(r,{default:()=>K});var n,t=o(89379),i=o(57528),l=o(65043),a=o(88787),s=o(34334),d=o(85871),m=o(33430),c=o(22107),b=o(98662),h=o(83169),u=o(24330),g=o(26201),p=o(44093),f=o(98939),x=o(73225),C=o(76668),N=o(35699),j=o(29904),y=o(30502),k=o(28846),v=o(35475),F=o(73216),w=o(31881),_=o(70459),S=o(26632),A=(o(65016),o(63295)),R=o(52003),z=o(66037),E=o(39985),P=o(95214),U=o(95314),W=o(70579);const I={email:"",fName:"",lName:"",phoneNumber:""},D=(0,_.J1)(n||(n=(0,i.A)(["\n  mutation CreateClient($input: ClientInput!) {\n    createClient(input: $input) {\n      id\n      fName\n      lName\n      email\n      phoneNumber\n      createdAt\n      updatedAt\n    }\n  }\n"]))),K=()=>{(0,z.H)("New Client");const[e]=(0,v.ok)(),[r,o]=(0,l.useState)(I),[n,i]=(0,l.useState)(!1),[_,{loading:K}]=(0,w.n)(D,{refetchQueries:["GetClients"]}),M=(0,y.d)(),J=(0,F.Zp)(),{colorMode:$}=(0,p.G6)();(0,l.useEffect)(()=>{const r=e.get("fName"),n=e.get("lName"),t=e.get("email"),l=e.get("phoneNumber"),a=e.get("source");(r||n||t||l)&&(console.log("\ud83d\udccb Pre-filling client form from URL params"),o({fName:r||"",lName:n||"",email:t||"",phoneNumber:l||""}),"booking"===a&&i(!0))},[e]);const T=(0,E.oU)("background.main",$),q=(0,E.oU)("background.cardGradient",$),B=(0,E.oU)("border.darkCard",$),G=(0,E.oU)("light"===$?"text.primary":"text.primaryDark",$),L=(0,E.oU)("light"===$?"text.secondary":"text.secondaryDark",$),H=(0,E.oU)("light"===$?"text.muted":"text.mutedDark",$),Y=e=>{const{name:r,value:n}=e.target;o(e=>(0,t.A)((0,t.A)({},e),{},{[r]:n}))};return(0,W.jsxs)(c.a,{bg:T,minHeight:"100vh",display:"flex",flexDirection:"column",children:[(0,W.jsx)(R.m,{}),(0,W.jsx)(P.y,{moduleConfig:U.default}),(0,W.jsx)(f.m,{maxW:"container.md",py:4,flex:"1",children:(0,W.jsxs)(h.Z,{bg:q,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",border:"1px",borderColor:B,borderRadius:"xl",overflow:"hidden",children:[(0,W.jsx)(g.a,{borderBottom:"1px",borderColor:B,children:(0,W.jsx)(k.D,{size:"lg",color:G,fontFamily:E.Kk.fonts.heading,fontWeight:"600",children:"\ud83d\udc65 New Client"})}),(0,W.jsxs)(u.b,{p:8,children:[n&&(0,W.jsxs)(a.F,{status:"info",mb:6,borderRadius:"md",children:[(0,W.jsx)(d._,{}),(0,W.jsxs)(c.a,{children:[(0,W.jsx)(m.X,{children:"Pre-filled from Booking"}),(0,W.jsx)(s.T,{fontSize:"sm",children:"This form has been pre-filled with information from a public booking. Review and save to create the client record."})]})]}),(0,W.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),r.fName.trim()&&r.lName.trim()){if(r.email.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email))return void M({title:"Invalid Email",description:"Please enter a valid email address",status:"error",duration:5e3,isClosable:!0})}if(r.phoneNumber&&r.phoneNumber.match(/^\+[1-9]\d{1,14}$/))try{const e=r.phoneNumber.replace(/\s+/g,""),o={fName:r.fName.trim(),lName:r.lName.trim(),phoneNumber:e};r.email.trim()&&(o.email=r.email.trim()),await _({variables:{input:o}}),M({title:"Success!",description:"New client has been successfully added",status:"success",duration:3e3,isClosable:!0}),J("/clients")}catch(o){console.error("Error creating client:",o),M({title:"Error creating client",description:o instanceof Error?o.message:"There was an error creating the client. Please try again.",status:"error",duration:5e3,isClosable:!0})}else M({title:"Invalid phone number",description:"Please enter a valid phone number in E.164 format (e.g., +12345678901)",status:"error",duration:5e3,isClosable:!0})}else M({title:"Missing Information",description:"Please fill in first name and last name",status:"error",duration:5e3,isClosable:!0})},children:(0,W.jsxs)(j.B,{spacing:6,children:[(0,W.jsxs)(x.MJ,{isRequired:!0,children:[(0,W.jsx)(C.l,{color:G,fontWeight:"500",fontSize:"sm",mb:2,children:"First Name"}),(0,W.jsx)(N.p,{name:"fName",value:r.fName,onChange:Y,placeholder:"Enter first name",bg:"light"===$?"white":"rgba(0, 0, 0, 0.2)",border:"1px",borderColor:B,borderRadius:"lg",color:G,_placeholder:{color:H},_focus:{borderColor:"light"===$?"#007AFF":L,boxShadow:"light"===$?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(255, 255, 255, 0.1)",outline:"none"},_hover:{borderColor:"light"===$?"#007AFF":L},size:"lg",fontFamily:E.Kk.fonts.body})]}),(0,W.jsxs)(x.MJ,{isRequired:!0,children:[(0,W.jsx)(C.l,{color:G,fontWeight:"500",fontSize:"sm",mb:2,children:"Last Name"}),(0,W.jsx)(N.p,{name:"lName",value:r.lName,onChange:Y,placeholder:"Enter last name",bg:"light"===$?"white":"rgba(0, 0, 0, 0.2)",border:"1px",borderColor:B,borderRadius:"lg",color:G,_placeholder:{color:H},_focus:{borderColor:"light"===$?"#007AFF":L,boxShadow:"light"===$?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(255, 255, 255, 0.1)",outline:"none"},_hover:{borderColor:"light"===$?"#007AFF":L},size:"lg",fontFamily:E.Kk.fonts.body})]}),(0,W.jsxs)(x.MJ,{children:[(0,W.jsx)(C.l,{color:G,fontWeight:"500",fontSize:"sm",mb:2,children:"Email (Optional)"}),(0,W.jsx)(N.p,{name:"email",type:"email",value:r.email,placeholder:"john@example.com (optional)",onChange:Y,bg:"light"===$?"white":"rgba(0, 0, 0, 0.2)",border:"1px",borderColor:B,borderRadius:"lg",color:G,_placeholder:{color:H},_focus:{borderColor:"light"===$?"#007AFF":L,boxShadow:"light"===$?"0 0 0 1px rgba(0, 122, 255, 0.2)":"0 0 0 1px rgba(255, 255, 255, 0.1)",outline:"none"},_hover:{borderColor:"light"===$?"#007AFF":L},size:"lg",fontFamily:E.Kk.fonts.body})]}),(0,W.jsxs)(x.MJ,{isRequired:!0,children:[(0,W.jsx)(C.l,{color:G,fontWeight:"500",fontSize:"sm",mb:2,children:"Phone Number"}),(0,W.jsx)(c.a,{border:"1px",borderColor:B,borderRadius:"lg",_focusWithin:{borderColor:L,boxShadow:"0 0 0 1px rgba(255, 255, 255, 0.1)"},_hover:{borderColor:L},bg:"rgba(0, 0, 0, 0.2)",p:3,children:(0,W.jsx)(S.Ay,{international:!0,defaultCountry:"AU",value:r.phoneNumber,onChange:e=>{console.log("Phone input value:",e),o(r=>(0,t.A)((0,t.A)({},r),{},{phoneNumber:e||""}))},placeholder:"Enter phone number",style:{".PhoneInputInput":{border:"none",outline:"none",background:"transparent",fontSize:"16px",fontFamily:E.Kk.fonts.body,color:G},".PhoneInputCountrySelect":{border:"none",background:"transparent",color:G}}})})]}),(0,W.jsx)(b.$,{type:"submit",bg:"white",color:"black",_hover:{bg:"gray.100",transform:"translateY(-2px)"},_active:{transform:"translateY(1px)"},isLoading:K,loadingText:"Creating Client...",size:"lg",borderRadius:"lg",fontWeight:"600",boxShadow:"0 2px 4px rgba(255, 255, 255, 0.1)",mt:4,fontFamily:E.Kk.fonts.body,children:"Create Client"})]})})]})]})}),(0,W.jsx)(A.n,{})]})}}}]);
//# sourceMappingURL=4067.ceb33e99.chunk.js.map